"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7888],{7888:(x,f,s)=>{s.r(f),s.d(f,{CursosPageModule:()=>U});var h=s(6814),l=s(95),a=s(9843),p=s(9085),g=s(5861),d=s(8915),v=s(4664),C=s(553),o=s(6689),b=s(2264),F=s(1012),Z=s(2425),P=s(930);const y=[{path:"",component:(()=>{var e;class u{constructor(i,r,t,n,m,M,T){this.fb=i,this.compress=r,this.sliderRepo=t,this.toast=n,this.genericS=m,this.params=M,this.nav=T,this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic"],["underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["horizontal_rule","format_clear"],["text_color","background_color"]],this.editar=!1,this.uri=C.N.image+"boletines/"}ngOnInit(){var i=this;this.editor=new d.ML,this.sliderForm=this.fb.group({titulo:[null],informacion:[null],precio:[null]}),this.params.params.pipe((0,v.w)(r=>{var t;return this.identificador=Number(null!==(t=null==r?void 0:r.identificador)&&void 0!==t?t:0),this.sliderRepo.curso$})).subscribe(function(){var r=(0,g.Z)(function*(t){if(0!==i.identificador){const n=t.find(m=>m.id===i.identificador);i.sliderForm.setValue({titulo:n.titulo,informacion:n.informacion,precio:n.precio}),i.image=i.uri+n.imagen,i.editar=!0}});return function(t){return r.apply(this,arguments)}}())}addImage(){var i=this;return(0,g.Z)(function*(){i.image=yield i.compress.returnImageCompress()})()}save(){var i=this;return(0,g.Z)(function*(){if(i.editar)return i.edit();const r=new FormData;let t;i.image&&r.append("imagen",i.compress.dataURItoBlob(i.image)),t="string"!=typeof i.sliderForm.controls.informacion.value?(0,d.io)(i.sliderForm.controls.informacion.value):i.sliderForm.controls.informacion.value,r.append("titulo",i.sliderForm.controls.titulo.value),r.append("informacion",t),r.append("precio",i.sliderForm.controls.precio.value);const n=i.sliderForm.controls.titulo.value.replace(/ /g,"-");r.append("identificador",n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),i.genericS.postWhitImage("cursos",r).subscribe(m=>{i.toast.success("Curso Creado"),i.sliderRepo.addCurso(m),i.image=null,i.sliderForm.reset()})})()}edit(){const i=new FormData;let r;this.image.includes("data:")&&i.append("imagen",this.compress.dataURItoBlob(this.image)),i.append("titulo",this.sliderForm.controls.titulo.value),r="string"!=typeof this.sliderForm.controls.informacion.value?(0,d.io)(this.sliderForm.controls.informacion.value):this.sliderForm.controls.informacion.value;const t=this.sliderForm.controls.titulo.value.replace(/ /g,"-");i.append("identificador",t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),i.append("informacion",r),i.append("precio",this.sliderForm.controls.precio.value),this.genericS.updateWhitImage("cursos",this.identificador,i).subscribe(n=>{this.toast.success("Curso Actualizado"),this.sliderRepo.updateCurso(this.identificador,n),this.image=null,this.sliderForm.reset(),this.nav.navigateBack("/dashboard/website/cursos-ver")})}}return(e=u).\u0275fac=function(i){return new(i||e)(o.Y36(l.qu),o.Y36(b.Y),o.Y36(F.U),o.Y36(Z._W),o.Y36(P.M),o.Y36(p.gz),o.Y36(a.SH))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-cursos"]],decls:21,vars:10,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"container","px-5"],[3,"formGroup"],["lines","none"],["slot","start","shape","round",3,"click"],["slot","end",2,"max-height","150px","width","200px",3,"src"],["type","text","label","Titulo","labelPlacement","floating","formControlName","titulo",1,"my-2","border"],["type","number","label","Precio","labelPlacement","floating","formControlName","precio",1,"my-2","border"],[1,"NgxEditor__Wrapper"],[3,"toolbar","editor"],["formControlName","informacion",3,"editor","placeholder"],["expand","block","shape","round",3,"disabled","click"]],template:function(i,r){1&i&&(o.TgZ(0,"ion-content",0),o._UZ(1,"br"),o.TgZ(2,"ion-toolbar",1),o._UZ(3,"br"),o.TgZ(4,"h1",2)(5,"b"),o._uU(6),o.qZA()(),o._UZ(7,"hr",3),o.qZA(),o.TgZ(8,"div",4)(9,"form",5)(10,"ion-item",6)(11,"ion-button",7),o.NdJ("click",function(){return r.addImage()}),o._uU(12," Subir Fotograf\xeda "),o.qZA(),o._UZ(13,"ion-img",8),o.qZA(),o._UZ(14,"ion-input",9)(15,"ion-input",10),o.TgZ(16,"div",11),o._UZ(17,"ngx-editor-menu",12)(18,"ngx-editor",13),o.qZA(),o.TgZ(19,"ion-button",14),o.NdJ("click",function(){return r.save()}),o._uU(20),o.qZA()()()()),2&i&&(o.Q6J("fullscreen",!0),o.xp6(6),o.hij(" ",r.editar?"Editar":"Crear"," Cursos"),o.xp6(3),o.Q6J("formGroup",r.sliderForm),o.xp6(4),o.Q6J("src",r.image),o.xp6(4),o.Q6J("toolbar",r.toolbar)("editor",r.editor),o.xp6(1),o.Q6J("editor",r.editor)("placeholder","Descripci\xf3n del evento"),o.xp6(1),o.Q6J("disabled",!r.image),o.xp6(1),o.hij(" ",r.editar?"Guardar Cambios":"Crear Curso"," "))},dependencies:[l._Y,l.JJ,l.JL,l.sg,l.u,d.tP,d.Mn,a.YG,a.W2,a.Xz,a.pK,a.Ie,a.sr,a.as,a.j9]}),u})()}];let J=(()=>{var e;class u{}return(e=u).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[p.Bz.forChild(y),p.Bz]}),u})(),U=(()=>{var e;class u{}return(e=u).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[h.ez,l.u5,l.UX,d.FP,a.Pc,J]}),u})()}}]);