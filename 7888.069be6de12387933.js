"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7888],{7888:(M,f,s)=>{s.r(f),s.d(f,{CursosPageModule:()=>T});var h=s(6814),l=s(95),n=s(9843),p=s(9085),g=s(5861),d=s(8915),v=s(4664),C=s(6528),F=s(553),o=s(6689),b=s(2264),Z=s(1012),P=s(2425),y=s(930);const I=[{path:"",component:(()=>{var t;class u{constructor(i,e,r,a,m,J,A,N){this.fb=i,this.compress=e,this.sliderRepo=r,this.toast=a,this.genericS=m,this.params=J,this.nav=A,this.modalC=N,this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic"],["underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["horizontal_rule","format_clear"],["text_color","background_color"]],this.editar=!1,this.uri=F.N.image+"boletines/"}ngOnInit(){var i=this;this.editor=new d.ML,this.sliderForm=this.fb.group({titulo:[null],informacion:[null],precio:[null],tipo:[null]}),this.params.params.pipe((0,v.w)(e=>{var r;return this.identificador=Number(null!==(r=null==e?void 0:e.identificador)&&void 0!==r?r:0),this.sliderRepo.curso$})).subscribe(function(){var e=(0,g.Z)(function*(r){if(0!==i.identificador){const a=r.find(m=>m.id===i.identificador);i.sliderForm.setValue({titulo:a.titulo,informacion:a.informacion,precio:a.precio,tipo:a.tipo}),i.image=i.uri+a.imagen,i.editar=!0}});return function(r){return e.apply(this,arguments)}}())}addImage(){var i=this;return(0,g.Z)(function*(){i.image=yield i.compress.returnImageCompress();const e=yield i.modalC.create({component:C.n,animated:!0,componentProps:{imageUrl:i.image}});e.onDidDismiss().then(({data:r})=>{i.image=null!=r?r:null}),yield e.present()})()}save(){var i=this;return(0,g.Z)(function*(){if(i.editar)return i.edit();const e=new FormData;i.image&&e.append("imagen",i.compress.dataURItoBlob(i.image));let r="";i.sliderForm.controls.informacion.value&&(r="string"!=typeof i.sliderForm.controls.informacion.value?(0,d.io)(i.sliderForm.controls.informacion.value):i.sliderForm.controls.informacion.value),e.append("titulo",i.sliderForm.controls.titulo.value),r&&e.append("informacion",r),e.append("precio",i.sliderForm.controls.precio.value),e.append("tipo",i.sliderForm.controls.tipo.value);const a=i.sliderForm.controls.titulo.value.replace(/ /g,"-");e.append("identificador",a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),i.genericS.postWhitImage("cursos",e).subscribe(m=>{i.toast.success("Curso Creado"),i.sliderRepo.addCurso(m),i.image=null,i.sliderForm.reset()})})()}edit(){const i=new FormData;let e;this.image.includes("data:")&&i.append("imagen",this.compress.dataURItoBlob(this.image)),i.append("titulo",this.sliderForm.controls.titulo.value),this.sliderForm.controls.informacion.value&&(e="string"!=typeof this.sliderForm.controls.informacion.value?(0,d.io)(this.sliderForm.controls.informacion.value):this.sliderForm.controls.informacion.value);const r=this.sliderForm.controls.titulo.value.replace(/ /g,"-");i.append("identificador",r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),e&&i.append("informacion",e),i.append("precio",this.sliderForm.controls.precio.value),i.append("tipo",this.sliderForm.controls.tipo.value),this.genericS.updateWhitImage("cursos",this.identificador,i).subscribe(a=>{this.toast.success("Curso Actualizado"),this.sliderRepo.updateCurso(this.identificador,a),this.image=null,this.sliderForm.reset(),this.nav.navigateBack("/dashboard/website/cursos-ver")})}}return(t=u).\u0275fac=function(i){return new(i||t)(o.Y36(l.qu),o.Y36(b.Y),o.Y36(Z.U),o.Y36(P._W),o.Y36(y.M),o.Y36(p.gz),o.Y36(n.SH),o.Y36(n.IN))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-cursos"]],decls:29,vars:10,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"container","px-5"],[3,"formGroup"],["lines","none"],["slot","start","shape","round",3,"click"],["slot","end",2,"max-height","150px","width","200px",3,"src"],["type","text","label","Titulo","labelPlacement","floating","formControlName","titulo",1,"my-2","border"],["type","number","label","Precio","labelPlacement","floating","formControlName","precio",1,"my-2","border"],["label","Instituci\xf3n del Curso","labelPlacement","floating","formControlName","tipo"],["value","FIC"],["value","ITC"],["value","ICIC"],[1,"NgxEditor__Wrapper"],[3,"toolbar","editor"],["formControlName","informacion",3,"editor","placeholder"],["expand","block","shape","round",3,"disabled","click"]],template:function(i,e){1&i&&(o.TgZ(0,"ion-content",0),o._UZ(1,"br"),o.TgZ(2,"ion-toolbar",1),o._UZ(3,"br"),o.TgZ(4,"h1",2)(5,"b"),o._uU(6),o.qZA()(),o._UZ(7,"hr",3),o.qZA(),o.TgZ(8,"div",4)(9,"form",5)(10,"ion-item",6)(11,"ion-button",7),o.NdJ("click",function(){return e.addImage()}),o._uU(12," Subir Fotograf\xeda "),o.qZA(),o._UZ(13,"ion-img",8),o.qZA(),o._UZ(14,"ion-input",9)(15,"ion-input",10),o.TgZ(16,"ion-item")(17,"ion-select",11)(18,"ion-select-option",12),o._uU(19,"FIC"),o.qZA(),o.TgZ(20,"ion-select-option",13),o._uU(21,"ITC"),o.qZA(),o.TgZ(22,"ion-select-option",14),o._uU(23,"ICIC"),o.qZA()()(),o.TgZ(24,"div",15),o._UZ(25,"ngx-editor-menu",16)(26,"ngx-editor",17),o.qZA(),o.TgZ(27,"ion-button",18),o.NdJ("click",function(){return e.save()}),o._uU(28),o.qZA()()()()),2&i&&(o.Q6J("fullscreen",!0),o.xp6(6),o.hij(" ",e.editar?"Editar":"Crear"," Cursos"),o.xp6(3),o.Q6J("formGroup",e.sliderForm),o.xp6(4),o.Q6J("src",e.image),o.xp6(12),o.Q6J("toolbar",e.toolbar)("editor",e.editor),o.xp6(1),o.Q6J("editor",e.editor)("placeholder","Descripci\xf3n del evento"),o.xp6(1),o.Q6J("disabled",!e.image),o.xp6(1),o.hij(" ",e.editar?"Guardar Cambios":"Crear Curso"," "))},dependencies:[l._Y,l.JJ,l.JL,l.sg,l.u,d.tP,d.Mn,n.YG,n.W2,n.Xz,n.pK,n.Ie,n.t9,n.n0,n.sr,n.as,n.QI,n.j9]}),u})()}];let U=(()=>{var t;class u{}return(t=u).\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[p.Bz.forChild(I),p.Bz]}),u})(),T=(()=>{var t;class u{}return(t=u).\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[h.ez,l.u5,l.UX,d.FP,n.Pc,U]}),u})()}}]);