"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4910],{4910:(G,A,n)=>{n.r(A),n.d(A,{ApoyosPageModule:()=>b});var C=n(6814),v=n(95),g=n(9843),u=n(9085),c=n(5861),t=n(6676),m=n(553),f=n(1486),a=n(6689),M=n(4433),H=n(7153),X=n(2425),Q=n(930),w=n(2051);t.locale("es");const k=[{path:"",component:(()=>{var s;class h{constructor(e,d,i,l,r,P){this.nav=e,this.alert=d,this.loading=i,this.toast=l,this.genericService=r,this.apoyos=P,this.uri=m.N.image+"apoyos-dn/",this.eventos=[]}ngOnInit(){this.genericService.getAll("desastres").subscribe(e=>{this.eventos=e,this.apoyos.setApoyos(e)})}mon(e){return t(e).locale("es").format("L")+" "+t(new Date(e)).utc().format("LTS")}vistaPrevia(e){var d=this;return(0,c.Z)(function*(){const i=d.eventos.find(l=>l.id===e);i&&window.open(m.N.host+"evento/"+i.identificador,"_blank")})()}exportToExcel(e){const d=this.eventos.find(o=>o.id===e);let i=[];for(let o of null==d?void 0:d.boletos){var l,r,P,E,p,x,D,S,T,R,B,F,O,z,N,U,Y,Z,j,L,I,W,K,J;i.push({Folio:o.folio,Nombre:o.afiliado?null==o||null===(l=o.afiliado)||void 0===l?void 0:l.nombre:null!==(r=null==o||null===(P=o.participante)||void 0===P?void 0:P.nombre)&&void 0!==r?r:"",Cargo:o.afiliado?null==o||null===(E=o.afiliado)||void 0===E?void 0:E.cargo:null!==(p=null==o||null===(x=o.participante)||void 0===x?void 0:x.cargo)&&void 0!==p?p:"",Empresa:o.afiliado?null==o||null===(D=o.afiliado)||void 0===D?void 0:D.empresa:null!==(S=null==o||null===(T=o.participante)||void 0===T?void 0:T.empresa)&&void 0!==S?S:"",Organizaci\u00f3n:o.afiliado?null==o||null===(R=o.afiliado)||void 0===R?void 0:R.organizacion:null!==(B=null==o||null===(F=o.participante)||void 0===F?void 0:F.organizacion)&&void 0!==B?B:"",Correo:o.afiliado?null==o||null===(O=o.afiliado)||void 0===O?void 0:O.email:null!==(z=null==o||null===(N=o.participante)||void 0===N?void 0:N.email)&&void 0!==z?z:"",Tel\u00e9fono:o.afiliado?null==o||null===(U=o.afiliado)||void 0===U?void 0:U.telefono:null!==(Y=null==o||null===(Z=o.participante)||void 0===Z?void 0:Z.telefono)&&void 0!==Y?Y:"","Tipo Asistencia":null!==(j=o.privilegio)&&void 0!==j?j:"N/A","Forma de Pago":o.idPago?"Tarjeta de cr\xe9dito":"Transferencia","Boleto Pagado":o.active?"Si":"No","Necesita Factura":o.quieroFactura?"Si":"No",RFC:o.afiliado?null==o||null===(L=o.afiliado)||void 0===L?void 0:L.rfc:null!==(I=null==o||null===(W=o.participante)||void 0===W?void 0:W.rfc)&&void 0!==I?I:"",CURP:null!==(K=null==o||null===(J=o.participante)||void 0===J?void 0:J.curp)&&void 0!==K?K:""})}if(i){const o=f.P6.json_to_sheet(i),V=f.P6.book_new();f.P6.book_append_sheet(V,o,"Sheet1"),f.NC(V,(null==d?void 0:d.titulo.toUpperCase())+".xlsx")}}deleteEvento(e){var d=this;return(0,c.Z)(function*(){var i;yield d.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar este evento",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(i=(0,c.Z)(function*(){d.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield d.loading.create(),yield d.loading.show(),d.genericService.delete("desastres",e).subscribe(function(){var l=(0,c.Z)(function*(r){yield d.loading.hide(),d.toast.success("Apoyo Eliminado")});return function(r){return l.apply(this,arguments)}}())}),function(){return i.apply(this,arguments)})}]})})()}cerrarEvento(e){var d=this;return(0,c.Z)(function*(){var i;yield d.alert.setData({animated:!0,header:"Cerrar Apoyo",message:"Est\xe1 a punto de cerrar el apoyo una vez lo haga no podr\xe1 reabrilo \xbfDesea Continuar?",buttons:[{text:"Cancelar"},{text:"Cerrar",handler:(i=(0,c.Z)(function*(){d.genericService.update("desastres",e,{active:!1}).subscribe(l=>{d.eventos=d.eventos.map(r=>r.id===e?l:r),d.toast.success("Apoyo Cerrado")})}),function(){return i.apply(this,arguments)})}]})})()}}return(s=h).\u0275fac=function(e){return new(e||s)(a.Y36(g.SH),a.Y36(M.c),a.Y36(H.b),a.Y36(X._W),a.Y36(Q.M),a.Y36(w.d))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-apoyos"]],decls:1,vars:0,template:function(e,d){1&e&&a._UZ(0,"ion-router-outlet")},dependencies:[g.jP],styles:[".red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),h})(),children:[{path:"crear-apoyos",loadChildren:()=>Promise.all([n.e(2264),n.e(8915),n.e(3923)]).then(n.bind(n,3923)).then(s=>s.CrearApoyoPageModule)},{path:"editar-apoyos/:identificador",loadChildren:()=>Promise.all([n.e(2264),n.e(8915),n.e(3923)]).then(n.bind(n,3923)).then(s=>s.CrearApoyoPageModule)},{path:"",loadChildren:()=>n.e(4149).then(n.bind(n,4149)).then(s=>s.VerApoyoPageModule)},{path:"ver-usuarios/:identificador",loadChildren:()=>n.e(1601).then(n.bind(n,1601)).then(s=>s.VerUsuariosPageModule)}]}];let q=(()=>{var s;class h{}return(s=h).\u0275fac=function(e){return new(e||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[u.Bz.forChild(k),u.Bz]}),h})(),b=(()=>{var s;class h{}return(s=h).\u0275fac=function(e){return new(e||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[C.ez,v.u5,g.Pc,q]}),h})()},2051:(G,A,n)=>{n.d(A,{d:()=>c});var C=n(1264),v=n(4998),g=n(6689);const u=(0,C.MT)({name:"user"},(0,v.h4)());let c=(()=>{var t;class m{constructor(){this.user$=u.pipe((0,v.WK)())}setApoyos(a){u.update((0,v.J6)(a))}addApoyo(a){u.update((0,v.dP)(a))}updateApoyo(a,M){u.update((0,v.jB)(a,M))}deleteApoyo(a){u.update((0,v._L)(a))}}return(t=m).\u0275fac=function(a){return new(a||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),m})()}}]);