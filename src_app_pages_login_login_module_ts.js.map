{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":"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","sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts","./src/app/pages/login/login.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { NavController } from '@ionic/angular';\r\nimport { catchError, takeUntil, tap } from 'rxjs/operators';\r\nimport { Auth } from 'src/app/shared/repos/auth.repository';\r\nimport { ErrorService } from 'src/app/shared/services/error.service';\r\nimport { GenericService } from 'src/app/shared/services/generic-service';\r\nimport { AutenticarToken } from 'src/app/shared/tools/autenticadorToken';\r\nimport { LoadingService } from 'src/app/shared/tools/loading.service';\r\nimport { ToastService } from 'src/app/shared/tools/toast.service';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n  loginForm!:FormGroup;\r\n  viewPassword:boolean = false;\r\n  constructor(\r\n    private fb:FormBuilder,\r\n    private loading:LoadingService,\r\n    private toast:ToastService,\r\n    private genericService:GenericService,\r\n    private errorService:ErrorService,\r\n    private navController:NavController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.loginForm = this.fb.group({\r\n      email:[null,Validators.required],\r\n      password:[null,Validators.required]\r\n    });\r\n    this.loading.setData({\r\n      animated:true,\r\n      backdropDismiss:false,\r\n      message:'Iniciando Sesión',\r\n      spinner:'crescent'\r\n    });\r\n  }\r\n\r\n  async login(){\r\n    await this.loading.create();\r\n    await this.loading.show();\r\n    this.genericService.post<{user:Auth,jwt:string}>('user/login',this.loginForm.value).pipe(\r\n      catchError(async (error) => {\r\n        await this.errorService.catchError(error)\r\n        return {user:{names:''},jwt:'undefined'}; \r\n      }),\r\n      takeUntil(this.errorService.next),\r\n      tap(async ({user,jwt}) => {\r\n        this.toast.setData({\r\n          message:'Bienvenido: ' + user.names,\r\n          duration:3000,\r\n          color:'success'\r\n        });\r\n        await this.loading.hide();\r\n        this.navController.navigateForward(\"/dashboard\",{animated:true});\r\n      }) \r\n    ).subscribe();\r\n\r\n  }\r\n\r\n}\r\n","\r\n<ion-content [fullscreen]=\"true\">\r\n<div class=\"h-100 d-flex fondo\">\r\n  <ion-card class=\"m-auto\" mode=\"ios\">\r\n    <ion-card-header class=\"d-flex\">\r\n      <ion-img src=\"https://neixtmedia.com/assets/img/Logotipo.png\" class=\"img-fluid mx-auto\"></ion-img>\r\n    </ion-card-header>\r\n    <ion-card-content>\r\n      <form [formGroup]=\"loginForm\" (ngSubmit)=\"login()\">\r\n        <ion-item>\r\n          <ion-input label=\"Correo\" labelPlacement=\"floating\" required formControlName=\"email\" type=\"text\"></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-input label=\"Contraseña\" labelPlacement=\"floating\"  required formControlName=\"password\" [type]=\"viewPassword ? 'text' : 'password'\"></ion-input>\r\n          <ion-button (click)=\"viewPassword=!viewPassword\" fill=\"clear\">\r\n            <ion-icon slot=\"icon-only\" [name]=\"viewPassword ? 'eye-off-outline' :'eye-outline'\"></ion-icon>\r\n          </ion-button>\r\n        </ion-item>\r\n        <div class=\"d-flex my-3\">\r\n          <ion-button class=\"mx-auto\" block color=\"primary\" shape=\"round\" type=\"submit\" [disabled]=\"loginForm.invalid\">\r\n            Iniciar sesión\r\n          </ion-button>\r\n        </div>\r\n      </form>\r\n    </ion-card-content>\r\n  </ion-card>\r\n</div>\r\n</ion-content>\r\n"],"names":["RouterModule","LoginPage","routes","path","component","LoginPageRoutingModule","forChild","imports","i1","exports","CommonModule","FormsModule","ReactiveFormsModule","IonicModule","LoginPageModule","declarations","Validators","catchError","takeUntil","tap","constructor","fb","loading","toast","genericService","errorService","navController","viewPassword","ngOnInit","loginForm","group","email","required","password","setData","animated","backdropDismiss","message","spinner","login","_this","_asyncToGenerator","create","show","post","value","pipe","_ref","error","user","names","jwt","_x","apply","arguments","next","_ref2","duration","color","hide","navigateForward","_x2","subscribe","i0","ɵɵdirectiveInject","FormBuilder","i2","LoadingService","i3","ToastService","i4","GenericService","i5","ErrorService","i6","NavController","selectors","decls","vars","consts","template","LoginPage_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵlistener","LoginPage_Template_form_ngSubmit_6_listener","LoginPage_Template_ion_button_click_11_listener","ɵɵtext","ɵɵproperty","ɵɵadvance","invalid"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}