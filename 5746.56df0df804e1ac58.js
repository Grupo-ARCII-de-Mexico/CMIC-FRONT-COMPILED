"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5746,9026],{5404:(D,T,a)=>{a.d(T,{x:()=>R});var f=a(5861),x=a(9026),p=a(9397),E=a(4664),C=a(4028),e=a(6689),S=a(930),b=a(95),t=a(2264),y=a(4433),m=a(9843),U=a(1284),v=a(7153),P=a(2425),Z=a(6814);function N(g,h){if(1&g&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&g){const d=h.$implicit;e.Q6J("value",h.index),e.xp6(1),e.Oqu(d)}}function A(g,h){if(1&g&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&g){const d=h.$implicit;e.Q6J("value",null==d?null:d.id),e.xp6(1),e.Oqu(null==d?null:d.ciudad)}}function O(g,h){if(1&g&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&g){const d=h.$implicit;e.Q6J("value",d.id),e.xp6(1),e.Oqu(d.nombre)}}function I(g,h){if(1&g&&(e.TgZ(0,"ion-select-option",25),e._uU(1),e.qZA()),2&g){const d=e.oxw(2);e.Q6J("value",null==d.extranjero?null:d.extranjero.id),e.xp6(1),e.Oqu(null==d.extranjero?null:d.extranjero.nombre)}}function J(g,h){if(1&g){const d=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){e.CHM(d);const _=e.oxw();return e.KtG(_.update())}),e.TgZ(1,"ion-item")(2,"ion-select",6),e.YNc(3,N,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",8),e.qZA(),e.TgZ(6,"ion-item")(7,"ion-input",9)(8,"div",10),e._uU(9,"Nombre Completo "),e.TgZ(10,"ion-text",11),e._uU(11,"*"),e.qZA()()()(),e.TgZ(12,"ion-item")(13,"ion-input",12)(14,"div",10),e._uU(15,"Tel\xe9fono "),e.TgZ(16,"ion-text",11),e._uU(17,"*"),e.qZA()()()(),e.TgZ(18,"ion-item")(19,"ion-input",13)(20,"div",10),e._uU(21,"Correo "),e.TgZ(22,"ion-text",11),e._uU(23,"*"),e.qZA()()()(),e.TgZ(24,"ion-item"),e._UZ(25,"ion-input",14),e.qZA(),e.TgZ(26,"ion-item")(27,"ion-input",15)(28,"div",10),e._uU(29,"Cargo en la empresa "),e._UZ(30,"ion-text",11),e.qZA()()(),e.TgZ(31,"ion-item")(32,"ion-select",16),e.YNc(33,A,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(34,"ion-item"),e._UZ(35,"ion-input",17),e.qZA(),e.TgZ(36,"ion-item")(37,"ion-select",18)(38,"div",10),e._uU(39,"Estado de Origen "),e.qZA(),e.YNc(40,O,2,2,"ion-select-option",7),e.YNc(41,I,2,2,"ion-select-option",19),e.qZA()(),e.TgZ(42,"ion-item"),e._UZ(43,"ion-input",20),e.qZA(),e.TgZ(44,"ion-item"),e._UZ(45,"ion-input",21),e.qZA(),e.TgZ(46,"ion-item")(47,"ion-text"),e._uU(48,"Suba su credencial estudiantil o documento que lo avale "),e._UZ(49,"br"),e.qZA(),e.TgZ(50,"ion-button",22),e.NdJ("click",function(){e.CHM(d);const _=e.oxw();return e.KtG(_.upload())}),e._uU(51," Subir Credencial "),e.qZA()(),e.TgZ(52,"ion-button",23),e._uU(53," Actualizar "),e.qZA()()}if(2&g){const d=e.oxw();e.Q6J("formGroup",d.participanteForm),e.xp6(3),e.Q6J("ngForOf",d.tipoPublicoArray),e.xp6(29),e.Q6J("cancelText","Cerrar"),e.xp6(1),e.Q6J("ngForOf",d.delegaciones),e.xp6(4),e.Q6J("cancelText","Cerrar"),e.xp6(3),e.Q6J("ngForOf",d.estados),e.xp6(1),e.Q6J("ngIf",d.extranjero)}}let R=(()=>{var g;class h{constructor(i,_,n,s,o,r,l,c,u){this.genericS=i,this.fb=_,this.compressService=n,this.alert=s,this.modalC=o,this.boletos=r,this.nav=l,this.load=c,this.toast=u,this.delegaciones=[],this.estados=[],this.tipoPublico=C.L,this.tipoPublicoArray=C.x,this.stripeCosto=0}ngOnInit(){this.stripe(),(0,x.$)(this.genericS.getAll("delegacion"),this.genericS.getAll("estados")).pipe((0,p.b)(i=>{var _,n,s,o,r;this.delegaciones=i[0].sort(function(c,u){return c.ciudad.localeCompare(u.ciudad)}),this.extranjero=i[1].find(c=>33==c.id),this.estados=i[1].filter(c=>33!==c.id).sort(function(c,u){return c.nombre.localeCompare(u.nombre)}),this.participante=this.boleto.participante;const l=null!==(_=null===(n=i[0].find(c=>{var u;return c.ciudad===(null===(u=this.participante)||void 0===u?void 0:u.delegacion)}))||void 0===n?void 0:n.id)&&void 0!==_?_:null;this.participanteForm=this.fb.group({nombre:this.participante.nombre,numAfiliado:this.participante.numAfiliado,telefono:this.participante.telefono,email:this.participante.email,cargo:this.participante.cargo,empresa:this.participante.empresa,curp:this.participante.curp,rfc:this.participante.rfc,organizacion:this.participante.organizacion,estado:null!==(s=null===(o=this.participante)||void 0===o||null===(o=o.estado)||void 0===o?void 0:o.id)&&void 0!==s?s:null,delegacion:l,tipo:null!==(r=Number(this.participante.tipo))&&void 0!==r?r:0})})).subscribe()}upload(){var i=this;return(0,f.Z)(function*(){i.evidencia=yield i.compressService.returnImageCompress()})()}update(){var i=this;return(0,f.Z)(function*(){if(i.load.setData({message:"Actualizando Usuario",animated:!0,spinner:"dots"}),yield i.load.create(),yield i.load.show(),i.participanteForm.controls.delegacion.value){var _,n;const s=null!==(_=i.delegaciones.find(o=>o.id===i.participanteForm.controls.delegacion.value))&&void 0!==_?_:null;i.participanteForm.controls.delegacion.setValue(null!==(n=null==s?void 0:s.ciudad)&&void 0!==n?n:null)}i.genericS.update("participante",i.participante.id,{...i.participanteForm.value}).subscribe(function(){var s=(0,f.Z)(function*(o){yield i.modalC.dismiss(),yield i.load.hide(),i.toast.success("Usuario Actualizado"),i.boletos.updateEvento(i.boleto.id,{participante:o})});return function(o){return s.apply(this,arguments)}}())})()}updateBoleto(){this.genericS.update("boleto",this.boleto.id,this.boleto).subscribe(i=>{this.boletos.updateEvento(i.id,i)})}stripe(){this.boleto.idPago&&this.genericS.post("payments",{idPago:this.boleto.idPago}).subscribe(i=>{this.stripeCosto=i.amount})}pagar(){var i=this;return(0,f.Z)(function*(){var _;yield i.alert.setData({animated:!0,header:"Confirmar Pago",message:"Si confirma el pago se procedera con el proceso de entrega del QR",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(_=(0,f.Z)(function*(){i.genericS.update("boleto",i.boleto.id,{active:!0}).pipe((0,E.w)(n=>(i.boletos.updateEvento(n.id,n),i.genericS.post("boleto/confirm/"+n.id,{}))),(0,p.b)(n=>{i.toast.success("boleto activado"),i.modalC.dismiss()})).subscribe()}),function(){return _.apply(this,arguments)})}]})})()}}return(g=h).\u0275fac=function(i){return new(i||g)(e.Y36(S.M),e.Y36(b.qu),e.Y36(t.Y),e.Y36(y.c),e.Y36(m.IN),e.Y36(U.b9),e.Y36(m.SH),e.Y36(v.b),e.Y36(P._W))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-editar-usuario"]],inputs:{boleto:"boleto"},decls:8,vars:3,consts:[[3,"translucent"],["color","primary"],["slot","end","color","tertiary","expand","block",1,"me-2",3,"click"],[3,"fullscreen"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["label","Tipo de Participante","formControlName","tipo","placeholder","Seleccione"],[3,"value",4,"ngFor","ngForOf"],["labelPlacement","floating","label","No.Afiliado","formControlName","numAfiliado","type","text"],["labelPlacement","floating","formControlName","nombre","type","text"],["slot","label"],["color","danger"],["labelPlacement","floating","formControlName","telefono","type","text"],["labelPlacement","floating","formControlName","email","type","email"],["label","Ingrese el nombre de su empresa","labelPlacement","floating","formControlName","empresa","type","text"],["labelPlacement","floating","formControlName","cargo","type","text"],["label","Delegaci\xf3n CMIC","formControlName","delegacion","okText","Seleccionar","placeholder","Seleccione",3,"cancelText"],["label","Ingrese el nombre de su organizaci\xf3n","labelPlacement","floating","formControlName","organizacion","type","text"],["formControlName","estado","okText","Seleccionar","placeholder","Seleccione",3,"cancelText"],["class","border-top",3,"value",4,"ngIf"],["label","RFC","labelPlacement","floating","formControlName","rfc","type","text"],["label","CURP","labelPlacement","floating","formControlName","curp","type","text"],["expand","block","shape","round",3,"click"],["expand","block","slot","end","shape","round","type","submit",1,"mt-3"],[3,"value"],[1,"border-top",3,"value"]],template:function(i,_){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),e._uU(3,"Editar Participante"),e.qZA(),e.TgZ(4,"ion-button",2),e.NdJ("click",function(){return _.pagar()}),e._uU(5," Confirmar Pago "),e.qZA()()(),e.TgZ(6,"ion-content",3),e.YNc(7,J,54,7,"form",4),e.qZA()),2&i&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",_.participanteForm))},dependencies:[Z.sg,Z.O5,b._Y,b.JJ,b.JL,b.sg,b.u,m.YG,m.W2,m.Gu,m.pK,m.Ie,m.t9,m.n0,m.yW,m.wd,m.sr,m.QI,m.j9]}),h})()},5746:(D,T,a)=>{a.r(T),a.d(T,{VerUsuariosPageModule:()=>_});var f=a(6814),x=a(95),p=a(9843),E=a(9085),C=a(5861),e=a(6676),S=a(4028),b=a(5404),t=a(6689),y=a(1284),m=a(8013),U=a(930),v=a(4433),P=a(2425),Z=a(7602),N=a(6991);let A=(()=>{var n;class s{transform(r,l){const c=[];if(!l)return r;if(r)for(const M of r){var u;(null==M||null===(u=M.participante)||void 0===u?void 0:u.nombre.toLowerCase().indexOf(l.toLowerCase()))>-1&&c.push(M)}return(0,N.o)(c)}}return(n=s).\u0275fac=function(r){return new(r||n)},n.\u0275pipe=t.Yjl({name:"userSearch",type:n,pure:!0}),s})();function O(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"ion-buttons",12)(15,"ion-button",13),t.NdJ("click",function(){const c=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.edit(c))}),t._UZ(16,"ion-icon",14),t.qZA(),t.TgZ(17,"ion-button",13),t.NdJ("click",function(){const c=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.delete(c.id))}),t._UZ(18,"ion-icon",15),t.qZA()()()()}if(2&n){const o=s.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.nombre),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.rfc),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.telefono),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.email),t.xp6(2),t.Oqu(r.tipoPubico[null==o||null==o.participante?null:o.participante.tipo]),t.xp6(2),t.Oqu(o.active?"Pagado":"")}}function I(n,s){if(1&n&&(t.TgZ(0,"table",8)(1,"thead",9)(2,"tr")(3,"th",10),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th",10),t._uU(6,"RFC"),t.qZA(),t.TgZ(7,"th",10),t._uU(8,"Tel\xe9fono"),t.qZA(),t.TgZ(9,"th",10),t._uU(10,"Correo"),t.qZA(),t.TgZ(11,"th",10),t._uU(12,"Role"),t.qZA(),t.TgZ(13,"th",10),t._uU(14,"Estatus"),t.qZA(),t.TgZ(15,"th",10),t._uU(16,"Opciones"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,O,19,6,"tr",11),t.ALo(19,"userSearch"),t.qZA()()),2&n){const o=t.oxw();t.xp6(18),t.Q6J("ngForOf",t.xi3(19,1,o.boletos,o.search))}}function J(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"ion-buttons",12)(15,"ion-button",13),t.NdJ("click",function(){const c=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.edit(c))}),t._UZ(16,"ion-icon",14),t.qZA(),t.TgZ(17,"ion-button",13),t.NdJ("click",function(){const c=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.delete(c.id))}),t._UZ(18,"ion-icon",15),t.qZA()()()()}if(2&n){const o=s.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.nombre),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.rfc),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.telefono),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.email),t.xp6(2),t.Oqu(r.tipoPubico[o.participante.tipo]),t.xp6(2),t.Oqu(o.active?"Pagado":"")}}function R(n,s){if(1&n&&(t.TgZ(0,"table",8)(1,"thead",9)(2,"tr")(3,"th",10),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th",10),t._uU(6,"RFC"),t.qZA(),t.TgZ(7,"th",10),t._uU(8,"Tel\xe9fono"),t.qZA(),t.TgZ(9,"th",10),t._uU(10,"Correo"),t.qZA(),t.TgZ(11,"th",10),t._uU(12,"Role"),t.qZA(),t.TgZ(13,"th",10),t._uU(14,"Estatus"),t.qZA(),t.TgZ(15,"th",10),t._uU(16,"Opciones"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,J,19,6,"tr",11),t.qZA()()),2&n){const o=t.oxw();t.xp6(18),t.Q6J("ngForOf",o.boletosSelected)}}const h=[{path:"",component:(()=>{var n;class s{constructor(r,l,c,u,M,q,F,Y){this.modalC=r,this.boletoRepo=l,this.eventoRepo=c,this.nav=u,this.genericS=M,this.alert=q,this.toast=F,this.activeRoute=Y,this.boletos=[],this.tipoPubico=S.x,this.boletosSelected=[],this.divisor=10}ngOnInit(){this.activeRoute.queryParams.subscribe(r=>{this.idEvento=Number(r.id)}),this.boletoRepo.evento$.subscribe(r=>{this.boletos=r,this.boletosSelected=r.slice(0,this.divisor),0===this.boletos.length&&this.nav.navigateForward("dashboard/eventos")})}mon(r){return e().locale("es"),e(r).format("L")+" "+e(r).format("LT")}edit(r){var l=this;return(0,C.Z)(function*(){yield(yield l.modalC.create({component:b.x,componentProps:{boleto:r,evento:l.idEvento}})).present()})()}delete(r){var l=this;return(0,C.Z)(function*(){yield l.alert.setData({animated:!0,header:"Eliminar usuario",message:"\xbfDesea eliminarlo Permanentemente?",buttons:[{text:"cancelar"},{text:"Confirmar",handler:()=>{l.genericS.delete("boleto",r).subscribe(c=>{l.boletos=l.boletos.filter(u=>u.id!==r),l.toast.success("Usuario Eliminado Correctamente"),l.eventoRepo.updateEvento(l.idEvento,{boletos:l.boletos})})}}]})})()}getPagina(r){this.boletosSelected=this.boletos.slice(r*this.divisor,(r+1)*this.divisor)}}return(n=s).\u0275fac=function(r){return new(r||n)(t.Y36(p.IN),t.Y36(y.b9),t.Y36(m.hJ),t.Y36(p.SH),t.Y36(U.M),t.Y36(v.c),t.Y36(P._W),t.Y36(E.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ver-usuarios"]],decls:12,vars:7,consts:[[3,"fullscreen"],[1,"mt-5"],[1,"container"],[1,"d-flex","mt-5"],[1,"h2"],["placeholder","Buscar usuario","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"ngModel","debounce","ngModelChange"],["class","table mt-0",4,"ngIf"],[3,"total","divisor","pagina"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["slot","start"],["color","primary","fill","clear",3,"click"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"]],template:function(r,l){1&r&&(t.TgZ(0,"ion-content",0),t._UZ(1,"div",1)(2,"br"),t.TgZ(3,"div",2)(4,"div",3)(5,"h5",4)(6,"b"),t._uU(7,"Ver Usuarios"),t.qZA()(),t.TgZ(8,"ion-searchbar",5),t.NdJ("ngModelChange",function(){return l.boletosSelected=[]})("ngModelChange",function(u){return l.search=u}),t.qZA()(),t.YNc(9,I,20,4,"table",6),t.YNc(10,R,19,1,"table",6),t.TgZ(11,"paginador",7),t.NdJ("pagina",function(u){return l.getPagina(u)}),t.qZA()()()),2&r&&(t.Q6J("fullscreen",!0),t.xp6(8),t.Q6J("ngModel",l.search)("debounce",250),t.xp6(1),t.Q6J("ngIf",0===l.boletosSelected.length),t.xp6(1),t.Q6J("ngIf",l.boletosSelected.length>0),t.xp6(1),t.Q6J("total",l.boletos.length)("divisor",10))},dependencies:[f.sg,f.O5,x.JJ,x.On,p.YG,p.Sm,p.W2,p.gu,p.VI,p.j9,Z.a,A],styles:[".red[_ngcontent-%COMP%]{background-color:red;color:#fff}"]}),s})()},{path:"editar-usuario",loadChildren:()=>a.e(6967).then(a.bind(a,6967)).then(n=>n.EditarUsuarioPageModule)}];let d=(()=>{var n;class s{}return(n=s).\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[E.Bz.forChild(h),E.Bz]}),s})();var i=a(3386);let _=(()=>{var n;class s{}return(n=s).\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.ez,x.u5,p.Pc,d,i.d,Z.a]}),s})()},4028:(D,T,a)=>{a.d(T,{L:()=>f,x:()=>x});var f=function(p){return p[p.ESTUDIANTES=0]="ESTUDIANTES",p[p.AFILIADOS=1]="AFILIADOS",p[p.PUBLICO_GENERAL=2]="PUBLICO_GENERAL",p[p.PRENSA=3]="PRENSA",p}(f||{});const x=["Estudiante","Afiliado","P\xfablico General","Prensa"]},9026:(D,T,a)=>{a.d(T,{$:()=>b});var f=a(5592),x=a(4829);const{isArray:p}=Array;var C=a(6232),e=a(8251),S=a(4564);function b(...t){const y=(0,S.jO)(t),m=function E(t){return 1===t.length&&p(t[0])?t[0]:t}(t);return m.length?new f.y(U=>{let v=m.map(()=>[]),P=m.map(()=>!1);U.add(()=>{v=P=null});for(let Z=0;!U.closed&&Z<m.length;Z++)(0,x.Xf)(m[Z]).subscribe((0,e.x)(U,N=>{if(v[Z].push(N),v.every(A=>A.length)){const A=v.map(O=>O.shift());U.next(y?y(...A):A),v.some((O,I)=>!O.length&&P[I])&&U.complete()}},()=>{P[Z]=!0,!v[Z].length&&U.complete()}));return()=>{v=P=null}}):C.E}}}]);