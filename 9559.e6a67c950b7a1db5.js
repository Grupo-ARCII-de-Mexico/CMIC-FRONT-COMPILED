"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9559],{5404:(S,U,a)=>{a.d(U,{x:()=>N});var m=a(5861),b=a(9026),u=a(9397),T=a(4664),E=a(4028),e=a(6689),y=a(930),f=a(95),t=a(2264),x=a(4433),d=a(7027),Z=a(1284),h=a(7153),P=a(2425),_=a(6814);function O(i,c){if(1&i&&(e.TgZ(0,"ion-select-option",27),e._uU(1),e.qZA()),2&i){const n=c.$implicit;e.Q6J("value",c.index),e.xp6(1),e.Oqu(n)}}function A(i,c){if(1&i&&(e.TgZ(0,"ion-select-option",27),e._uU(1),e.qZA()),2&i){const n=c.$implicit;e.Q6J("value",null==n?null:n.id),e.xp6(1),e.Oqu(null==n?null:n.ciudad)}}function C(i,c){if(1&i&&(e.TgZ(0,"ion-select-option",27),e._uU(1),e.qZA()),2&i){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function M(i,c){if(1&i&&(e.TgZ(0,"ion-select-option",28),e._uU(1),e.qZA()),2&i){const n=e.oxw(2);e.Q6J("value",null==n.extranjero?null:n.extranjero.id),e.xp6(1),e.Oqu(null==n.extranjero?null:n.extranjero.nombre)}}function D(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.update())}),e.TgZ(1,"ion-item")(2,"ion-select",9),e.YNc(3,O,2,2,"ion-select-option",10),e.qZA()(),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",11),e.qZA(),e.TgZ(6,"ion-item")(7,"ion-input",12)(8,"div",13),e._uU(9,"Nombre Completo "),e.TgZ(10,"ion-text",14),e._uU(11,"*"),e.qZA()()()(),e.TgZ(12,"ion-item")(13,"ion-input",15)(14,"div",13),e._uU(15,"Tel\xe9fono "),e.TgZ(16,"ion-text",14),e._uU(17,"*"),e.qZA()()()(),e.TgZ(18,"ion-item")(19,"ion-input",16)(20,"div",13),e._uU(21,"Correo "),e.TgZ(22,"ion-text",14),e._uU(23,"*"),e.qZA()()()(),e.TgZ(24,"ion-item"),e._UZ(25,"ion-input",17),e.qZA(),e.TgZ(26,"ion-item")(27,"ion-input",18)(28,"div",13),e._uU(29,"Cargo en la empresa "),e._UZ(30,"ion-text",14),e.qZA()()(),e.TgZ(31,"ion-item")(32,"ion-select",19),e.YNc(33,A,2,2,"ion-select-option",10),e.qZA()(),e.TgZ(34,"ion-item"),e._UZ(35,"ion-input",20),e.qZA(),e.TgZ(36,"ion-item")(37,"ion-select",21)(38,"div",13),e._uU(39,"Estado de Origen "),e.qZA(),e.YNc(40,C,2,2,"ion-select-option",10),e.YNc(41,M,2,2,"ion-select-option",22),e.qZA()(),e.TgZ(42,"ion-item"),e._UZ(43,"ion-input",23),e.qZA(),e.TgZ(44,"ion-item"),e._UZ(45,"ion-input",24),e.qZA(),e.TgZ(46,"ion-item")(47,"ion-text"),e._uU(48,"Suba su credencial estudiantil o documento que lo avale "),e._UZ(49,"br"),e.qZA(),e.TgZ(50,"ion-button",25),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.upload())}),e._uU(51," Subir Credencial "),e.qZA()(),e.TgZ(52,"ion-button",26),e._uU(53," Actualizar "),e.qZA()()}if(2&i){const n=e.oxw();e.Q6J("formGroup",n.participanteForm),e.xp6(3),e.Q6J("ngForOf",n.tipoPublicoArray),e.xp6(29),e.Q6J("cancelText","Cerrar"),e.xp6(1),e.Q6J("ngForOf",n.delegaciones),e.xp6(4),e.Q6J("cancelText","Cerrar"),e.xp6(3),e.Q6J("ngForOf",n.estados),e.xp6(1),e.Q6J("ngIf",n.extranjero)}}let N=(()=>{var i;class c{constructor(o,r,l,s,p,g,v,I,J){this.genericS=o,this.fb=r,this.compressService=l,this.alert=s,this.modalC=p,this.boletos=g,this.nav=v,this.load=I,this.toast=J,this.delegaciones=[],this.estados=[],this.tipoPublico=E.L,this.tipoPublicoArray=E.x,this.stripeCosto=0}ngOnInit(){this.stripe(),(0,b.$)(this.genericS.getAll("delegacion"),this.genericS.getAll("estados")).pipe((0,u.b)(o=>{var r,l,s;this.delegaciones=o[0].sort(function(g,v){return g.ciudad.localeCompare(v.ciudad)}),this.extranjero=o[1].find(g=>33==g.id),this.estados=o[1].filter(g=>33!==g.id).sort(function(g,v){return g.nombre.localeCompare(v.nombre)}),this.participante=this.boleto.participante,console.log(this.boleto);const p=null!==(r=null===(l=o[0].find(g=>{var v;return g.ciudad===(null===(v=this.participante)||void 0===v?void 0:v.delegacion)}))||void 0===l?void 0:l.id)&&void 0!==r?r:null;this.participanteForm=this.fb.group({nombre:this.participante.nombre,numAfiliado:this.participante.numAfiliado,telefono:this.participante.telefono,email:this.participante.email,cargo:this.participante.cargo,empresa:this.participante.empresa,curp:this.participante.curp,rfc:this.participante.rfc,organizacion:this.participante.organizacion,estado:this.participante.estado.id,delegacion:p,tipo:null!==(s=Number(this.participante.tipo))&&void 0!==s?s:0})})).subscribe()}upload(){var o=this;return(0,m.Z)(function*(){o.evidencia=yield o.compressService.returnImageCompress()})()}update(){var o=this;return(0,m.Z)(function*(){if(o.load.setData({message:"Actualizando Usuario",animated:!0,spinner:"dots"}),yield o.load.create(),yield o.load.show(),o.participanteForm.controls.delegacion.value){var r,l;const s=null!==(r=o.delegaciones.find(p=>p.id===o.participanteForm.controls.delegacion.value))&&void 0!==r?r:null;o.participanteForm.controls.delegacion.setValue(null!==(l=null==s?void 0:s.ciudad)&&void 0!==l?l:null)}o.genericS.update("participante",o.participante.id,{...o.participanteForm.value}).subscribe(function(){var s=(0,m.Z)(function*(p){yield o.modalC.dismiss(),yield o.load.hide(),o.toast.success("Usuario Actualizado"),o.boletos.updateEvento(o.boleto.id,{participante:p})});return function(p){return s.apply(this,arguments)}}())})()}updateBoleto(){this.genericS.update("boleto",this.boleto.id,this.boleto).subscribe(o=>{this.boletos.updateEvento(o.id,o)})}stripe(){this.boleto.idPago&&this.genericS.post("payments",{idPago:this.boleto.idPago}).subscribe(o=>{this.stripeCosto=o.amount})}pagar(){var o=this;return(0,m.Z)(function*(){var r;o.alert.setData({animated:!0,header:"Confirmar Pago",message:"Si confirma el pago se procedera con el proceso de entrega del QR",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(r=(0,m.Z)(function*(){o.genericS.update("boleto",o.boleto.id,{active:!0}).pipe((0,T.w)(l=>(o.boletos.updateEvento(l.id,l),o.genericS.post("boleto/confirm/"+l.id,{}))),(0,u.b)(l=>{o.toast.success("boleto activado"),o.modalC.dismiss()})).subscribe()}),function(){return r.apply(this,arguments)})}]}),yield o.alert.create(),yield o.alert.show()})()}}return(i=c).\u0275fac=function(o){return new(o||i)(e.Y36(y.M),e.Y36(f.qu),e.Y36(t.Y),e.Y36(x.c),e.Y36(d.IN),e.Y36(Z.b9),e.Y36(d.SH),e.Y36(h.b),e.Y36(P._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editar-usuario"]],inputs:{boleto:"boleto"},decls:14,vars:8,consts:[[3,"translucent"],["color","primary"],["slot","end","color","tertiary","expand","block",1,"me-2",3,"click"],[3,"fullscreen"],["label","privilegios","type","text","placeholder","",3,"ngModel","ngModelChange"],["label","costo boleto","type","text","placeholder","",3,"ngModel","ngModelChange"],["expand","block","fill","clear","shape","round",3,"click"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["label","Tipo de Participante","formControlName","tipo","placeholder","Seleccione"],[3,"value",4,"ngFor","ngForOf"],["labelPlacement","floating","label","No.Afiliado","formControlName","numAfiliado","type","text"],["labelPlacement","floating","formControlName","nombre","type","text"],["slot","label"],["color","danger"],["labelPlacement","floating","formControlName","telefono","type","text"],["labelPlacement","floating","formControlName","email","type","email"],["label","Ingrese el nombre de su empresa","labelPlacement","floating","formControlName","empresa","type","text"],["labelPlacement","floating","formControlName","cargo","type","text"],["label","Delegaci\xf3n CMIC","formControlName","delegacion","okText","Seleccionar","placeholder","Seleccione",3,"cancelText"],["label","Ingrese el nombre de su organizaci\xf3n","labelPlacement","floating","formControlName","organizacion","type","text"],["formControlName","estado","okText","Seleccionar","placeholder","Seleccione",3,"cancelText"],["class","border-top",3,"value",4,"ngIf"],["label","RFC","labelPlacement","floating","formControlName","rfc","type","text"],["label","CURP","labelPlacement","floating","formControlName","curp","type","text"],["expand","block","shape","round",3,"click"],["expand","block","slot","end","shape","round","type","submit",1,"mt-3"],[3,"value"],[1,"border-top",3,"value"]],template:function(o,r){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),e._uU(3,"Editar Participante"),e.qZA(),e.TgZ(4,"ion-button",2),e.NdJ("click",function(){return r.pagar()}),e._uU(5," Confirmar Pago "),e.qZA()()(),e.TgZ(6,"ion-content",3),e._uU(7),e.ALo(8,"currency"),e.TgZ(9,"ion-input",4),e.NdJ("ngModelChange",function(s){return r.boleto.privilegio=s}),e.qZA(),e.TgZ(10,"ion-input",5),e.NdJ("ngModelChange",function(s){return r.boleto.costo=s}),e.qZA(),e.TgZ(11,"ion-button",6),e.NdJ("click",function(){return r.updateBoleto()}),e._uU(12," Guardar "),e.qZA(),e.YNc(13,D,54,7,"form",7),e.qZA()),2&o&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(1),e.hij(" ",e.lcZ(8,6,r.stripeCosto)," "),e.xp6(2),e.Q6J("ngModel",r.boleto.privilegio),e.xp6(1),e.Q6J("ngModel",r.boleto.costo),e.xp6(3),e.Q6J("ngIf",r.participanteForm))},dependencies:[_.sg,_.O5,f._Y,f.JJ,f.JL,f.On,f.sg,f.u,d.YG,d.W2,d.Gu,d.pK,d.Ie,d.t9,d.n0,d.yW,d.wd,d.sr,d.QI,d.j9,_.H9]}),c})()},9559:(S,U,a)=>{a.r(U),a.d(U,{VerUsuariosPageModule:()=>N});var m=a(6814),b=a(95),u=a(7027),T=a(9085),E=a(5861),e=a(6676),y=a(4028),f=a(5404),t=a(6689),x=a(1284),d=a(8013),Z=a(930),h=a(4433),P=a(2425);let O=(()=>{var i;class c{transform(o,r){const l=[];if(!r)return o;if(o)for(const p of o){var s;(null==p||null===(s=p.participante)||void 0===s?void 0:s.nombre.toLowerCase().indexOf(r.toLowerCase()))>-1&&l.push(p)}return function _(i){const c=new Set;return i.filter(o=>{const r=JSON.stringify(o);return!c.has(r)&&(c.add(r),!0)})}(l)}}return(i=c).\u0275fac=function(o){return new(o||i)},i.\u0275pipe=t.Yjl({name:"userSearch",type:i,pure:!0}),c})();function A(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"ion-buttons",10)(15,"ion-button",11),t.NdJ("click",function(){const l=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.edit(l))}),t._UZ(16,"ion-icon",12),t.qZA(),t.TgZ(17,"ion-button",11),t.NdJ("click",function(){const l=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.delete(l.id))}),t._UZ(18,"ion-icon",13),t.qZA()()()()}if(2&i){const n=c.$implicit,o=t.oxw();t.xp6(2),t.Oqu(null==n||null==n.participante?null:n.participante.nombre),t.xp6(2),t.Oqu(null==n||null==n.participante?null:n.participante.rfc),t.xp6(2),t.Oqu(null==n||null==n.participante?null:n.participante.telefono),t.xp6(2),t.Oqu(null==n||null==n.participante?null:n.participante.email),t.xp6(2),t.Oqu(o.tipoPubico[null==n||null==n.participante?null:n.participante.tipo]),t.xp6(2),t.Oqu(n.active?"Pagado":"")}}const M=[{path:"",component:(()=>{var i;class c{constructor(o,r,l,s,p,g,v,I){this.modalC=o,this.boletoRepo=r,this.eventoRepo=l,this.nav=s,this.genericS=p,this.alert=g,this.toast=v,this.activeRoute=I,this.boletos=[],this.tipoPubico=y.x}ngOnInit(){this.activeRoute.queryParams.subscribe(o=>{this.idEvento=Number(o.id)}),this.boletoRepo.evento$.subscribe(o=>{this.boletos=o,0===this.boletos.length&&this.nav.navigateForward("dashboard/eventos")})}mon(o){return e().locale("es"),e(o).format("L")+" "+e(o).format("LT")}edit(o){var r=this;return(0,E.Z)(function*(){yield(yield r.modalC.create({component:f.x,componentProps:{boleto:o,evento:r.idEvento}})).present()})()}delete(o){var r=this;return(0,E.Z)(function*(){yield r.alert.setData({animated:!0,header:"Eliminar usuario",message:"\xbfDesea eliminarlo Permanentemente?",buttons:[{text:"cancelar"},{text:"Confirmar",handler:()=>{r.genericS.delete("boleto",o).subscribe(l=>{r.boletos=r.boletos.filter(s=>s.id!==o),r.toast.success("Usuario Eliminado Correctamente"),r.eventoRepo.updateEvento(r.idEvento,{boletos:r.boletos})})}}]}),yield r.alert.create(),yield r.alert.show()})()}}return(i=c).\u0275fac=function(o){return new(o||i)(t.Y36(u.IN),t.Y36(x.b9),t.Y36(d.hJ),t.Y36(u.SH),t.Y36(Z.M),t.Y36(h.c),t.Y36(P._W),t.Y36(T.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ver-usuarios"]],decls:29,vars:7,consts:[[3,"fullscreen"],[1,"mt-5"],[1,"container"],[1,"d-flex","mt-5"],[1,"h2"],["placeholder","Buscar usuario","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"ngModel","debounce","ngModelChange"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["slot","start"],["color","primary","fill","clear",3,"click"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"]],template:function(o,r){1&o&&(t.TgZ(0,"ion-content",0),t._UZ(1,"div",1)(2,"br"),t.TgZ(3,"div",2)(4,"div",3)(5,"h5",4)(6,"b"),t._uU(7,"Ver Usuarios"),t.qZA()(),t.TgZ(8,"ion-searchbar",5),t.NdJ("ngModelChange",function(s){return r.search=s}),t.qZA()(),t.TgZ(9,"table",6)(10,"thead",7)(11,"tr")(12,"th",8),t._uU(13,"Nombre"),t.qZA(),t.TgZ(14,"th",8),t._uU(15,"RFC"),t.qZA(),t.TgZ(16,"th",8),t._uU(17,"Tel\xe9fono"),t.qZA(),t.TgZ(18,"th",8),t._uU(19,"Correo"),t.qZA(),t.TgZ(20,"th",8),t._uU(21,"Role"),t.qZA(),t.TgZ(22,"th",8),t._uU(23,"Estatus"),t.qZA(),t.TgZ(24,"th",8),t._uU(25,"Opciones"),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,A,19,6,"tr",9),t.ALo(28,"userSearch"),t.qZA()()()()),2&o&&(t.Q6J("fullscreen",!0),t.xp6(8),t.Q6J("ngModel",r.search)("debounce",250),t.xp6(19),t.Q6J("ngForOf",t.xi3(28,4,r.boletos,r.search)))},dependencies:[m.sg,b.JJ,b.On,u.YG,u.Sm,u.W2,u.gu,u.VI,u.j9,O],styles:[".red[_ngcontent-%COMP%]{background-color:red;color:#fff}"]}),c})()},{path:"editar-usuario",loadChildren:()=>a.e(6967).then(a.bind(a,6967)).then(i=>i.EditarUsuarioPageModule)}];let D=(()=>{var i;class c{}return(i=c).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.Bz.forChild(M),T.Bz]}),c})(),N=(()=>{var i;class c{}return(i=c).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,b.u5,u.Pc,D]}),c})()},4028:(S,U,a)=>{a.d(U,{L:()=>m,x:()=>b});var m=function(u){return u[u.ESTUDIANTES=0]="ESTUDIANTES",u[u.AFILIADOS=1]="AFILIADOS",u[u.PUBLICO_GENERAL=2]="PUBLICO_GENERAL",u[u.PRENSA=3]="PRENSA",u}(m||{});const b=["Estudiante","Afiliado","P\xfablico General","Prensa"]},9026:(S,U,a)=>{a.d(U,{$:()=>f});var m=a(5592),b=a(4829);const{isArray:u}=Array;var E=a(6232),e=a(8251),y=a(4564);function f(...t){const x=(0,y.jO)(t),d=function T(t){return 1===t.length&&u(t[0])?t[0]:t}(t);return d.length?new m.y(Z=>{let h=d.map(()=>[]),P=d.map(()=>!1);Z.add(()=>{h=P=null});for(let _=0;!Z.closed&&_<d.length;_++)(0,b.Xf)(d[_]).subscribe((0,e.x)(Z,O=>{if(h[_].push(O),h.every(A=>A.length)){const A=h.map(C=>C.shift());Z.next(x?x(...A):A),h.some((C,M)=>!C.length&&P[M])&&Z.complete()}},()=>{P[_]=!0,!h[_].length&&Z.complete()}));return()=>{h=P=null}}):E.E}}}]);