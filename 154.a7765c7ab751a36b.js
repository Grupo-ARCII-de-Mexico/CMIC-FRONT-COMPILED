"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[154],{154:(F,_,d)=>{d.r(_),d.d(_,{CrearOportunidadPageModule:()=>x});var p=d(6814),u=d(95),c=d(7027),h=d(9085),g=d(5861),s=d(8915),Z=d(4664),C=d(9397),e=d(6689),v=d(7153),O=d(2425),T=d(2264),b=d(930);function P(i,l){if(1&i&&e._UZ(0,"ion-img",19),2&i){const r=e.oxw();e.Q6J("src",r.logotipo)}}function M(i,l){if(1&i){const r=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-button",20),e.NdJ("click",function(){const a=e.CHM(r).$implicit,t=e.oxw();return e.KtG(t.eliminarDocumentos(a))}),e._UZ(4,"ion-icon",21),e.qZA()()}if(2&i){const r=l.$implicit;e.xp6(2),e.Oqu(r)}}function A(i,l){if(1&i){const r=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-button",20),e.NdJ("click",function(){const a=e.CHM(r).$implicit,t=e.oxw();return e.KtG(t.eliminar(a))}),e._UZ(4,"ion-icon",21),e.qZA()()}if(2&i){const r=l.$implicit;e.xp6(2),e.Oqu(r)}}const J=[{path:"",component:(()=>{var i;class l{constructor(o,n,a,t){this.loading=o,this.toast=n,this.compressImage=a,this.genericService=t,this.empresa="",this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic"],["underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["horizontal_rule","format_clear"],["text_color","background_color"]],this.documentos=[],this.especialidades=[],this.especialidad="",this.document="",this.convocatoria=""}ngOnInit(){this.editor=new s.ML}uploadImage(){var o=this;return(0,g.Z)(function*(){o.logotipo=yield o.compressImage.returnImageCompress()})()}agregarEspecialidad(){this.especialidades.push(this.especialidad),this.especialidad=""}eliminar(o){this.especialidades.splice(o,1)}agregarDocumentos(){this.documentos.push(this.document),this.document=""}eliminarDocumentos(o){this.documentos.splice(o,1)}save(){var o=this;return(0,g.Z)(function*(){o.loading.setData({animated:!0,message:"Subiendo...",spinner:"dots"}),yield o.loading.create(),yield o.loading.show();const n=new FormData;n.append("logotipo",o.compressImage.dataURItoBlob(o.logotipo)),o.genericService.postWhitImage("negocio",n).pipe((0,Z.w)(function(){var a=(0,g.Z)(function*(t){let m;if(m="string"!=typeof o.convocatoria?(0,s.io)(o.convocatoria):o.convocatoria,o.documentoOpcional){const f=new FormData;f.append("documento",o.documentoOpcional),yield o.genericService.updateWhitImage("negocio",t.id,f).toPromise()}return o.genericService.update("negocio",t.id,{especialidades:o.especialidades,documentos:o.documentos,empresa:o.empresa,convocatoria:m}).toPromise()});return function(t){return a.apply(this,arguments)}}()),(0,C.b)(function(){var a=(0,g.Z)(function*(t){console.log(t),o.empresa="",o.logotipo=null,o.especialidad="",o.especialidades=[],o.documentos=[],o.document="",o.convocatoria="",o.documentoOpcional=null,yield o.loading.hide(),o.toast.success("Nueva Oportunidad de Negocio","Creada")});return function(t){return a.apply(this,arguments)}}())).subscribe()})()}onFileSelected(o){this.documentoOpcional=o.target.files[0],o.target.value=""}click(){document.getElementById("opcional").click()}}return(i=l).\u0275fac=function(o){return new(o||i)(e.Y36(v.b),e.Y36(O._W),e.Y36(T.Y),e.Y36(b.M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-crear-oportunidad"]],decls:50,vars:19,consts:[[3,"fullscreen"],[1,"mt-5","px-3"],[1,"container"],[1,"my-3"],["button","",3,"click"],["style","max-width: 200px; max-height: 330px;",3,"src",4,"ngIf"],["type","text","labelPlacement","floating","label","Nombre de la empresa",3,"ngModel","ngModelChange"],["type","text","labelPlacement","floating","label","Ingrese Nombre del Documento",3,"ngModel","ngModelChange"],["slot","end",3,"disabled","click"],["slot","icon-only","name","add"],[4,"ngFor","ngForOf","ngForAs"],["type","text","labelPlacement","floating","label","Ingrese Especialidad",3,"ngModel","ngModelChange"],[1,"NgxEditor__Wrapper"],[3,"toolbar","editor"],[3,"editor","ngModel","placeholder","ngModelChange"],["color","danger"],["expand","block","fill","clear","slot","end",3,"color","click"],["id","opcional","type","file","accept",".pdf",2,"display","none",3,"change"],["expand","block","shape","round",1,"my-3",3,"disabled","click"],[2,"max-width","200px","max-height","330px",3,"src"],["slot","end",3,"click"],["slot","icon-only","name","close"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br")(2,"br"),e.TgZ(3,"div",1)(4,"div",2)(5,"h1",3)(6,"b"),e._uU(7,"Crear Oportunidad de Negocio"),e.qZA()(),e.TgZ(8,"ion-item",4),e.NdJ("click",function(){return n.uploadImage()}),e.TgZ(9,"ion-label"),e._uU(10,"Subir Imagen"),e.qZA(),e.YNc(11,P,1,1,"ion-img",5),e.qZA(),e.TgZ(12,"ion-item")(13,"ion-input",6),e.NdJ("ngModelChange",function(t){return n.empresa=t}),e.qZA()(),e.TgZ(14,"h3",3)(15,"b"),e._uU(16,"Agregar Documentos"),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-input",7),e.NdJ("ngModelChange",function(t){return n.document=t}),e.qZA(),e.TgZ(19,"ion-button",8),e.NdJ("click",function(){return n.agregarDocumentos()}),e._UZ(20,"ion-icon",9),e.qZA()(),e.YNc(21,M,5,1,"ion-item",10),e.TgZ(22,"h3",3)(23,"b"),e._uU(24,"Agregar Especialidades"),e.qZA()(),e.TgZ(25,"ion-item")(26,"ion-input",11),e.NdJ("ngModelChange",function(t){return n.especialidad=t}),e.qZA(),e.TgZ(27,"ion-button",8),e.NdJ("click",function(){return n.agregarEspecialidad()}),e._UZ(28,"ion-icon",9),e.qZA()(),e.YNc(29,A,5,1,"ion-item",10),e.qZA()(),e.TgZ(30,"div",2)(31,"h3",3)(32,"b"),e._uU(33,"Informaci\xf3n Adicional "),e.qZA()(),e.TgZ(34,"div",12),e._UZ(35,"ngx-editor-menu",13),e.TgZ(36,"ngx-editor",14),e.NdJ("ngModelChange",function(t){return n.convocatoria=t}),e.qZA()(),e.TgZ(37,"ion-item")(38,"ion-label"),e._uU(39," PDF con informaci\xf3n adicional"),e.TgZ(40,"ion-text",15),e._uU(41," * "),e.qZA(),e.TgZ(42,"p"),e._uU(43,"(formato PDF)"),e.qZA()(),e.TgZ(44,"ion-button",16),e.NdJ("click",function(){return n.click()}),e.TgZ(45,"ion-label"),e._uU(46),e.qZA(),e.TgZ(47,"input",17),e.NdJ("change",function(t){return n.onFileSelected(t)}),e.qZA()()(),e.TgZ(48,"ion-button",18),e.NdJ("click",function(){return n.save()}),e._uU(49," Crear "),e.qZA()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(11),e.Q6J("ngIf",n.logotipo),e.xp6(2),e.Q6J("ngModel",n.empresa),e.xp6(5),e.Q6J("ngModel",n.document),e.xp6(1),e.Q6J("disabled",!n.document||""===n.document),e.xp6(2),e.Q6J("ngForOf",n.documentos)("ngForAs",n.index),e.xp6(5),e.Q6J("ngModel",n.especialidad),e.xp6(1),e.Q6J("disabled",!n.especialidad||""===n.especialidad),e.xp6(2),e.Q6J("ngForOf",n.especialidades)("ngForAs",n.index),e.xp6(6),e.Q6J("toolbar",n.toolbar)("editor",n.editor),e.xp6(1),e.Q6J("editor",n.editor)("ngModel",n.convocatoria)("placeholder","Descripci\xf3n del evento"),e.xp6(8),e.Q6J("color",n.documentoOpcional?"success":"primary"),e.xp6(2),e.Oqu(n.documentoOpcional?"Archivo Cargado":"Seleccionar archivo"),e.xp6(2),e.Q6J("disabled",!n.logotipo||""===n.empresa))},dependencies:[p.sg,p.O5,u.JJ,u.On,c.YG,c.W2,c.gu,c.Xz,c.pK,c.Ie,c.Q$,c.yW,c.j9,s.tP,s.Mn]}),l})()}];let y=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(J),h.Bz]}),l})(),x=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,u.u5,u.UX,c.Pc,s.FP,y]}),l})()}}]);