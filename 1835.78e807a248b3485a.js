"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1835],{1835:(Z,v,l)=>{l.r(v),l.d(v,{CrearEventoPageModule:()=>M});var m=l(6814),s=l(95),r=l(7027),h=l(9085),g=l(5861),p=l(8915),f=l(8013),x=l(4028),C=l(7038),E=l(3597),e=l(6689),T=l(2264),b=l(2425),A=l(930),y=l(4433),P=l(7153);function U(n,c){if(1&n&&e._UZ(0,"ion-img",31),2&n){const i=e.oxw();e.Q6J("src",i.img)}}function F(n,c){1&n&&(e.TgZ(0,"ion-item")(1,"ion-input",32)(2,"div",10),e._uU(3,"Cupo "),e.TgZ(4,"ion-text",6),e._uU(5,"*"),e.qZA()()()())}function N(n,c){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-select",33)(2,"ion-select-option",8),e._uU(3,"Transferencia"),e.qZA(),e.TgZ(4,"ion-select-option",8),e._uU(5,"Tarjetas (Stripe) "),e.qZA()()()),2&n){const i=e.oxw();e.xp6(2),e.Q6J("value",i.tipoPago.TRANSFERENCIA),e.xp6(2),e.Q6J("value",i.tipoPago.STRIPE)}}function I(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div",36)(1,"ion-select",37),e.NdJ("ionChange",function(t){const d=e.CHM(i).index,u=e.oxw(2);return e.KtG(u.setTipo(t,d,"publico"))}),e.TgZ(2,"ion-select-option",8),e._uU(3,"Afiliado"),e.qZA(),e.TgZ(4,"ion-select-option",8),e._uU(5,"P\xfablico General"),e.qZA(),e.TgZ(6,"ion-select-option",8),e._uU(7,"Estudiante"),e.qZA()(),e.TgZ(8,"ion-input",38),e.NdJ("ionChange",function(t){const d=e.CHM(i).index,u=e.oxw(2);return e.KtG(u.setTipo(t,d,"nombre"))}),e.qZA(),e.TgZ(9,"ion-input",39),e.NdJ("ionChange",function(t){const d=e.CHM(i).index,u=e.oxw(2);return e.KtG(u.setTipo(t,d,"costo"))}),e.qZA(),e.TgZ(10,"ion-button",40),e.NdJ("click",function(){const a=e.CHM(i).index,d=e.oxw(2);return e.KtG(d.quitar(a))}),e._UZ(11,"ion-icon",41),e.qZA()()}if(2&n){const i=e.oxw(2);e.xp6(2),e.Q6J("value",i.tipoPublico.AFILIADOS),e.xp6(2),e.Q6J("value",i.tipoPublico.PUBLICO_GENERAL),e.xp6(2),e.Q6J("value",i.tipoPublico.ESTUDIANTES)}}function J(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div",3)(1,"ion-item")(2,"ion-label"),e._uU(3,"Costos"),e.qZA(),e.TgZ(4,"ion-button",34),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.agregar())}),e._uU(5," Agregar Costos "),e.qZA()(),e.YNc(6,I,12,3,"div",35),e.qZA()}if(2&n){const i=e.oxw();e.xp6(6),e.Q6J("ngForOf",i.costos)}}function S(n,c){1&n&&(e.TgZ(0,"ion-item")(1,"ion-input",42)(2,"div",10),e._uU(3,"Escriba la direcci\xf3n: "),e.TgZ(4,"ion-text",6),e._uU(5,"*"),e.qZA()()()())}function q(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2,"Agregar Mapa "),e.TgZ(3,"ion-text",6),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"ion-button",43),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.verMapa())}),e._uU(6," Abrir Mapa "),e.qZA()()}}function G(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div",44)(1,"div",45)(2,"ion-label",46),e._uU(3,"Generar Liga Zoom Autom\xe1ticamente "),e.TgZ(4,"ion-text",6),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"ion-button",47),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.generateZoom())}),e._uU(7," Generar Liga de Zoom "),e.qZA()(),e.TgZ(8,"div",45)(9,"ion-label",46),e._uU(10,"Agregar Liga Zoom "),e.TgZ(11,"ion-text",6),e._uU(12,"*"),e.qZA()(),e.TgZ(13,"div",44),e._UZ(14,"ion-input",48)(15,"ion-input",49),e.qZA()()()}if(2&n){const i=e.oxw();e.xp6(6),e.Q6J("disabled",!i.eventForm.controls.titulo.value),e.xp6(8),e.Q6J("readonly",i.disabled),e.xp6(1),e.Q6J("readonly",i.disabled)}}const L=[{path:"",component:(()=>{var n;class c{constructor(o,t,a,d,u,_,R,w){this.fb=o,this.compressService=t,this.toast=a,this.modalc=d,this.genericService=u,this.alert=_,this.load=R,this.eventoRepo=w,this.tipoPago=C.R,this.tipoPublico=x.L,this.img=null,this.disabled=!1,this.costos=[],this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic"],["underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["horizontal_rule","format_clear"],["text_color","background_color"]]}ngOnInit(){this.editor=new p.ML,this.eventForm=this.fb.group({fechaInicio:[null,s.kI.required],fechaFin:[null,s.kI.required],titulo:[null,s.kI.required],detalles:[null,s.kI.required],pasarelasPago:[[]],lugar:[null],esGratis:[!1],tieneCupoMaximo:[!1],cupo:[0],zoom:[],zoomPassword:[null],mapLat:[0],mapLong:[0],tipoEvento:[f.$J.PRESENCIAL]})}upload(){var o=this;return(0,g.Z)(function*(){o.img=yield o.compressService.returnImageCompress()})()}ngOnDestroy(){this.editor.destroy()}verMapa(){var o=this;return(0,g.Z)(function*(){const t=yield o.modalc.create({component:E.s});t.onDidDismiss().then(({data:a})=>{a&&(o.eventForm.controls.mapLat.setValue(a.latitude),o.eventForm.controls.mapLong.setValue(a.longitude),o.toast.success("Ubicaci\xf3n Guardada"))}),t.present()})()}generateZoom(){var o=this;return(0,g.Z)(function*(){var t;o.load.setData({animated:!0,spinner:"dots",translucent:!0,message:"Generando Liga de Zoom..."}),yield o.load.create(),o.alert.setData({header:"Esta a punto de generar una liga de zoom",message:"Elija una opci\xf3n",buttons:[{text:"Crear sin contrase\xf1a",handler:(t=(0,g.Z)(function*(){yield o.load.show();const a=o.genericService.post("evento/zoom",{password:0,date:o.eventForm.controls.fechaInicio.value,title:o.eventForm.controls.titulo.value}).toPromise();o.eventForm.controls.zoom.setValue(a.join_url),o.toast.success("Liga Generada Exitosamente"),yield o.load.hide()}),function(){return t.apply(this,arguments)})},{text:"Crear con contrase\xf1a",handler:function(){var t=(0,g.Z)(function*(){yield o.load.show();const a=yield o.genericService.post("evento/zoom",{password:1,date:o.eventForm.controls.fechaInicio.value,title:o.eventForm.controls.titulo.value}).toPromise();console.log(a),o.eventForm.controls.zoom.setValue(a.join_url),o.eventForm.controls.zoomPassword.setValue(a.password),o.disabled=!0,o.toast.success("Liga Generada Exitosamente"),yield o.load.hide()});return function(){return t.apply(this,arguments)}}()},{text:"Cancelar"}]}),yield o.alert.create(),yield o.alert.show()})()}agregar(){this.costos.push({costo:null,nombre:null,publico:null})}quitar(o){this.costos.splice(o,1)}setTipo(o,t,a){this.costos[t][a]=o.detail.value}save(){var o=this;return(0,g.Z)(function*(){let t;yield o.load.setData({animated:!0,spinner:"dots",translucent:!0,message:"Creando Evento..."}),yield o.load.create(),yield o.load.show(),t="string"!=typeof o.eventForm.controls.detalles.value?(0,p.io)(o.eventForm.controls.detalles.value):o.eventForm.controls.detalles.value,o.eventForm.controls.detalles.setValue(t);const a=new FormData;for(const u in o.eventForm.value)o.eventForm.value.hasOwnProperty(u)&&"costos"!==u&&a.append(u,o.eventForm.value[u]);o.img&&a.append("imagen",o.compressService.dataURItoBlob(o.img)),a.append("costos",JSON.stringify(o.costos));const d=o.eventForm.controls.titulo.value.replace(/ /g,"-");a.append("identificador",d.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),o.genericService.postWhitImage("evento",a).subscribe(function(){var u=(0,g.Z)(function*(_){o.img=null,o.disabled=!0,o.eventForm.reset({pasarelasPago:[[]],esGratis:[!1],tieneCupoMaximo:[!1],cupo:[0],mapLat:[0],mapLong:[0],tipoEvento:[f.$J.PRESENCIAL]}),o.costos=[],o.eventoRepo.addEvento(_),yield o.load.hide(),o.toast.success("Evento Guardado")});return function(_){return u.apply(this,arguments)}}())})()}}return(n=c).\u0275fac=function(o){return new(o||n)(e.Y36(s.qu),e.Y36(T.Y),e.Y36(b._W),e.Y36(r.IN),e.Y36(A.M),e.Y36(y.c),e.Y36(P.b),e.Y36(f.hJ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-crear-evento"]],decls:80,vars:17,consts:[[3,"fullscreen"],[1,"mt-5","px-4"],[1,"container"],[1,"my-3"],[3,"formGroup","ngSubmit"],[1,"text-center"],["color","danger"],["formControlName","tipoEvento"],[3,"value"],["labelPlacement","floating","required","","type","text","formControlName","titulo"],["slot","label"],[1,"row","my-3"],[1,"col-md-4","mx-auto"],[1,"text-center","h4"],["hourCycle","h12","minuteValues","0,15,30,45","formControlName","fechaInicio","slot","end"],["slot","time-label"],["hourCycle","h12","presentation","time","minuteValues","0,15,30,45","slot","end","formControlName","fechaFin"],["button","",3,"click"],["slot","end","style","width: 300px;","class","my-3",3,"src",4,"ngIf"],["formControlName","esGratis","slot","end"],["formControlName","tieneCupoMaximo","slot","end"],[4,"ngIf"],["class","my-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"my-4"],[1,"NgxEditor__Wrapper"],[3,"toolbar","editor"],["formControlName","detalles",3,"editor","placeholder"],[1,"d-flex","mt-4"],["shape","round","color","primary","type","submit",1,"mt-2",3,"disabled"],["shape","round","color","primary",1,"mt-2","d-none"],["slot","end",1,"my-3",2,"width","300px",3,"src"],["required","","labelPlacement","floating","type","number","formControlName","cupo"],["label","Formas de Pago","labelPlacement","floating","interface","popover","formControlName","pasarelasPago","multiple","true","placeholder","Selecciona"],["expand","block","fill","clear","shape","round",3,"click"],["class","ms-3 border-bottom",4,"ngFor","ngForOf"],[1,"ms-3","border-bottom"],["slot","start","value","peperoni","okText","Aceptar","cancelText","Cerrar","placeholder","Dirigido a...",1,"col-md-4","my-3",3,"ionChange"],["type","text","label","Ingrese Nombre","labelPlacement","floating","placeholder","Cena",1,"border","col-md-4","my-3",3,"ionChange"],["label","Ingrese Precio","labelPlacement","floating","placeholder","800","slot","end","type","number",1,"border","col-md-4","my-3",3,"ionChange"],["slot","end",3,"click"],["slot","icon-only","name","trash-outline"],["required","","type","text","formControlName","lugar"],["expand","block","shape","round",3,"click"],[1,"row"],[1,"col-md-6"],[1,"ion-margin-vertical"],["slot","start","expand","block","shape","round",1,"my-2",3,"disabled","click"],["type","text","formControlName","zoom","placeholder","URL de Zoom",1,"border","col-md-6","my-2",3,"readonly"],["type","text","formControlName","zoomPassword","maxlength","8","placeholder","Contrase\xf1a",1,"border","col-md-6","my-2",3,"readonly"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br")(2,"br"),e.TgZ(3,"div",1)(4,"div",2)(5,"h1",3)(6,"b"),e._uU(7,"Eventos"),e.qZA()(),e.TgZ(8,"div",2)(9,"form",4),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(10,"div",5)(11,"h4"),e._uU(12,"Tipo Evento "),e.TgZ(13,"ion-text",6),e._uU(14,"*"),e.qZA()()(),e.TgZ(15,"ion-segment",7)(16,"ion-segment-button",8)(17,"ion-label"),e._uU(18,"Presencial"),e.qZA()(),e.TgZ(19,"ion-segment-button",8)(20,"ion-label"),e._uU(21,"Hibrido"),e.qZA()(),e.TgZ(22,"ion-segment-button",8)(23,"ion-label"),e._uU(24,"Virtual"),e.qZA()()(),e.TgZ(25,"ion-item")(26,"ion-input",9)(27,"div",10),e._uU(28,"Titulo "),e.TgZ(29,"ion-text",6),e._uU(30,"*"),e.qZA()()()(),e.TgZ(31,"div",11)(32,"div",12)(33,"ion-label",13),e._uU(34,"Fecha y Hora del Evento "),e.TgZ(35,"ion-text",6),e._uU(36,"*"),e.qZA()(),e.TgZ(37,"ion-datetime",14)(38,"span",15),e._uU(39,"Tiempo"),e.qZA()()(),e.TgZ(40,"div",12)(41,"ion-label",13),e._uU(42,"Hora de Fin"),e.TgZ(43,"ion-text",6),e._uU(44,"*"),e.qZA()(),e._UZ(45,"ion-datetime",16),e.qZA()(),e.TgZ(46,"ion-item",17),e.NdJ("click",function(){return t.upload()}),e.YNc(47,U,1,1,"ion-img",18),e._UZ(48,"br"),e.TgZ(49,"ion-label"),e._uU(50,"Subir Imagen"),e.qZA()(),e.TgZ(51,"ion-item")(52,"ion-text"),e._uU(53,"Evento Gratuito"),e.qZA(),e._UZ(54,"ion-toggle",19),e.qZA(),e.TgZ(55,"ion-item")(56,"ion-text"),e._uU(57,"Cupo M\xe1ximo"),e.qZA(),e._UZ(58,"ion-toggle",20),e.qZA(),e.YNc(59,F,6,0,"ion-item",21),e.YNc(60,N,6,2,"ion-item",21),e.YNc(61,J,7,1,"div",22),e.YNc(62,S,6,0,"ion-item",21),e.YNc(63,q,7,0,"ion-item",21),e._UZ(64,"br"),e.YNc(65,G,16,3,"div",23),e._UZ(66,"br"),e.TgZ(67,"ion-label",24),e._uU(68,"Detalles del evento "),e.TgZ(69,"ion-text",6),e._uU(70,"*"),e.qZA()(),e._UZ(71,"br"),e.TgZ(72,"div",25),e._UZ(73,"ngx-editor-menu",26)(74,"ngx-editor",27),e.qZA(),e.TgZ(75,"div",28)(76,"ion-button",29),e._uU(77," Crear Evento "),e.qZA(),e.TgZ(78,"ion-button",30),e._uU(79," Vista Previa "),e.qZA()()()()()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(9),e.Q6J("formGroup",t.eventForm),e.xp6(7),e.Q6J("value",0),e.xp6(3),e.Q6J("value",1),e.xp6(3),e.Q6J("value",2),e.xp6(25),e.Q6J("ngIf",t.img),e.xp6(12),e.Q6J("ngIf",t.eventForm.controls.tieneCupoMaximo.value),e.xp6(1),e.Q6J("ngIf",!t.eventForm.controls.esGratis.value),e.xp6(1),e.Q6J("ngIf",!t.eventForm.controls.esGratis.value),e.xp6(1),e.Q6J("ngIf",2!=t.eventForm.controls.tipoEvento.value),e.xp6(1),e.Q6J("ngIf",2!=t.eventForm.controls.tipoEvento.value),e.xp6(2),e.Q6J("ngIf",0!=t.eventForm.controls.tipoEvento.value),e.xp6(8),e.Q6J("toolbar",t.toolbar)("editor",t.editor),e.xp6(1),e.Q6J("editor",t.editor)("placeholder","Descripci\xf3n del evento"),e.xp6(2),e.Q6J("disabled",!t.img||t.eventForm.invalid))},dependencies:[m.sg,m.O5,s._Y,s.JJ,s.JL,s.Q7,s.nD,r.YG,r.W2,r.x4,r.gu,r.Xz,r.pK,r.Ie,r.Q$,r.cJ,r.GO,r.t9,r.n0,r.yW,r.ho,r.w,r.as,r.QI,r.j9,p.tP,p.Mn,s.sg,s.u]}),c})()}];let Q=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(L),h.Bz]}),c})(),M=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,s.u5,r.Pc,p.FP,s.UX,Q]}),c})()},7038:(Z,v,l)=>{l.d(v,{L:()=>s,R:()=>m});var m=function(r){return r[r.STRIPE=0]="STRIPE",r[r.TRANSFERENCIA=1]="TRANSFERENCIA",r}(m||{});const s=["Pago con Tarjeta","Transferencia"]},4028:(Z,v,l)=>{l.d(v,{L:()=>m,x:()=>s});var m=function(r){return r[r.ESTUDIANTES=0]="ESTUDIANTES",r[r.AFILIADOS=1]="AFILIADOS",r[r.PUBLICO_GENERAL=2]="PUBLICO_GENERAL",r[r.PRENSA=3]="PRENSA",r}(m||{});const s=["Estudiante","Afiliado","P\xfablico General","Prensa"]}}]);