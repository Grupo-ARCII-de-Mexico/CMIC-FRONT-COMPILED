"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4149],{4149:(w,x,a)=>{a.r(x),a.d(x,{VerApoyoPageModule:()=>S});var Z=a(6814),P=a(95),c=a(9843),m=a(9085),v=a(5861),A=a(6676),C=a(553),p=a(1486),o=a(6689),V=a(4433),_=a(7153),b=a(2425),M=a(930);function U(s,d){if(1&s){const l=o.EpF();o.TgZ(0,"tr")(1,"th",12),o._UZ(2,"ion-img",13),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td")(6,"ion-buttons",14)(7,"ion-button",15),o.NdJ("click",function(){const r=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.vistaPrevia(r.id))}),o._UZ(8,"ion-icon",16),o.qZA(),o.TgZ(9,"ion-button",15),o.NdJ("click",function(){const r=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.people(r.id))}),o._UZ(10,"ion-icon",17),o.qZA(),o.TgZ(11,"ion-button",15),o.NdJ("click",function(){const r=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.exportToExcel(r.id))}),o._UZ(12,"ion-icon",18),o.qZA(),o.TgZ(13,"ion-button",19),o._UZ(14,"ion-icon",20),o.qZA(),o.TgZ(15,"ion-button",15),o.NdJ("click",function(){const r=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.deleteEvento(r.id))}),o._UZ(16,"ion-icon",21),o.qZA(),o.TgZ(17,"ion-button",15),o.NdJ("click",function(){const r=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.cerrarEvento(r.id))}),o._UZ(18,"ion-icon",22),o.qZA()()()()}if(2&s){const l=d.$implicit,n=o.oxw();o.xp6(2),o.Q6J("src",n.uri+l.imagen),o.xp6(2),o.Oqu(l.titulo),o.xp6(9),o.MGl("routerLink","editar-evento/",l.id,"")}}const E=[{path:"",component:(()=>{var s;class d{constructor(n,t,r,i,u){this.nav=n,this.alert=t,this.loading=r,this.toast=i,this.genericService=u,this.uri=C.N.image+"apoyos-dn/",this.eventos=[]}ngOnInit(){this.genericService.getAll("desastres").subscribe(n=>{this.eventos=n})}mon(n){return A(n).locale("es").format("L")+" "+A(new Date(n)).utc().format("LTS")}vistaPrevia(n){var t=this;return(0,v.Z)(function*(){const r=t.eventos.find(i=>i.id===n);r&&window.open(C.N.host+"apoyo/"+r.identificador,"_blank")})()}exportToExcel(n){const t=this.eventos.find(e=>e.id===n);let r=[];for(let e of null==t?void 0:t.apoyos){var i,u,g,f,y,h;r.push({Nombre:e?null==e?void 0:e.nombre:null!==(i=null==e?void 0:e.nombre)&&void 0!==i?i:"",Cargo:e?null==e?void 0:e.cargo:null!==(u=null==e?void 0:e.cargo)&&void 0!==u?u:"",Empresa:e?null==e?void 0:e.empresa:null!==(g=null==e?void 0:e.empresa)&&void 0!==g?g:"",Correo:e?null==e?void 0:e.email:null!==(f=null==e?void 0:e.email)&&void 0!==f?f:"",Tel\u00e9fono:e?null==e?void 0:e.telefono:null!==(y=null==e?void 0:e.telefono)&&void 0!==y?y:"",RFC:e?null==e?void 0:e.rfc:null!==(h=null==e?void 0:e.rfc)&&void 0!==h?h:""}),console.log(r)}if(r){const e=p.P6.json_to_sheet(r),T=p.P6.book_new();p.P6.book_append_sheet(T,e,"Sheet1"),p.NC(T,(null==t?void 0:t.titulo.toUpperCase())+".xlsx")}}deleteEvento(n){var t=this;return(0,v.Z)(function*(){var r;t.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar este evento",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(r=(0,v.Z)(function*(){t.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield t.loading.create(),yield t.loading.show(),t.genericService.delete("desastre",n).subscribe(function(){var i=(0,v.Z)(function*(u){yield t.loading.hide(),t.toast.success("Evento Eliminado")});return function(u){return i.apply(this,arguments)}}())}),function(){return r.apply(this,arguments)})}]}),yield t.alert.create(),yield t.alert.show()})()}cerrarEvento(n){var t=this;return(0,v.Z)(function*(){var r;t.alert.setData({animated:!0,header:"Cerrar Evento",message:"Est\xe1 a punto de cerrar el evento una vez lo haga no podr\xe1 reabrilo \xbfDesea Continuar?",buttons:[{text:"Cancelar"},{text:"Cerrar",handler:(r=(0,v.Z)(function*(){t.genericService.update("desastre",n,{active:!1}).subscribe(i=>{t.eventos=t.eventos.map(u=>u.id===n?i:u)})}),function(){return r.apply(this,arguments)})}]}),yield t.alert.create(),yield t.alert.show()})()}people(n){return(0,v.Z)(function*(){})()}}return(s=d).\u0275fac=function(n){return new(n||s)(o.Y36(c.SH),o.Y36(V.c),o.Y36(_.b),o.Y36(b._W),o.Y36(M.M))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-ver-apoyo"]],decls:24,vars:3,consts:[[3,"fullscreen"],[1,"mt-5","px-3"],[1,"container"],[1,"my-3"],[1,"d-flex","mt-5"],[1,"h4"],["placeholder","Buscar evento","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"debounce"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red","d-none","d-md-block"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center","d-none","d-md-block"],[1,"img-fluid",3,"src"],["color","primary","slot","start"],["color","primary",3,"click"],["slot","icon-only","name","eye-outline"],["slot","icon-only","name","people-outline"],["slot","icon-only","name","download-outline"],["color","primary",3,"routerLink"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"],["slot","icon-only","name","close-outline"]],template:function(n,t){1&n&&(o.TgZ(0,"ion-content",0),o._UZ(1,"br")(2,"br"),o.TgZ(3,"div",1)(4,"div",2)(5,"h1",3)(6,"b"),o._uU(7,"Apoyos"),o.qZA()(),o.TgZ(8,"div",4)(9,"h5",5)(10,"b"),o._uU(11,"Apoyos Registrados"),o.qZA()(),o._UZ(12,"ion-searchbar",6),o.qZA(),o.TgZ(13,"table",7)(14,"thead",8)(15,"tr")(16,"th",9),o._uU(17,"Foto"),o.qZA(),o.TgZ(18,"th",10),o._uU(19,"Titulo"),o.qZA(),o.TgZ(20,"th",10),o._uU(21,"Opciones"),o.qZA()()(),o.TgZ(22,"tbody"),o.YNc(23,U,19,3,"tr",11),o.qZA()()()()()),2&n&&(o.Q6J("fullscreen",!0),o.xp6(12),o.Q6J("debounce",250),o.xp6(11),o.Q6J("ngForOf",t.eventos))},dependencies:[Z.sg,c.YG,c.Sm,c.W2,c.gu,c.Xz,c.VI,c.j9,c.YI,m.rH],styles:[".img-fluid[_ngcontent-%COMP%]{max-width:200px}.red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),d})()}];let J=(()=>{var s;class d{}return(s=d).\u0275fac=function(n){return new(n||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[m.Bz.forChild(E),m.Bz]}),d})(),S=(()=>{var s;class d{}return(s=d).\u0275fac=function(n){return new(n||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[Z.ez,P.u5,c.Pc,J]}),d})()}}]);