"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3786],{3786:(I,h,r)=>{r.r(h),r.d(h,{BoletinesPageModule:()=>Y});var f=r(6814),l=r(95),a=r(9843),p=r(9085),g=r(5861),m=r(8915),v=r(4664),b=r(6528),B=r(553),e=r(6689),F=r(2264),Z=r(4846),y=r(2425),P=r(930),C=r(6533);const J=[{path:"",component:(()=>{var n;class d{constructor(i,o,t,s,u,M,R,T,x){this.fb=i,this.compress=o,this.sliderRepo=t,this.toast=s,this.genericS=u,this.params=M,this.nav=R,this.authRepo=T,this.modalC=x,this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic"],["underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["horizontal_rule","format_clear"],["text_color","background_color"]],this.editar=!1,this.uri=B.N.image+"boletines/"}ngOnInit(){var i=this;this.editor=new m.ML,this.authRepo.user$.subscribe(o=>this.name=o[0].names),this.sliderForm=this.fb.group({titulo:[null],informacion:[null]}),this.params.params.pipe((0,v.w)(o=>{var t;return this.identificador=Number(null!==(t=null==o?void 0:o.identificador)&&void 0!==t?t:0),this.sliderRepo.boletin$})).subscribe(function(){var o=(0,g.Z)(function*(t){if(0!==i.identificador){const s=t.find(u=>u.id===i.identificador);i.sliderForm.setValue({titulo:s.titulo,informacion:s.informacion}),i.image=i.uri+s.imagen,i.editar=!0}});return function(t){return o.apply(this,arguments)}}())}addImage(){var i=this;return(0,g.Z)(function*(){i.image=yield i.compress.returnImageCompress();const o=yield i.modalC.create({component:b.n,animated:!0,componentProps:{imageUrl:i.image}});o.onDidDismiss().then(({data:t})=>{i.image=null!=t?t:null}),yield o.present()})()}save(){var i=this;return(0,g.Z)(function*(){if(i.editar)return i.edit();const o=new FormData;let t;i.image&&o.append("imagen",i.compress.dataURItoBlob(i.image)),t="string"!=typeof i.sliderForm.controls.informacion.value?(0,m.io)(i.sliderForm.controls.informacion.value):i.sliderForm.controls.informacion.value,o.append("titulo",i.sliderForm.controls.titulo.value),o.append("autor",i.name),o.append("informacion",t);const s=i.sliderForm.controls.titulo.value.replace(/ /g,"-");o.append("identificador",s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),i.genericS.postWhitImage("boletines",o).subscribe(u=>{i.toast.success("Bolet\xedn Creado"),i.sliderRepo.addBoletin(u),i.image=null,i.sliderForm.reset()})})()}edit(){const i=new FormData;let o;this.image.includes("data:")&&i.append("imagen",this.compress.dataURItoBlob(this.image)),i.append("titulo",this.sliderForm.controls.titulo.value),i.append("autor",this.name),o="string"!=typeof this.sliderForm.controls.informacion.value?(0,m.io)(this.sliderForm.controls.informacion.value):this.sliderForm.controls.informacion.value;const t=this.sliderForm.controls.titulo.value.replace(/ /g,"-");i.append("identificador",t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),i.append("informacion",o),this.genericS.updateWhitImage("boletines",this.identificador,i).subscribe(s=>{this.toast.success("Bolet\xedn Actualizado"),this.sliderRepo.updateBoletin(this.identificador,s),this.image=null,this.sliderForm.reset(),this.nav.navigateBack("/dashboard/website/boletines-ver")})}}return(n=d).\u0275fac=function(i){return new(i||n)(e.Y36(l.qu),e.Y36(F.Y),e.Y36(Z.a),e.Y36(y._W),e.Y36(P.M),e.Y36(p.gz),e.Y36(a.SH),e.Y36(C.O),e.Y36(a.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-boletines"]],decls:20,vars:10,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"container","px-5"],[3,"formGroup"],["lines","none"],["slot","start","shape","round",3,"click"],["slot","end",2,"max-height","150px","width","200px",3,"src"],["type","text","label","Titulo","labelPlacement","floating","formControlName","titulo",1,"my-2","border"],[1,"NgxEditor__Wrapper"],[3,"toolbar","editor"],["formControlName","informacion",3,"editor","placeholder"],["expand","block","shape","round",3,"disabled","click"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br"),e.TgZ(2,"ion-toolbar",1),e._UZ(3,"br"),e.TgZ(4,"h1",2)(5,"b"),e._uU(6),e.qZA()(),e._UZ(7,"hr",3),e.qZA(),e.TgZ(8,"div",4)(9,"form",5)(10,"ion-item",6)(11,"ion-button",7),e.NdJ("click",function(){return o.addImage()}),e._uU(12," Subir Fotograf\xeda "),e.qZA(),e._UZ(13,"ion-img",8),e.qZA(),e._UZ(14,"ion-input",9),e.TgZ(15,"div",10),e._UZ(16,"ngx-editor-menu",11)(17,"ngx-editor",12),e.qZA(),e.TgZ(18,"ion-button",13),e.NdJ("click",function(){return o.save()}),e._uU(19),e.qZA()()()()),2&i&&(e.Q6J("fullscreen",!0),e.xp6(6),e.hij(" ",o.editar?"Editar":"Crear"," Boletines"),e.xp6(3),e.Q6J("formGroup",o.sliderForm),e.xp6(4),e.Q6J("src",o.image),e.xp6(3),e.Q6J("toolbar",o.toolbar)("editor",o.editor),e.xp6(1),e.Q6J("editor",o.editor)("placeholder","Descripci\xf3n del evento"),e.xp6(1),e.Q6J("disabled",!o.image),e.xp6(1),e.hij(" ",o.editar?"Guardar Cambios":"Crear Bolet\xedn"," "))},dependencies:[l._Y,l.JJ,l.JL,m.tP,m.Mn,l.sg,l.u,a.YG,a.W2,a.Xz,a.pK,a.Ie,a.sr,a.j9]}),d})()}];let U=(()=>{var n;class d{}return(n=d).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(J),p.Bz]}),d})(),Y=(()=>{var n;class d{}return(n=d).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,l.u5,m.FP,l.UX,a.Pc,U]}),d})()}}]);