"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9305],{9305:(ne,q,s)=>{s.r(q),s.d(q,{VerEventoPageModule:()=>ee});var Z=s(6814),G=s(95),u=s(9843),x=s(9085),v=s(5861),h=s(1486),Y=s(6676),I=s(553),e=s(6689),H=s(8013),z=s(1284),B=s(4433),K=s(7153),Q=s(2425),j=s(930);function L(a,d){if(1&a){const l=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(l);const t=e.oxw().$implicit,i=e.oxw();return e.KtG(i.cerrarEvento(t.id))}),e._UZ(1,"ion-icon",29),e.qZA()}}function b(a,d){if(1&a){const l=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(l);const t=e.oxw().$implicit,i=e.oxw();return e.KtG(i.reactivar(t.id))}),e._UZ(1,"ion-icon",30),e.qZA()}}function W(a,d){if(1&a){const l=e.EpF();e.TgZ(0,"tr")(1,"th",18),e._UZ(2,"ion-img",19),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"ion-buttons",20)(9,"ion-button",21),e.NdJ("click",function(){const i=e.CHM(l).$implicit,r=e.oxw();return e.KtG(r.vistaPrevia(i.id))}),e._UZ(10,"ion-icon",22),e.qZA(),e.TgZ(11,"ion-button",21),e.NdJ("click",function(){const i=e.CHM(l).$implicit,r=e.oxw();return e.KtG(r.exportToExcel(i.id))}),e._UZ(12,"ion-icon",23),e.qZA(),e.TgZ(13,"ion-button",21),e.NdJ("click",function(){const i=e.CHM(l).$implicit,r=e.oxw();return e.KtG(r.modalUser(i.id))}),e._UZ(14,"ion-icon",24),e.qZA(),e.TgZ(15,"ion-button",25),e._UZ(16,"ion-icon",26),e.qZA(),e.TgZ(17,"ion-button",21),e.NdJ("click",function(){const i=e.CHM(l).$implicit,r=e.oxw();return e.KtG(r.deleteEvento(i.id))}),e._UZ(18,"ion-icon",27),e.qZA(),e.YNc(19,L,2,0,"ion-button",28),e.YNc(20,b,2,0,"ion-button",28),e.qZA()()()}if(2&a){const l=d.$implicit,o=e.oxw();e.xp6(2),e.Q6J("src",o.uri+l.imagen),e.xp6(2),e.Oqu(l.titulo),e.xp6(2),e.Oqu(o.mon(l.fechaInicio)),e.xp6(9),e.MGl("routerLink","editar-evento/",l.id,""),e.xp6(4),e.Q6J("ngIf",l.active),e.xp6(1),e.Q6J("ngIf",!l.active)}}const X=[{path:"",component:(()=>{var a;class d{constructor(o,t,i,r,c,m,g){this.eventoRepo=o,this.boletosRepo=t,this.nav=i,this.alert=r,this.loading=c,this.toast=m,this.genericService=g,this.uri=I.N.image+"eventos/",this.eventos=[]}ngOnInit(){this.eventoRepo.evento$.subscribe(o=>{this.eventos=o.sort((t,i)=>new Date(i.fechaInicio).getTime()-new Date(t.fechaInicio).getTime())})}mon(o){return Y(o).locale("es").format("L")+" "+Y(new Date(o)).utc().format("LTS")}vistaPrevia(o){var t=this;return(0,v.Z)(function*(){const i=t.eventos.find(r=>r.id===o);i&&window.open(I.N.host+"evento/"+i.identificador,"_blank")})()}exportToExcel(o){const t=this.eventos.find(n=>n.id===o);let i=[];for(let n of null==t?void 0:t.boletos){var r,c,m,g,f,p,y,E,T,C,P,A,U,V,_,N,M,F,w,J,R,D,S,k;i.push({Folio:n.folio,Nombre:n.afiliado?null==n||null===(r=n.afiliado)||void 0===r?void 0:r.nombre:null!==(c=null==n||null===(m=n.participante)||void 0===m?void 0:m.nombre)&&void 0!==c?c:"",Cargo:n.afiliado?null==n||null===(g=n.afiliado)||void 0===g?void 0:g.cargo:null!==(f=null==n||null===(p=n.participante)||void 0===p?void 0:p.cargo)&&void 0!==f?f:"",Empresa:n.afiliado?null==n||null===(y=n.afiliado)||void 0===y?void 0:y.empresa:null!==(E=null==n||null===(T=n.participante)||void 0===T?void 0:T.empresa)&&void 0!==E?E:"",Organizaci\u00f3n:n.afiliado?null==n||null===(C=n.afiliado)||void 0===C?void 0:C.organizacion:null!==(P=null==n||null===(A=n.participante)||void 0===A?void 0:A.organizacion)&&void 0!==P?P:"",Correo:n.afiliado?null==n||null===(U=n.afiliado)||void 0===U?void 0:U.email:null!==(V=null==n||null===(_=n.participante)||void 0===_?void 0:_.email)&&void 0!==V?V:"",Tel\u00e9fono:n.afiliado?null==n||null===(N=n.afiliado)||void 0===N?void 0:N.telefono:null!==(M=null==n||null===(F=n.participante)||void 0===F?void 0:F.telefono)&&void 0!==M?M:"","Tipo Asistencia":null!==(w=n.privilegio)&&void 0!==w?w:"N/A","Forma de Pago":n.idPago?"Tarjeta de cr\xe9dito":"Transferencia","Boleto Pagado":n.active?"Si":"No","Necesita Factura":n.quieroFactura?"Si":"No",RFC:n.afiliado?null==n||null===(J=n.afiliado)||void 0===J?void 0:J.rfc:null!==(R=null==n||null===(D=n.participante)||void 0===D?void 0:D.rfc)&&void 0!==R?R:"",CURP:null!==(S=null==n||null===(k=n.participante)||void 0===k?void 0:k.curp)&&void 0!==S?S:""})}if(i){const n=h.P6.json_to_sheet(i),O=h.P6.book_new();h.P6.book_append_sheet(O,n,"Sheet1"),h.NC(O,(null==t?void 0:t.titulo.toUpperCase())+".xlsx")}}modalUser(o){var t=this;return(0,v.Z)(function*(){const i=t.eventos.find(r=>r.id===o);i&&(t.boletosRepo.setEventos(i.boletos),t.nav.navigateForward("dashboard/eventos/ver-usuarios",{queryParams:{id:o}}))})()}deleteEvento(o){var t=this;return(0,v.Z)(function*(){var i;yield t.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar este evento",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(i=(0,v.Z)(function*(){t.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield t.loading.create(),yield t.loading.show(),t.genericService.delete("evento",o).subscribe(function(){var r=(0,v.Z)(function*(c){yield t.loading.hide(),t.toast.success("Evento Eliminado"),t.eventoRepo.deleteEvento(o)});return function(c){return r.apply(this,arguments)}}())}),function(){return i.apply(this,arguments)})}]})})()}cerrarEvento(o){var t=this;return(0,v.Z)(function*(){var i;yield t.alert.setData({animated:!0,header:"Cerrar Evento",message:"Est\xe1 a punto de cerrar el evento una vez lo haga no podr\xe1 reabrilo \xbfDesea Continuar?",inputs:[{name:"titulo",type:"text",placeholder:"Ingrese Titulo"},{name:"descripcion",type:"textarea",placeholder:"Ingrese texto "}],buttons:[{text:"Cancelar"},{text:"Cerrar",handler:(i=(0,v.Z)(function*(r){yield t.loading.setData({animated:!0,message:"Cerrando Evento..."}),yield t.loading.create(),yield t.loading.show(),t.genericService.update("evento",o,{active:!1,modal:{titulo:r.titulo,descripcion:r.descripcion}}).subscribe(function(){var m=(0,v.Z)(function*(g){t.eventos=t.eventos.map(f=>f.id===o?g:f),yield t.loading.hide(),t.toast.success("Evento Cerrado","Correcto")});return function(g){return m.apply(this,arguments)}}())}),function(c){return i.apply(this,arguments)})}]})})()}reactivar(o){var t=this;return(0,v.Z)(function*(){var i;yield t.alert.setData({animated:!0,header:"Reactivar Evento",message:"Est\xe1 a punto de reactivar el evento le recomendamos editar el evento antes de hacerlo \xbfDesea Continuar?",buttons:[{text:"Cancelar"},{text:"Reactivar",handler:(i=(0,v.Z)(function*(){yield t.loading.setData({animated:!0,message:"Cerrando Evento..."}),yield t.loading.create(),yield t.loading.show(),t.genericService.update("evento",o,{active:!0,modal:null}).subscribe(function(){var r=(0,v.Z)(function*(c){t.eventos=t.eventos.map(m=>m.id===o?c:m),yield t.loading.hide(),t.toast.success("Evento Reactivado","Correcto")});return function(c){return r.apply(this,arguments)}}())}),function(){return i.apply(this,arguments)})}]})})()}}return(a=d).\u0275fac=function(o){return new(o||a)(e.Y36(H.hJ),e.Y36(z.b9),e.Y36(u.SH),e.Y36(B.c),e.Y36(K.b),e.Y36(Q._W),e.Y36(j.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ver-evento"]],decls:45,vars:3,consts:[[3,"fullscreen"],["color","dark",1,"mt-4","py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"mt-2","px-3"],[1,"container"],[1,"d-flex","mt-1"],["placeholder","Buscar evento","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"debounce"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red","d-none","d-md-block"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],[1,"d-flex"],[1,"mx-auto"],[1,"pagination"],[1,"page-item"],["href","#",1,"page-link"],["scope","row",1,"text-center","d-none","d-md-block"],[1,"img-fluid",3,"src"],["color","primary","slot","start"],["color","primary",3,"click"],["slot","icon-only","name","eye-outline"],["slot","icon-only","name","download-outline"],["slot","icon-only","name","people-outline"],["color","primary",3,"routerLink"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"],["color","primary",3,"click",4,"ngIf"],["slot","icon-only","name","close-outline"],["slot","icon-only","name","power-outline"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-content",0)(1,"ion-toolbar",1),e._UZ(2,"br"),e.TgZ(3,"h1",2)(4,"b"),e._uU(5,"Eventos Registrados"),e.qZA()(),e._UZ(6,"hr",3),e.qZA(),e._UZ(7,"br")(8,"br"),e.TgZ(9,"div",4)(10,"div",5)(11,"div",6),e._UZ(12,"ion-searchbar",7),e.qZA(),e.TgZ(13,"table",8)(14,"thead",9)(15,"tr")(16,"th",10),e._uU(17,"Foto"),e.qZA(),e.TgZ(18,"th",11),e._uU(19,"Nombre"),e.qZA(),e.TgZ(20,"th",11),e._uU(21,"Dia y Hora"),e.qZA(),e.TgZ(22,"th",11),e._uU(23,"Opciones"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,W,21,6,"tr",12),e.qZA()()()(),e.TgZ(26,"div",5)(27,"div",13)(28,"nav",14)(29,"ul",15)(30,"li",16)(31,"a",17),e._uU(32,"Previous"),e.qZA()(),e.TgZ(33,"li",16)(34,"a",17),e._uU(35,"1"),e.qZA()(),e.TgZ(36,"li",16)(37,"a",17),e._uU(38,"2"),e.qZA()(),e.TgZ(39,"li",16)(40,"a",17),e._uU(41,"3"),e.qZA()(),e.TgZ(42,"li",16)(43,"a",17),e._uU(44,"Next"),e.qZA()()()()()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("debounce",250),e.xp6(13),e.Q6J("ngForOf",t.eventos))},dependencies:[Z.sg,Z.O5,u.YG,u.Sm,u.W2,u.gu,u.Xz,u.VI,u.sr,u.j9,u.YI,x.rH],styles:[".red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}.img-fluid[_ngcontent-%COMP%]{max-width:100px}"]}),d})()}];let $=(()=>{var a;class d{}return(a=d).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[x.Bz.forChild(X),x.Bz]}),d})(),ee=(()=>{var a;class d{}return(a=d).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[Z.ez,G.u5,u.Pc,$]}),d})()}}]);