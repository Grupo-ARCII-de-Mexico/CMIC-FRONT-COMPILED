"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4910],{4910:(G,A,n)=>{n.r(A),n.d(A,{ApoyosPageModule:()=>b});var C=n(6814),v=n(95),y=n(9843),u=n(9085),c=n(5861),i=n(6676),m=n(553),f=n(1486),a=n(6689),M=n(4433),H=n(7153),X=n(2425),Q=n(930),w=n(2051);i.locale("es");const k=[{path:"",component:(()=>{var s;class h{constructor(d,e,t,l,r,P){this.nav=d,this.alert=e,this.loading=t,this.toast=l,this.genericService=r,this.apoyos=P,this.uri=m.N.image+"apoyos-dn/",this.eventos=[]}ngOnInit(){this.genericService.getAll("desastres").subscribe(d=>{this.eventos=d,this.apoyos.setApoyos(d)})}mon(d){return i(d).locale("es").format("L")+" "+i(new Date(d)).utc().format("LTS")}vistaPrevia(d){var e=this;return(0,c.Z)(function*(){const t=e.eventos.find(l=>l.id===d);t&&window.open(m.N.host+"evento/"+t.identificador,"_blank")})()}exportToExcel(d){const e=this.eventos.find(o=>o.id===d);let t=[];for(let o of null==e?void 0:e.boletos){var l,r,P,E,x,D,S,T,p,R,B,F,O,z,N,U,Y,Z,j,L,I,W,K,J;t.push({Folio:o.folio,Nombre:o.afiliado?null==o||null===(l=o.afiliado)||void 0===l?void 0:l.nombre:null!==(r=null==o||null===(P=o.participante)||void 0===P?void 0:P.nombre)&&void 0!==r?r:"",Cargo:o.afiliado?null==o||null===(E=o.afiliado)||void 0===E?void 0:E.cargo:null!==(x=null==o||null===(D=o.participante)||void 0===D?void 0:D.cargo)&&void 0!==x?x:"",Empresa:o.afiliado?null==o||null===(S=o.afiliado)||void 0===S?void 0:S.empresa:null!==(T=null==o||null===(p=o.participante)||void 0===p?void 0:p.empresa)&&void 0!==T?T:"",Organizaci\u00f3n:o.afiliado?null==o||null===(R=o.afiliado)||void 0===R?void 0:R.organizacion:null!==(B=null==o||null===(F=o.participante)||void 0===F?void 0:F.organizacion)&&void 0!==B?B:"",Correo:o.afiliado?null==o||null===(O=o.afiliado)||void 0===O?void 0:O.email:null!==(z=null==o||null===(N=o.participante)||void 0===N?void 0:N.email)&&void 0!==z?z:"",Tel\u00e9fono:o.afiliado?null==o||null===(U=o.afiliado)||void 0===U?void 0:U.telefono:null!==(Y=null==o||null===(Z=o.participante)||void 0===Z?void 0:Z.telefono)&&void 0!==Y?Y:"","Tipo Asistencia":null!==(j=o.privilegio)&&void 0!==j?j:"N/A","Forma de Pago":o.idPago?"Tarjeta de cr\xe9dito":"Transferencia","Boleto Pagado":o.active?"Si":"No","Necesita Factura":o.quieroFactura?"Si":"No",RFC:o.afiliado?null==o||null===(L=o.afiliado)||void 0===L?void 0:L.rfc:null!==(I=null==o||null===(W=o.participante)||void 0===W?void 0:W.rfc)&&void 0!==I?I:"",CURP:null!==(K=null==o||null===(J=o.participante)||void 0===J?void 0:J.curp)&&void 0!==K?K:""})}if(t){const o=f.P6.json_to_sheet(t),V=f.P6.book_new();f.P6.book_append_sheet(V,o,"Sheet1"),f.NC(V,(null==e?void 0:e.titulo.toUpperCase())+".xlsx")}}deleteEvento(d){var e=this;return(0,c.Z)(function*(){var t;yield e.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar este evento",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(t=(0,c.Z)(function*(){e.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield e.loading.create(),yield e.loading.show(),e.genericService.delete("desastre",d).subscribe(function(){var l=(0,c.Z)(function*(r){yield e.loading.hide(),e.toast.success("Evento Eliminado")});return function(r){return l.apply(this,arguments)}}())}),function(){return t.apply(this,arguments)})}]})})()}cerrarEvento(d){var e=this;return(0,c.Z)(function*(){var t;yield e.alert.setData({animated:!0,header:"Cerrar Evento",message:"Est\xe1 a punto de cerrar el evento una vez lo haga no podr\xe1 reabrilo \xbfDesea Continuar?",buttons:[{text:"Cancelar"},{text:"Cerrar",handler:(t=(0,c.Z)(function*(){e.genericService.update("desastre",d,{active:!1}).subscribe(l=>{e.eventos=e.eventos.map(r=>r.id===d?l:r)})}),function(){return t.apply(this,arguments)})}]})})()}}return(s=h).\u0275fac=function(d){return new(d||s)(a.Y36(y.SH),a.Y36(M.c),a.Y36(H.b),a.Y36(X._W),a.Y36(Q.M),a.Y36(w.d))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-apoyos"]],decls:1,vars:0,template:function(d,e){1&d&&a._UZ(0,"ion-router-outlet")},dependencies:[y.jP],styles:[".red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),h})(),children:[{path:"crear-apoyos",loadChildren:()=>Promise.all([n.e(2264),n.e(8915),n.e(3923)]).then(n.bind(n,3923)).then(s=>s.CrearApoyoPageModule)},{path:"editar-apoyos/:identificador",loadChildren:()=>Promise.all([n.e(2264),n.e(8915),n.e(3923)]).then(n.bind(n,3923)).then(s=>s.CrearApoyoPageModule)},{path:"",loadChildren:()=>n.e(4149).then(n.bind(n,4149)).then(s=>s.VerApoyoPageModule)},{path:"ver-usuarios/:identificador",loadChildren:()=>n.e(1601).then(n.bind(n,1601)).then(s=>s.VerUsuariosPageModule)}]}];let q=(()=>{var s;class h{}return(s=h).\u0275fac=function(d){return new(d||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[u.Bz.forChild(k),u.Bz]}),h})(),b=(()=>{var s;class h{}return(s=h).\u0275fac=function(d){return new(d||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[C.ez,v.u5,y.Pc,q]}),h})()},2051:(G,A,n)=>{n.d(A,{d:()=>c});var C=n(1264),v=n(4998),y=n(6689);const u=(0,C.MT)({name:"user"},(0,v.h4)());let c=(()=>{var i;class m{constructor(){this.user$=u.pipe((0,v.WK)())}setApoyos(a){u.update((0,v.J6)(a))}addApoyo(a){u.update((0,v.dP)(a))}updateApoyo(a,M){u.update((0,v.jB)(a,M))}deleteApoyo(a){u.update((0,v._L)(a))}}return(i=m).\u0275fac=function(a){return new(a||i)},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),m})()}}]);