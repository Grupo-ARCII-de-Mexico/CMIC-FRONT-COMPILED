"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4910],{4910:(G,A,o)=>{o.r(A),o.d(A,{ApoyosPageModule:()=>b});var C=o(6814),v=o(95),y=o(9843),u=o(9085),c=o(5861),i=o(6676),m=o(553),h=o(1486),a=o(6689),E=o(4433),H=o(7153),X=o(2425),Q=o(930),w=o(2051);i.locale("es");const k=[{path:"",component:(()=>{var s;class f{constructor(e,d,r,l,t,P){this.nav=e,this.alert=d,this.loading=r,this.toast=l,this.genericService=t,this.apoyos=P,this.uri=m.N.image+"apoyos-dn/",this.eventos=[]}ngOnInit(){this.genericService.getAll("desastres").subscribe(e=>{this.eventos=e,this.apoyos.setApoyos(e)})}mon(e){return i(e).locale("es").format("L")+" "+i(new Date(e)).utc().format("LTS")}vistaPrevia(e){var d=this;return(0,c.Z)(function*(){const r=d.eventos.find(l=>l.id===e);r&&window.open(m.N.host+"evento/"+r.identificador,"_blank")})()}exportToExcel(e){const d=this.eventos.find(n=>n.id===e);let r=[];for(let n of null==d?void 0:d.boletos){var l,t,P,M,p,x,D,S,T,R,B,F,O,z,N,U,Y,Z,j,L,I,W,K,J;r.push({Folio:n.folio,Nombre:n.afiliado?null==n||null===(l=n.afiliado)||void 0===l?void 0:l.nombre:null!==(t=null==n||null===(P=n.participante)||void 0===P?void 0:P.nombre)&&void 0!==t?t:"",Cargo:n.afiliado?null==n||null===(M=n.afiliado)||void 0===M?void 0:M.cargo:null!==(p=null==n||null===(x=n.participante)||void 0===x?void 0:x.cargo)&&void 0!==p?p:"",Empresa:n.afiliado?null==n||null===(D=n.afiliado)||void 0===D?void 0:D.empresa:null!==(S=null==n||null===(T=n.participante)||void 0===T?void 0:T.empresa)&&void 0!==S?S:"",Organizaci\u00f3n:n.afiliado?null==n||null===(R=n.afiliado)||void 0===R?void 0:R.organizacion:null!==(B=null==n||null===(F=n.participante)||void 0===F?void 0:F.organizacion)&&void 0!==B?B:"",Correo:n.afiliado?null==n||null===(O=n.afiliado)||void 0===O?void 0:O.email:null!==(z=null==n||null===(N=n.participante)||void 0===N?void 0:N.email)&&void 0!==z?z:"",Tel\u00e9fono:n.afiliado?null==n||null===(U=n.afiliado)||void 0===U?void 0:U.telefono:null!==(Y=null==n||null===(Z=n.participante)||void 0===Z?void 0:Z.telefono)&&void 0!==Y?Y:"","Tipo Asistencia":null!==(j=n.privilegio)&&void 0!==j?j:"N/A","Forma de Pago":n.idPago?"Tarjeta de cr\xe9dito":"Transferencia","Boleto Pagado":n.active?"Si":"No","Necesita Factura":n.quieroFactura?"Si":"No",RFC:n.afiliado?null==n||null===(L=n.afiliado)||void 0===L?void 0:L.rfc:null!==(I=null==n||null===(W=n.participante)||void 0===W?void 0:W.rfc)&&void 0!==I?I:"",CURP:null!==(K=null==n||null===(J=n.participante)||void 0===J?void 0:J.curp)&&void 0!==K?K:""})}if(r){const n=h.P6.json_to_sheet(r),V=h.P6.book_new();h.P6.book_append_sheet(V,n,"Sheet1"),h.NC(V,(null==d?void 0:d.titulo.toUpperCase())+".xlsx")}}deleteEvento(e){var d=this;return(0,c.Z)(function*(){var r;yield d.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar este evento",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(r=(0,c.Z)(function*(){d.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield d.loading.create(),yield d.loading.show(),d.genericService.delete("desastre",e).subscribe(function(){var l=(0,c.Z)(function*(t){yield d.loading.hide(),d.toast.success("Evento Eliminado")});return function(t){return l.apply(this,arguments)}}())}),function(){return r.apply(this,arguments)})}]})})()}cerrarEvento(e){var d=this;return(0,c.Z)(function*(){var r;yield d.alert.setData({animated:!0,header:"Cerrar Evento",message:"Est\xe1 a punto de cerrar el evento una vez lo haga no podr\xe1 reabrilo \xbfDesea Continuar?",buttons:[{text:"Cancelar"},{text:"Cerrar",handler:(r=(0,c.Z)(function*(){d.genericService.update("desastre",e,{active:!1}).subscribe(l=>{d.eventos=d.eventos.map(t=>t.id===e?l:t)})}),function(){return r.apply(this,arguments)})}]})})()}}return(s=f).\u0275fac=function(e){return new(e||s)(a.Y36(y.SH),a.Y36(E.c),a.Y36(H.b),a.Y36(X._W),a.Y36(Q.M),a.Y36(w.d))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-apoyos"]],decls:1,vars:0,template:function(e,d){1&e&&a._UZ(0,"ion-router-outlet")},dependencies:[y.jP],styles:[".red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),f})(),children:[{path:"crear-apoyos",loadChildren:()=>Promise.all([o.e(2264),o.e(8915),o.e(3923)]).then(o.bind(o,3923)).then(s=>s.CrearApoyoPageModule)},{path:"",loadChildren:()=>o.e(4149).then(o.bind(o,4149)).then(s=>s.VerApoyoPageModule)},{path:"ver-usuarios/:identificador",loadChildren:()=>o.e(1601).then(o.bind(o,1601)).then(s=>s.VerUsuariosPageModule)}]}];let q=(()=>{var s;class f{}return(s=f).\u0275fac=function(e){return new(e||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[u.Bz.forChild(k),u.Bz]}),f})(),b=(()=>{var s;class f{}return(s=f).\u0275fac=function(e){return new(e||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[C.ez,v.u5,y.Pc,q]}),f})()},2051:(G,A,o)=>{o.d(A,{d:()=>c});var C=o(1264),v=o(4998),y=o(6689);const u=(0,C.MT)({name:"user"},(0,v.h4)());let c=(()=>{var i;class m{constructor(){this.user$=u.pipe((0,v.WK)())}setApoyos(a){u.update((0,v.J6)(a))}addApoyo(a){u.update((0,v.dP)(a))}updateApoyo(a,E){u.update((0,v.jB)(a,E))}deleteApoyo(a){u.update((0,v._L)(a))}}return(i=m).\u0275fac=function(a){return new(a||i)},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),m})()}}]);