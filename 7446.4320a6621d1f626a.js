"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7446],{7446:(ei,x,_)=>{_.d(x,{H:()=>ni});var u=_(5861),f=_(1842),m=_(4664),h=_(9397),Z=_(553),i=_(6689),a=_(9843),T=_(930),A=_(7153),P=_(2425),C=_(4433),p=_(6814),g=_(95);function M(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.afiliado)}}function q(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.afiliado=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.afiliado)}}function E(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.empresa)}}function J(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.empresa=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.empresa)}}function S(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.denominacion)}}function v(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.denominacion=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.denominacion)}}function U(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.rfc)}}function I(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.rfc=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.rfc)}}function O(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.calle)}}function V(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.calle=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.calle)}}function N(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.colonia)}}function w(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.colonia=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.colonia)}}function Q(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.municipio)}}function b(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.municipio=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.municipio)}}function y(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.estado)}}function Y(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.estado=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.estado)}}function D(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.web)}}function F(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.web=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.web)}}function K(n,d){if(1&n&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&n){const t=d.$implicit;i.xp6(1),i.Oqu(t)}}function k(n,d){if(1&n&&(i.TgZ(0,"ion-item",9)(1,"ion-label",10)(2,"h5",19),i._uU(3,"Especialidades"),i.qZA(),i.YNc(4,K,2,1,"p",20),i.qZA()()),2&n){const t=i.oxw();i.xp6(4),i.Q6J("ngForOf",t.oportunidad.especialidades)}}function G(n,d){1&n&&(i.TgZ(0,"h5",19),i._uU(1,"Especialidades"),i.qZA())}function H(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-checkbox",24),i.NdJ("ionChange",function(o){const l=i.CHM(t).$implicit,r=i.oxw(2);return i.KtG(r.setEspecialidad(o,l))}),i._uU(1),i.qZA()}if(2&n){const t=d.$implicit,e=i.oxw(2);i.Q6J("checked",e.findEspecialidad(t)),i.xp6(1),i.Oqu(t)}}function W(n,d){if(1&n&&(i.TgZ(0,"div",21),i.YNc(1,G,2,0,"h5",22),i._UZ(2,"br"),i.YNc(3,H,2,2,"ion-checkbox",23),i.qZA()),2&n){const t=i.oxw();i.xp6(1),i.Q6J("ngIf",t.negocio.especialidades.length>0),i.xp6(2),i.Q6J("ngForOf",null==t.negocio?null:t.negocio.especialidades)}}function R(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.contacto.email)}}function B(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.contacto.email=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.contacto.email)}}function L(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.contacto.telefono)}}function $(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.contacto.telefono=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.contacto.telefono)}}function j(n,d){if(1&n&&(i.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),i._uU(3),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Oqu(t.oportunidad.contacto.telefonoOficina)}}function z(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(t);const c=i.oxw();return i.KtG(c.oportunidad.contacto.telefonoOficina=o)}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.contacto.telefonoOficina)}}function X(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-item",9)(1,"ion-button",26),i.NdJ("click",function(){const c=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.download(c))}),i._UZ(2,"ion-icon",27),i.qZA(),i.TgZ(3,"ion-text",10)(4,"h5",28),i._uU(5),i.qZA()(),i.TgZ(6,"ion-button",29),i.NdJ("click",function(){const c=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.view(c))}),i._uU(7," Ver Archivo "),i.qZA()()}if(2&n){const t=d.$implicit;i.xp6(5),i.Oqu(t.documento)}}function ii(n,d){if(1&n&&(i.TgZ(0,"div")(1,"h5",8),i._uU(2,"Documentos"),i.qZA(),i.YNc(3,X,8,1,"ion-item",25),i.qZA()),2&n){const t=i.oxw();i.xp6(3),i.Q6J("ngForOf",t.oportunidad.documentos)}}function ti(n,d){if(1&n){const t=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2),i.TgZ(3,"p"),i._uU(4),i._UZ(5,"br"),i._uU(6," (formato PDF) "),i.qZA()(),i.TgZ(7,"ion-button",30),i.NdJ("click",function(){const c=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.click(c.texto))}),i.TgZ(8,"ion-label"),i._uU(9),i.qZA(),i.TgZ(10,"input",31),i.NdJ("change",function(o){const l=i.CHM(t).index,r=i.oxw(2);return i.KtG(r.onFileSelected(o,l))}),i.qZA()()()}if(2&n){const t=d.$implicit,e=d.index,o=i.oxw(2);i.xp6(2),i.hij(" ",t.texto," "),i.xp6(2),i.hij(" ",t.descripcion," "),i.xp6(3),i.Q6J("color",null!=o.files[e]&&o.files[e].uri?"success":"primary"),i.xp6(2),i.Oqu(o.files[e].uri?"Archivo Cargado":"Seleccionar archivo"),i.xp6(1),i.Q6J("id",t.texto)}}function oi(n,d){if(1&n&&(i.TgZ(0,"div")(1,"h5",8),i._uU(2,"Documentos"),i.qZA(),i.YNc(3,ti,11,5,"ion-item",20),i.qZA()),2&n){const t=i.oxw();i.xp6(3),i.Q6J("ngForOf",t.negocio.documentos)}}let ni=(()=>{var n;class d{constructor(e,o,c,l,r){this.modalc=e,this.genericService=o,this.loading=c,this.toast=l,this.alertS=r,this.edit=!1,this.documentosFaltantes=[],this.especialidades=[],this.files=[],this.uri=Z.N.image+"oportunidades-documentos/"}ngOnInit(){console.log(this.oportunidad),this.documentosFaltantes=this.negocio.documentos.filter(e=>!this.oportunidad.documentos.some(o=>(null==o?void 0:o.documento)===e.texto)),this.files=Array(30).fill({documento:null,uri:null})}view(e){var o=this;return(0,u.Z)(function*(){console.log(e),yield(yield o.modalc.create({component:f.w,componentProps:{titulo:e.documento,pdf:e.uri},id:"aaa"})).present()})()}setEspecialidad(e,o){e.detail.checked?(this.especialidades.push(o),this.especialidades=Array.from(new Set(this.especialidades))):this.especialidades=this.especialidades.filter(c=>c!==o)}onFileSelected(e,o){this.files[o]={documento:this.negocio.documentos[o].texto,uri:e.target.files[0]},e.target.value=""}click(e){document.getElementById(e).click()}download(e){const o=document.createElement("a");o.href=this.uri+e.uri,o.download=e.documento,document.body.appendChild(o),o.click(),document.body.removeChild(o)}editar(){var e=this;return(0,u.Z)(function*(){for(const o of e.files)if(o.uri){const c=new FormData;c.append("documento",o.uri);const l=yield e.genericService.postWhitImage("negocio/documentos",c).toPromise();e.oportunidad.documentos.some(s=>o.documento===s.documento)?e.oportunidad.documentos=e.oportunidad.documentos.map(s=>o.documento===s.documento?{documento:o.documento,uri:l.file}:s):(console.log(o),e.oportunidad.documentos.push({documento:o.documento,uri:l.file}))}e.loading.setData({animated:!0,message:"Subiendo...",spinner:"dots"}),yield e.loading.create(),yield e.loading.show(),e.genericService.update("negocio/oportunidad",e.oportunidad.id,{...e.oportunidad,especialidades:e.especialidades}).pipe((0,m.w)(o=>e.genericService.update("negocio/contacto",e.oportunidad.contacto.id,{...e.oportunidad.contacto})),(0,h.b)(function(){var o=(0,u.Z)(function*(c){yield e.loading.hide(),e.toast.success("Espere notificaciones por el correo del contacto","Registro Guardado"),e.edit=!1,e.especialidades=[],e.files=Array(30).fill({documento:null,uri:null})});return function(c){return o.apply(this,arguments)}}())).subscribe()})()}changeEdit(){var e=this;return(0,u.Z)(function*(){var o;e.edit=!e.edit,e.edit?(console.log(e.oportunidad.especialidades),e.especialidades=e.oportunidad.especialidades):yield e.alertS.setData({animated:!0,header:"Guardar Cambios",message:"Todos los cambios que haya realizado se guardaran una vez haya confirmado, \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Guardar Cambios",handler:(o=(0,u.Z)(function*(){yield e.editar()}),function(){return o.apply(this,arguments)})}]})})()}findEspecialidad(e){return!!this.oportunidad.especialidades.some(o=>o==e)}}return(n=d).\u0275fac=function(e){return new(e||n)(i.Y36(a.IN),i.Y36(T.M),i.Y36(A.b),i.Y36(P._W),i.Y36(C.c))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-ver-solicitud"]],inputs:{negocio:"negocio",oportunidad:"oportunidad"},decls:98,vars:35,consts:[[3,"translucent"],["color","secondary"],["color","light","slot","start","expand","block","fill","clear","shape","round",3,"click"],["slot","icon-only","name","close-outline"],["slot","end","color","light","fill","clear",3,"click"],["slot","icon-only",3,"name"],[3,"fullscreen"],[1,"container","mt-3"],[1,"ion-padding","h5",2,"color","red"],["lines","none"],["color","dark","slot","start"],["color","dark","slot","end",4,"ngIf"],["slot","end","labelPlacement","floating","label","Edita ","type","text",3,"readonly","ngModel","ngModelChange",4,"ngIf"],["lines","none",4,"ngIf"],["lines","none","class","ion-padding",4,"ngIf"],[1,"ion-padding","h5","font-weight",2,"color","red"],["color","dark","slot","end"],[4,"ngIf"],["slot","end","labelPlacement","floating","label","Edita ","type","text",3,"readonly","ngModel","ngModelChange"],[2,"color","red"],[4,"ngFor","ngForOf"],["lines","none",1,"ion-padding"],["style","color: red;",4,"ngIf"],["class","m-3",3,"checked","ionChange",4,"ngFor","ngForOf"],[1,"m-3",3,"checked","ionChange"],["lines","none",4,"ngFor","ngForOf"],["slot","start","fill","clear",3,"click"],["slot","icon-only","name","download-outline"],[1,"mb-0","pb-0"],["expand","block","slot","end","shape","round",3,"click"],["expand","block","fill","clear","slot","end",3,"color","click"],["type","file","accept",".pdf",2,"display","none",3,"id","change"]],template:function(e,o){1&e&&(i.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-button",2),i.NdJ("click",function(){return o.modalc.dismiss()}),i._UZ(3,"ion-icon",3),i.qZA(),i.TgZ(4,"ion-title"),i._uU(5),i.qZA(),i.TgZ(6,"ion-button",4),i.NdJ("click",function(){return o.changeEdit()}),i._UZ(7,"ion-icon",5),i.qZA()()(),i.TgZ(8,"ion-content",6)(9,"div",7)(10,"h5",8),i._uU(11,"Informaci\xf3n de la Empresa"),i.qZA(),i.TgZ(12,"ion-item",9)(13,"ion-text",10)(14,"h5"),i._uU(15,"No. Afiliado"),i.qZA()(),i.YNc(16,M,4,1,"ion-text",11),i.YNc(17,q,1,2,"ion-input",12),i.qZA(),i.TgZ(18,"ion-item",9)(19,"ion-text",10)(20,"h5"),i._uU(21,"Empresa"),i.qZA()(),i.YNc(22,E,4,1,"ion-text",11),i.YNc(23,J,1,2,"ion-input",12),i.qZA(),i.TgZ(24,"ion-item",9)(25,"ion-text",10)(26,"h5"),i._uU(27,"Denominaci\xf3n"),i.qZA()(),i.YNc(28,S,4,1,"ion-text",11),i.YNc(29,v,1,2,"ion-input",12),i.qZA(),i.TgZ(30,"ion-item",9)(31,"ion-text",10)(32,"h5"),i._uU(33,"RFC"),i.qZA()(),i.YNc(34,U,4,1,"ion-text",11),i.YNc(35,I,1,2,"ion-input",12),i.qZA(),i.TgZ(36,"ion-item",9)(37,"ion-text",10)(38,"h5"),i._uU(39,"Calle"),i.qZA()(),i.YNc(40,O,4,1,"ion-text",11),i.YNc(41,V,1,2,"ion-input",12),i.qZA(),i.TgZ(42,"ion-item",9)(43,"ion-text",10)(44,"h5"),i._uU(45,"Colonia"),i.qZA()(),i.YNc(46,N,4,1,"ion-text",11),i.YNc(47,w,1,2,"ion-input",12),i.qZA(),i.TgZ(48,"ion-item",9)(49,"ion-text",10)(50,"h5"),i._uU(51,"Municipio"),i.qZA()(),i.YNc(52,Q,4,1,"ion-text",11),i.YNc(53,b,1,2,"ion-input",12),i.qZA(),i.TgZ(54,"ion-item",9)(55,"ion-text",10)(56,"h5"),i._uU(57,"Estado"),i.qZA()(),i.YNc(58,y,4,1,"ion-text",11),i.YNc(59,Y,1,2,"ion-input",12),i.qZA(),i.TgZ(60,"ion-item",9)(61,"ion-text",10)(62,"h5"),i._uU(63,"WebSite"),i.qZA()(),i.YNc(64,D,4,1,"ion-text",11),i.YNc(65,F,1,2,"ion-input",12),i.qZA(),i.YNc(66,k,5,1,"ion-item",13),i.YNc(67,W,4,2,"div",14),i.TgZ(68,"h5",15),i._uU(69,"Informaci\xf3n de Contacto"),i.qZA(),i.TgZ(70,"ion-item",9)(71,"ion-text",10)(72,"h5"),i._uU(73,"Nombre"),i.qZA()(),i.TgZ(74,"ion-text",16)(75,"h5")(76,"b"),i._uU(77),i.qZA()()()(),i.TgZ(78,"ion-item",9)(79,"ion-text",10)(80,"h5"),i._uU(81,"Correo Electr\xf3nico"),i.qZA()(),i.YNc(82,R,4,1,"ion-text",11),i.YNc(83,B,1,2,"ion-input",12),i.qZA(),i.TgZ(84,"ion-item",9)(85,"ion-text",10)(86,"h5"),i._uU(87,"Tel\xe9fono Celular"),i.qZA()(),i.YNc(88,L,4,1,"ion-text",11),i.YNc(89,$,1,2,"ion-input",12),i.qZA(),i.TgZ(90,"ion-item",9)(91,"ion-text",10)(92,"h5"),i._uU(93,"Tel\xe9fono Oficina"),i.qZA()(),i.YNc(94,j,4,1,"ion-text",11),i.YNc(95,z,1,2,"ion-input",12),i.qZA(),i.YNc(96,ii,4,1,"div",17),i.YNc(97,oi,4,1,"div",17),i.qZA()()),2&e&&(i.Q6J("translucent",!0),i.xp6(5),i.hij("Solicitud de ",o.oportunidad.empresa,""),i.xp6(2),i.Q6J("name",o.edit?"save":"pencil"),i.xp6(1),i.Q6J("fullscreen",!0),i.xp6(8),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(1),i.Q6J("ngIf",o.oportunidad.especialidades.length>0&&!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(10),i.lnq("",o.oportunidad.contacto.nombre," ",o.oportunidad.contacto.paterno," ",o.oportunidad.contacto.materno,""),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(5),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit),i.xp6(1),i.Q6J("ngIf",!o.edit),i.xp6(1),i.Q6J("ngIf",o.edit))},dependencies:[p.sg,p.O5,g.JJ,g.On,a.YG,a.nz,a.W2,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.yW,a.wd,a.sr,a.w,a.j9]}),d})()}}]);