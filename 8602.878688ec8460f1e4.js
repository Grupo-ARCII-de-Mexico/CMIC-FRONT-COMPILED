"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8602],{8602:(O,p,a)=>{a.r(p),a.d(p,{UserPageModule:()=>Q});var d=a(6814),g=a(95),i=a(7027),f=a(9085),m=a(5861),h=a(7398),x=a(2181),v=a(9397),U=a(553),e=a(6689),y=a(6533),P=a(930),Z=a(2264),M=a(7153),T=a(2425);function C(t,s){1&t&&(e.TgZ(0,"ion-spinner",6),e._uU(1," Cargando..."),e.qZA())}function J(t,s){1&t&&(e.TgZ(0,"ion-badge"),e._UZ(1,"ion-icon",18),e.qZA())}function _(t,s){if(1&t&&e._UZ(0,"img",19),2&t){const o=e.oxw(2);let n;e.Q6J("src",o.uri+(null!==(n=o.user.foto)&&void 0!==n?n:"avatar.jpg"),e.LSH)}}function I(t,s){if(1&t&&e._UZ(0,"img",19),2&t){const o=e.oxw(2);e.Q6J("src",o.image,e.LSH)}}const A=function(t){return{"bg-gray":t}};function Y(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"ion-card",7)(1,"ion-card-header")(2,"ion-card-subtitle",3)(3,"ion-avatar",8),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.edit?r.img():"")}),e.YNc(4,J,2,0,"ion-badge",9),e.YNc(5,_,1,1,"img",10),e.YNc(6,I,1,1,"img",10),e.qZA()(),e.TgZ(7,"ion-card-title",11)(8,"ion-item",12)(9,"ion-input",13),e.NdJ("ngModelChange",function(r){e.CHM(o);const u=e.oxw();return e.KtG(u.user.names=r)}),e.qZA()()()(),e.TgZ(10,"ion-card-content")(11,"ion-button",14),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.edit=!r.edit)}),e._uU(12," Actualizar Perfil "),e._UZ(13,"ion-icon",15),e.qZA(),e.TgZ(14,"ion-button",16),e._uU(15," Guardar Cambios "),e._UZ(16,"ion-icon",17),e.qZA()()()}if(2&t){const o=e.oxw();e.xp6(4),e.Q6J("ngIf",o.edit),e.xp6(1),e.Q6J("ngIf",!o.edit),e.xp6(1),e.Q6J("ngIf",o.edit),e.xp6(3),e.Q6J("ngClass",e.VKq(6,A,!o.edit))("readonly",!o.edit)("ngModel",o.user.names)}}const b=[{path:"",component:(()=>{var t;class s{constructor(n,r,u,c,l){this.authRepo=n,this.gService=r,this.compress=u,this.load=c,this.toast=l,this.uri=U.N.image+"users/",this.edit=!1}ngOnInit(){this.authRepo.user$.pipe((0,h.U)(n=>n[0]),(0,x.h)(n=>!!n),(0,v.b)(n=>{this.user=n})).subscribe()}img(){var n=this;return(0,m.Z)(function*(){n.image=yield n.compress.returnImageCompress()})()}update(){var n=this;return(0,m.Z)(function*(){yield n.load.setData({animated:!0,spinner:"dots",translucent:!0,message:"Actualizando..."}),yield n.load.create(),yield n.load.show();const r=new FormData,u=n.user;for(const c in u)n.user.hasOwnProperty(c)&&"foto"!==c&&r.append(c,u[c]);n.image&&r.append("foto",n.compress.dataURItoBlob(n.image)),n.gService.updateToken("user",{formData:r}).subscribe(function(){var c=(0,m.Z)(function*(l){yield n.load.show(),n.authRepo.updateUser(l.id,l),n.toast.success("Usuario actualizado")});return function(l){return c.apply(this,arguments)}}())})()}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(y.O),e.Y36(P.M),e.Y36(Z.Y),e.Y36(M.b),e.Y36(T._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user"]],decls:11,vars:3,consts:[[3,"fullscreen"],[1,"mt-5"],[1,"container","px-5"],[1,"d-flex"],["color","primary","class","mx-auto",4,"ngIf"],["class","shadow mx-auto","mode","ios",4,"ngIf"],["color","primary",1,"mx-auto"],["mode","ios",1,"shadow","mx-auto"],[1,"mx-auto","my-3",3,"click"],[4,"ngIf"],[3,"src",4,"ngIf"],[1,"text-center","mb-3"],["lines","none"],["type","text",1,"text-center",3,"ngClass","readonly","ngModel","ngModelChange"],["expand","block","shape","round",1,"my-2",3,"click"],["slot","icon-only","name","create-outline",1,"mx-2"],["expand","block","shape","round",1,"my-2"],["slot","icon-only","name","save-outline",1,"mx-2"],["shape","round","name","add",1,"ms-auto"],[3,"src"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br")(2,"br")(3,"div",1),e.TgZ(4,"div",2)(5,"h1")(6,"b"),e._uU(7,"Mi Cuenta"),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,C,2,0,"ion-spinner",4),e.YNc(10,Y,17,8,"ion-card",5),e.qZA()()()),2&n&&(e.Q6J("fullscreen",!0),e.xp6(9),e.Q6J("ngIf",!r.user),e.xp6(1),e.Q6J("ngIf",r.user))},dependencies:[d.mk,d.O5,g.JJ,g.On,i.BJ,i.yp,i.YG,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.W2,i.gu,i.pK,i.Ie,i.PQ,i.j9],styles:["ion-avatar[_ngcontent-%COMP%]{width:150px;height:150px}.bg-gray[_ngcontent-%COMP%]{background-color:gray;color:#fff;text-align:center}"]}),s})()}];let N=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild(b),f.Bz]}),s})(),Q=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,g.u5,i.Pc,N]}),s})()}}]);