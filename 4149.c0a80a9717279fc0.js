"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4149],{4149:(N,Z,a)=>{a.r(Z),a.d(Z,{VerApoyoPageModule:()=>F});var x=a(6814),P=a(95),c=a(9843),m=a(9085),v=a(5861),A=a(6676),C=a(553),p=a(1486),e=a(6689),V=a(4433),U=a(7153),b=a(2425),E=a(930);function M(r,d){if(1&r){const l=e.EpF();e.TgZ(0,"tr")(1,"th",12),e._UZ(2,"ion-img",13),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"ion-buttons",14)(7,"ion-button",15),e.NdJ("click",function(){const i=e.CHM(l).$implicit,s=e.oxw();return e.KtG(s.vistaPrevia(i.id))}),e._UZ(8,"ion-icon",16),e.qZA(),e.TgZ(9,"ion-button",15),e.NdJ("click",function(){const i=e.CHM(l).$implicit,s=e.oxw();return e.KtG(s.exportToExcel(i.id))}),e._UZ(10,"ion-icon",17),e.qZA(),e.TgZ(11,"ion-button",18),e._UZ(12,"ion-icon",19),e.qZA(),e.TgZ(13,"ion-button",15),e.NdJ("click",function(){const i=e.CHM(l).$implicit,s=e.oxw();return e.KtG(s.deleteEvento(i.id))}),e._UZ(14,"ion-icon",20),e.qZA(),e.TgZ(15,"ion-button",15),e.NdJ("click",function(){const i=e.CHM(l).$implicit,s=e.oxw();return e.KtG(s.cerrarEvento(i.id))}),e._UZ(16,"ion-icon",21),e.qZA()()()()}if(2&r){const l=d.$implicit,n=e.oxw();e.xp6(2),e.Q6J("src",n.uri+l.imagen),e.xp6(2),e.Oqu(l.titulo),e.xp6(7),e.MGl("routerLink","editar-evento/",l.id,"")}}const S=[{path:"",component:(()=>{var r;class d{constructor(n,t,i,s,u){this.nav=n,this.alert=t,this.loading=i,this.toast=s,this.genericService=u,this.uri=C.N.image+"apoyos-dn/",this.eventos=[]}ngOnInit(){this.genericService.getAll("desastres").subscribe(n=>{this.eventos=n})}mon(n){return A(n).locale("es").format("L")+" "+A(new Date(n)).utc().format("LTS")}vistaPrevia(n){var t=this;return(0,v.Z)(function*(){const i=t.eventos.find(s=>s.id===n);i&&window.open(C.N.host+"apoyo/"+i.identificador,"_blank")})()}exportToExcel(n){const t=this.eventos.find(o=>o.id===n);let i=[];for(let o of null==t?void 0:t.apoyos){var s,u,g,y,f,h;i.push({Nombre:o?null==o?void 0:o.nombre:null!==(s=null==o?void 0:o.nombre)&&void 0!==s?s:"",Cargo:o?null==o?void 0:o.cargo:null!==(u=null==o?void 0:o.cargo)&&void 0!==u?u:"",Empresa:o?null==o?void 0:o.empresa:null!==(g=null==o?void 0:o.empresa)&&void 0!==g?g:"",Correo:o?null==o?void 0:o.email:null!==(y=null==o?void 0:o.email)&&void 0!==y?y:"",Tel\u00e9fono:o?null==o?void 0:o.telefono:null!==(f=null==o?void 0:o.telefono)&&void 0!==f?f:"",RFC:o?null==o?void 0:o.rfc:null!==(h=null==o?void 0:o.rfc)&&void 0!==h?h:""}),console.log(i)}if(i){const o=p.P6.json_to_sheet(i),T=p.P6.book_new();p.P6.book_append_sheet(T,o,"Sheet1"),p.NC(T,(null==t?void 0:t.titulo.toUpperCase())+".xlsx")}}deleteEvento(n){var t=this;return(0,v.Z)(function*(){var i;t.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar este evento",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(i=(0,v.Z)(function*(){t.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield t.loading.create(),yield t.loading.show(),t.genericService.delete("desastre",n).subscribe(function(){var s=(0,v.Z)(function*(u){yield t.loading.hide(),t.toast.success("Evento Eliminado")});return function(u){return s.apply(this,arguments)}}())}),function(){return i.apply(this,arguments)})}]}),yield t.alert.create(),yield t.alert.show()})()}cerrarEvento(n){var t=this;return(0,v.Z)(function*(){var i;t.alert.setData({animated:!0,header:"Cerrar Evento",message:"Est\xe1 a punto de cerrar el evento una vez lo haga no podr\xe1 reabrilo \xbfDesea Continuar?",buttons:[{text:"Cancelar"},{text:"Cerrar",handler:(i=(0,v.Z)(function*(){t.genericService.update("desastre",n,{active:!1}).subscribe(s=>{t.eventos=t.eventos.map(u=>u.id===n?s:u)})}),function(){return i.apply(this,arguments)})}]}),yield t.alert.create(),yield t.alert.show()})()}}return(r=d).\u0275fac=function(n){return new(n||r)(e.Y36(c.SH),e.Y36(V.c),e.Y36(U.b),e.Y36(b._W),e.Y36(E.M))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-ver-apoyo"]],decls:24,vars:3,consts:[[3,"fullscreen"],[1,"mt-5","px-3"],[1,"container"],[1,"my-3"],[1,"d-flex","mt-5"],[1,"h4"],["placeholder","Buscar evento","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"debounce"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red","d-none","d-md-block"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center","d-none","d-md-block"],[1,"img-fluid",3,"src"],["color","primary","slot","start"],["color","primary",3,"click"],["slot","icon-only","name","eye-outline"],["slot","icon-only","name","download-outline"],["color","primary",3,"routerLink"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"],["slot","icon-only","name","close-outline"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br")(2,"br"),e.TgZ(3,"div",1)(4,"div",2)(5,"h1",3)(6,"b"),e._uU(7,"Apoyos"),e.qZA()(),e.TgZ(8,"div",4)(9,"h5",5)(10,"b"),e._uU(11,"Apoyos Registrados"),e.qZA()(),e._UZ(12,"ion-searchbar",6),e.qZA(),e.TgZ(13,"table",7)(14,"thead",8)(15,"tr")(16,"th",9),e._uU(17,"Foto"),e.qZA(),e.TgZ(18,"th",10),e._uU(19,"Titulo"),e.qZA(),e.TgZ(20,"th",10),e._uU(21,"Opciones"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,M,17,3,"tr",11),e.qZA()()()()()),2&n&&(e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("debounce",250),e.xp6(11),e.Q6J("ngForOf",t.eventos))},dependencies:[x.sg,c.YG,c.Sm,c.W2,c.gu,c.Xz,c.VI,c.j9,c.YI,m.rH]}),d})()}];let J=(()=>{var r;class d{}return(r=d).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.Bz.forChild(S),m.Bz]}),d})(),F=(()=>{var r;class d{}return(r=d).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[x.ez,P.u5,c.Pc,J]}),d})()}}]);