"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1934],{1934:(H,M,l)=>{l.r(M),l.d(M,{VerNegociosPageModule:()=>D});var E=l(6814),J=l(95),u=l(9843),f=l(9085),d=l(5861),S=l(9397),U=l(553),v=l(1486),e=l(6689),k=l(930),F=l(5368),w=l(2425),R=l(4433);function Y(t,a){if(1&t){const c=e.EpF();e.TgZ(0,"tr")(1,"th",12),e._UZ(2,"ion-img",13),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"ion-buttons",14)(7,"ion-button",15),e.NdJ("click",function(){const i=e.CHM(c).$implicit,n=e.oxw();return e.KtG(n.alerta(i.identificador))}),e._UZ(8,"ion-icon",16),e.qZA(),e.TgZ(9,"ion-button",17),e.NdJ("click",function(){const i=e.CHM(c).$implicit,n=e.oxw();return e.KtG(n.vistaPrevia(i.id))}),e._UZ(10,"ion-icon",18),e.qZA(),e.TgZ(11,"ion-button",17),e.NdJ("click",function(){const i=e.CHM(c).$implicit,n=e.oxw();return e.KtG(n.exportToExcel(i.empresa,i.oportunidadNegocio))}),e._UZ(12,"ion-icon",19),e.qZA(),e.TgZ(13,"ion-button",20),e._UZ(14,"ion-icon",21),e.qZA(),e.TgZ(15,"ion-button",17),e.NdJ("click",function(){const i=e.CHM(c).$implicit,n=e.oxw();return e.KtG(n.delete(i.id))}),e._UZ(16,"ion-icon",22),e.qZA()()()()}if(2&t){const c=a.$implicit,o=e.oxw();e.xp6(2),e.Q6J("src",o.uri+c.logotipo),e.xp6(2),e.Oqu(null==c?null:c.empresa),e.xp6(9),e.s9C("routerLink",c.identificador)}}const G=[{path:"",component:(()=>{var t;class a{constructor(o,r,i,n){this.gService=o,this.negocioRepo=r,this.toast=i,this.alerts=n,this.negocios=[],this.uri=U.N.image+"oportunidades-logotipos/"}ngOnInit(){this.gService.getAll("negocio").subscribe(o=>{this.negocioRepo.setNegocio(o)}),this.negocioRepo.negocio$.pipe((0,S.b)(o=>this.negocios=o)).subscribe()}vistaPrevia(o){var r=this;return(0,d.Z)(function*(){const i=r.negocios.find(n=>n.id===o);i&&window.open(U.N.host+"oportunidad-negocio/"+i.identificador,"_blank")})()}delete(o){var r=this;return(0,d.Z)(function*(){var i;yield r.alerts.setData({animated:!0,header:"Eliminar ON",message:"\xbfDesea Eliminar esta ON?",buttons:[{text:"Cancelar"},{text:"Eliminar",handler:(i=(0,d.Z)(function*(){r.gService.delete("negocio",o).subscribe(function(){var n=(0,d.Z)(function*(g){r.negocios=r.negocios.filter(m=>m.id!==o),r.toast.success("ON eliminada","Eliminado")});return function(g){return n.apply(this,arguments)}}())}),function(){return i.apply(this,arguments)})}]})})()}exportToExcel(o,r){let i=[];for(let s of r){var n,g,m,p,h,x,Z,N,y,C,P,b,T,A,V;i.push({Empresa:null!==(n=s.empresa)&&void 0!==n?n:"","No. Afiliado":null!==(g=s.afiliado)&&void 0!==g?g:"",Calle:null!==(m=s.calle)&&void 0!==m?m:"",Colonia:null!==(p=s.colonia)&&void 0!==p?p:"","Alcald\xeda / Municipio":null!==(h=s.municipio)&&void 0!==h?h:"",Estado:null!==(x=s.estado)&&void 0!==x?x:"","C\xf3digo Postal":null!==(Z=s.cp)&&void 0!==Z?Z:"",Denominaci\u00f3n:null!==(N=s.denominacion)&&void 0!==N?N:"","Sitio Web":null!==(y=s.web)&&void 0!==y?y:"","Nombre de Contacto":null!==(C=s.contacto.nombre)&&void 0!==C?C:"","Apellido Paterno Contacto":null!==(P=s.contacto.paterno)&&void 0!==P?P:"","Apellido Materno de Contacto":null!==(b=s.contacto.materno)&&void 0!==b?b:"","Telefono1 de Contacto":null!==(T=s.contacto.telefono)&&void 0!==T?T:"","Telefono 2 de Contacto":null!==(A=s.contacto.telefonoOficina)&&void 0!==A?A:"","Correo de Contacto":null!==(V=s.contacto.email)&&void 0!==V?V:""})}if(i){const s=v.P6.json_to_sheet(i),O=v.P6.book_new();v.P6.book_append_sheet(O,s,"Sheet1"),v.NC(O,o+".xlsx")}}alerta(o){var r=this;return(0,d.Z)(function*(){var i;yield r.alerts.setData({animated:!0,header:"Enviar Acceso a la Empresa",message:"Agregue el correo a quien desea enviar el acceso (Si vuelve a mandar este correo el acceso anterior ser\xe1 eliminado)",backdropDismiss:!1,inputs:[{type:"email",name:"password",placeholder:"Ingrese el correo"}],buttons:[{text:"Enviar contrase\xf1a",handler:(i=(0,d.Z)(function*(n){return!!(yield r.gService.post("negocio/sendPassword/"+o,{email:n.password}).toPromise().catch(function(){var m=(0,d.Z)(function*(p){});return function(p){return m.apply(this,arguments)}}()))}),function(g){return i.apply(this,arguments)})}]})})()}}return(t=a).\u0275fac=function(o){return new(o||t)(e.Y36(k.M),e.Y36(F.v),e.Y36(w._W),e.Y36(R.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-ver-negocios"]],decls:24,vars:3,consts:[[3,"fullscreen"],[1,"mt-5","px-3"],[1,"container"],[1,"my-3"],[1,"d-flex","mt-5"],[1,"h4"],["placeholder","Buscar Oportunidad de Negocio","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"debounce"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red","d-none","d-md-block"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center","d-none","d-md-block"],[1,"img-fluid",3,"src"],["color","primary","slot","start"],["color","primary",1,"d-none",3,"click"],["slot","icon-only","name","send-outline"],["color","primary",3,"click"],["slot","icon-only","name","eye-outline"],["slot","icon-only","name","download-outline"],["color","primary",3,"routerLink"],["slot","icon-only","name","people-outline"],["slot","icon-only","name","trash-outline"]],template:function(o,r){1&o&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br")(2,"br"),e.TgZ(3,"div",1)(4,"div",2)(5,"h1",3)(6,"b"),e._uU(7,"Oportunidades de Negocio"),e.qZA()(),e.TgZ(8,"div",4)(9,"h5",5)(10,"b"),e._uU(11,"Eventos Registrados"),e.qZA()(),e._UZ(12,"ion-searchbar",6),e.qZA(),e.TgZ(13,"table",7)(14,"thead",8)(15,"tr")(16,"th",9),e._uU(17,"Foto"),e.qZA(),e.TgZ(18,"th",10),e._uU(19,"Empresa"),e.qZA(),e.TgZ(20,"th",10),e._uU(21,"Opciones"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,Y,17,3,"tr",11),e.qZA()()()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("debounce",250),e.xp6(11),e.Q6J("ngForOf",r.negocios))},dependencies:[E.sg,u.YG,u.Sm,u.W2,u.gu,u.Xz,u.VI,u.j9,u.YI,f.rH],styles:[".img-fluid[_ngcontent-%COMP%]{max-width:200px}.red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),a})()}];let B=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild(G),f.Bz]}),a})(),D=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[E.ez,J.u5,u.Pc,B]}),a})()}}]);