"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7446],{7446:(no,x,l)=>{l.d(x,{H:()=>io});var u=l(5861),f=l(1842),m=l(4664),h=l(9397),o=l(6689),_=l(9843),Z=l(930),T=l(7153),A=l(2425),P=l(4433),p=l(6814),g=l(95);function C(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.afiliado)}}function M(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.afiliado=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.afiliado)}}function q(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.empresa)}}function J(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.empresa=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.empresa)}}function S(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.denominacion)}}function E(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.denominacion=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.denominacion)}}function v(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.rfc)}}function U(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.rfc=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.rfc)}}function V(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.calle)}}function w(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.calle=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.calle)}}function I(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.colonia)}}function O(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.colonia=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.colonia)}}function N(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.municipio)}}function Q(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.municipio=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.municipio)}}function b(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.estado)}}function y(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.estado=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.estado)}}function Y(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.web)}}function F(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.web=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.web)}}function D(n,d){if(1&n&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&n){const t=d.$implicit;o.xp6(1),o.Oqu(t)}}function K(n,d){if(1&n&&(o.TgZ(0,"ion-item",9)(1,"ion-label",10)(2,"h5",19),o._uU(3,"Especialidades"),o.qZA(),o.YNc(4,D,2,1,"p",20),o.qZA()()),2&n){const t=o.oxw();o.xp6(4),o.Q6J("ngForOf",t.oportunidad.especialidades)}}function k(n,d){1&n&&(o.TgZ(0,"h5",19),o._uU(1,"Especialidades"),o.qZA())}function G(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-checkbox",24),o.NdJ("ionChange",function(i){const a=o.CHM(t).$implicit,r=o.oxw(2);return o.KtG(r.setEspecialidad(i,a))}),o._uU(1),o.qZA()}if(2&n){const t=d.$implicit,e=o.oxw(2);o.Q6J("checked",e.findEspecialidad(t)),o.xp6(1),o.Oqu(t)}}function H(n,d){if(1&n&&(o.TgZ(0,"div",21),o.YNc(1,k,2,0,"h5",22),o._UZ(2,"br"),o.YNc(3,G,2,2,"ion-checkbox",23),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.negocio.especialidades.length>0),o.xp6(2),o.Q6J("ngForOf",null==t.negocio?null:t.negocio.especialidades)}}function W(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.contacto.email)}}function R(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.contacto.email=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.contacto.email)}}function B(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.contacto.telefono)}}function L(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.contacto.telefono=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.contacto.telefono)}}function $(n,d){if(1&n&&(o.TgZ(0,"ion-text",16)(1,"h5")(2,"b"),o._uU(3),o.qZA()()()),2&n){const t=o.oxw();o.xp6(3),o.Oqu(t.oportunidad.contacto.telefonoOficina)}}function j(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-input",18),o.NdJ("ngModelChange",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.oportunidad.contacto.telefonoOficina=i)}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("readonly",!t.edit)("ngModel",t.oportunidad.contacto.telefonoOficina)}}function z(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-item",9)(1,"ion-button",26),o.NdJ("click",function(){const c=o.CHM(t).$implicit,a=o.oxw(2);return o.KtG(a.download(c))}),o._UZ(2,"ion-icon",27),o.qZA(),o.TgZ(3,"ion-text",10)(4,"h5",28),o._uU(5),o.qZA()(),o.TgZ(6,"ion-button",29),o.NdJ("click",function(){const c=o.CHM(t).$implicit,a=o.oxw(2);return o.KtG(a.view(c))}),o._uU(7," Ver Archivo "),o.qZA()()}if(2&n){const t=d.$implicit;o.xp6(5),o.Oqu(t.documento)}}function X(n,d){if(1&n&&(o.TgZ(0,"div")(1,"h5",8),o._uU(2,"Documentos"),o.qZA(),o.YNc(3,z,8,1,"ion-item",25),o.qZA()),2&n){const t=o.oxw();o.xp6(3),o.Q6J("ngForOf",t.oportunidad.documentos)}}function oo(n,d){if(1&n){const t=o.EpF();o.TgZ(0,"ion-item")(1,"ion-label"),o._uU(2),o.TgZ(3,"p"),o._uU(4),o._UZ(5,"br"),o._uU(6," (formato PDF) "),o.qZA()(),o.TgZ(7,"ion-button",30),o.NdJ("click",function(){const c=o.CHM(t).$implicit,a=o.oxw(2);return o.KtG(a.click(c.texto))}),o.TgZ(8,"ion-label"),o._uU(9),o.qZA(),o.TgZ(10,"input",31),o.NdJ("change",function(i){const a=o.CHM(t).index,r=o.oxw(2);return o.KtG(r.onFileSelected(i,a))}),o.qZA()()()}if(2&n){const t=d.$implicit,e=d.index,i=o.oxw(2);o.xp6(2),o.hij(" ",t.texto," "),o.xp6(2),o.hij(" ",t.descripcion," "),o.xp6(3),o.Q6J("color",null!=i.files[e]&&i.files[e].uri?"success":"primary"),o.xp6(2),o.Oqu(i.files[e].uri?"Archivo Cargado":"Seleccionar archivo"),o.xp6(1),o.Q6J("id",t.texto)}}function to(n,d){if(1&n&&(o.TgZ(0,"div")(1,"h5",8),o._uU(2,"Documentos"),o.qZA(),o.YNc(3,oo,11,5,"ion-item",20),o.qZA()),2&n){const t=o.oxw();o.xp6(3),o.Q6J("ngForOf",t.negocio.documentos)}}let io=(()=>{var n;class d{constructor(e,i,c,a,r){this.modalc=e,this.genericService=i,this.loading=c,this.toast=a,this.alertS=r,this.edit=!1,this.documentosFaltantes=[],this.especialidades=[],this.files=[]}ngOnInit(){console.log(this.oportunidad),this.documentosFaltantes=this.negocio.documentos.filter(e=>!this.oportunidad.documentos.some(i=>(null==i?void 0:i.documento)===e.texto)),this.files=Array(30).fill({documento:null,uri:null})}view(e){var i=this;return(0,u.Z)(function*(){console.log(e),yield(yield i.modalc.create({component:f.w,componentProps:{titulo:e.documento,pdf:e.uri},id:"aaa"})).present()})()}setEspecialidad(e,i){e.detail.checked?(this.especialidades.push(i),this.especialidades=Array.from(new Set(this.especialidades))):this.especialidades=this.especialidades.filter(c=>c!==i)}onFileSelected(e,i){this.files[i]={documento:this.negocio.documentos[i].texto,uri:e.target.files[0]},e.target.value=""}click(e){document.getElementById(e).click()}download(e){const i=document.createElement("a");i.href=e.uri,i.download=e.documento,document.body.appendChild(i),i.click(),document.body.removeChild(i)}editar(){var e=this;return(0,u.Z)(function*(){for(const i of e.files)if(i.uri){const c=new FormData;c.append("documento",i.uri);const a=yield e.genericService.postWhitImage("negocio/documentos",c).toPromise();e.oportunidad.documentos.some(s=>i.documento===s.documento)?e.oportunidad.documentos=e.oportunidad.documentos.map(s=>i.documento===s.documento?{documento:i.documento,uri:a.file}:s):(console.log(i),e.oportunidad.documentos.push({documento:i.documento,uri:a.file}))}e.loading.setData({animated:!0,message:"Subiendo...",spinner:"dots"}),yield e.loading.create(),yield e.loading.show(),e.genericService.update("negocio/oportunidad",e.oportunidad.id,{...e.oportunidad,especialidades:e.especialidades}).pipe((0,m.w)(i=>e.genericService.update("negocio/contacto",e.oportunidad.contacto.id,{...e.oportunidad.contacto})),(0,h.b)(function(){var i=(0,u.Z)(function*(c){yield e.loading.hide(),e.toast.success("Espere notificaciones por el correo del contacto","Registro Guardado"),e.edit=!1,e.especialidades=[],e.files=Array(30).fill({documento:null,uri:null})});return function(c){return i.apply(this,arguments)}}())).subscribe()})()}changeEdit(){var e=this;return(0,u.Z)(function*(){var i;e.edit=!e.edit,e.edit?(console.log(e.oportunidad.especialidades),e.especialidades=e.oportunidad.especialidades):(e.alertS.setData({animated:!0,header:"Guardar Cambios",message:"Todos los cambios que haya realizado se guardaran una vez haya confirmado, \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Guardar Cambios",handler:(i=(0,u.Z)(function*(){yield e.editar()}),function(){return i.apply(this,arguments)})}]}),yield e.alertS.create(),yield e.alertS.show())})()}findEspecialidad(e){return!!this.oportunidad.especialidades.some(i=>i==e)}}return(n=d).\u0275fac=function(e){return new(e||n)(o.Y36(_.IN),o.Y36(Z.M),o.Y36(T.b),o.Y36(A._W),o.Y36(P.c))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-ver-solicitud"]],inputs:{negocio:"negocio",oportunidad:"oportunidad"},decls:98,vars:35,consts:[[3,"translucent"],["color","secondary"],["color","light","slot","start","expand","block","fill","clear","shape","round",3,"click"],["slot","icon-only","name","close-outline"],["slot","end","color","light","fill","clear",3,"click"],["slot","icon-only",3,"name"],[3,"fullscreen"],[1,"container","mt-3"],[1,"ion-padding","h5",2,"color","red"],["lines","none"],["color","dark","slot","start"],["color","dark","slot","end",4,"ngIf"],["slot","end","labelPlacement","floating","label","Edita ","type","text",3,"readonly","ngModel","ngModelChange",4,"ngIf"],["lines","none",4,"ngIf"],["lines","none","class","ion-padding",4,"ngIf"],[1,"ion-padding","h5","font-weight",2,"color","red"],["color","dark","slot","end"],[4,"ngIf"],["slot","end","labelPlacement","floating","label","Edita ","type","text",3,"readonly","ngModel","ngModelChange"],[2,"color","red"],[4,"ngFor","ngForOf"],["lines","none",1,"ion-padding"],["style","color: red;",4,"ngIf"],["class","m-3",3,"checked","ionChange",4,"ngFor","ngForOf"],[1,"m-3",3,"checked","ionChange"],["lines","none",4,"ngFor","ngForOf"],["slot","start","fill","clear",3,"click"],["slot","icon-only","name","download-outline"],[1,"mb-0","pb-0"],["expand","block","slot","end","shape","round",3,"click"],["expand","block","fill","clear","slot","end",3,"color","click"],["type","file","accept",".pdf",2,"display","none",3,"id","change"]],template:function(e,i){1&e&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-button",2),o.NdJ("click",function(){return i.modalc.dismiss()}),o._UZ(3,"ion-icon",3),o.qZA(),o.TgZ(4,"ion-title"),o._uU(5),o.qZA(),o.TgZ(6,"ion-button",4),o.NdJ("click",function(){return i.changeEdit()}),o._UZ(7,"ion-icon",5),o.qZA()()(),o.TgZ(8,"ion-content",6)(9,"div",7)(10,"h5",8),o._uU(11,"Informaci\xf3n de la Empresa"),o.qZA(),o.TgZ(12,"ion-item",9)(13,"ion-text",10)(14,"h5"),o._uU(15,"No. Afiliado"),o.qZA()(),o.YNc(16,C,4,1,"ion-text",11),o.YNc(17,M,1,2,"ion-input",12),o.qZA(),o.TgZ(18,"ion-item",9)(19,"ion-text",10)(20,"h5"),o._uU(21,"Empresa"),o.qZA()(),o.YNc(22,q,4,1,"ion-text",11),o.YNc(23,J,1,2,"ion-input",12),o.qZA(),o.TgZ(24,"ion-item",9)(25,"ion-text",10)(26,"h5"),o._uU(27,"Denominaci\xf3n"),o.qZA()(),o.YNc(28,S,4,1,"ion-text",11),o.YNc(29,E,1,2,"ion-input",12),o.qZA(),o.TgZ(30,"ion-item",9)(31,"ion-text",10)(32,"h5"),o._uU(33,"RFC"),o.qZA()(),o.YNc(34,v,4,1,"ion-text",11),o.YNc(35,U,1,2,"ion-input",12),o.qZA(),o.TgZ(36,"ion-item",9)(37,"ion-text",10)(38,"h5"),o._uU(39,"Calle"),o.qZA()(),o.YNc(40,V,4,1,"ion-text",11),o.YNc(41,w,1,2,"ion-input",12),o.qZA(),o.TgZ(42,"ion-item",9)(43,"ion-text",10)(44,"h5"),o._uU(45,"Colonia"),o.qZA()(),o.YNc(46,I,4,1,"ion-text",11),o.YNc(47,O,1,2,"ion-input",12),o.qZA(),o.TgZ(48,"ion-item",9)(49,"ion-text",10)(50,"h5"),o._uU(51,"Municipio"),o.qZA()(),o.YNc(52,N,4,1,"ion-text",11),o.YNc(53,Q,1,2,"ion-input",12),o.qZA(),o.TgZ(54,"ion-item",9)(55,"ion-text",10)(56,"h5"),o._uU(57,"Estado"),o.qZA()(),o.YNc(58,b,4,1,"ion-text",11),o.YNc(59,y,1,2,"ion-input",12),o.qZA(),o.TgZ(60,"ion-item",9)(61,"ion-text",10)(62,"h5"),o._uU(63,"WebSite"),o.qZA()(),o.YNc(64,Y,4,1,"ion-text",11),o.YNc(65,F,1,2,"ion-input",12),o.qZA(),o.YNc(66,K,5,1,"ion-item",13),o.YNc(67,H,4,2,"div",14),o.TgZ(68,"h5",15),o._uU(69,"Informaci\xf3n de Contacto"),o.qZA(),o.TgZ(70,"ion-item",9)(71,"ion-text",10)(72,"h5"),o._uU(73,"Nombre"),o.qZA()(),o.TgZ(74,"ion-text",16)(75,"h5")(76,"b"),o._uU(77),o.qZA()()()(),o.TgZ(78,"ion-item",9)(79,"ion-text",10)(80,"h5"),o._uU(81,"Correo Electr\xf3nico"),o.qZA()(),o.YNc(82,W,4,1,"ion-text",11),o.YNc(83,R,1,2,"ion-input",12),o.qZA(),o.TgZ(84,"ion-item",9)(85,"ion-text",10)(86,"h5"),o._uU(87,"Tel\xe9fono Celular"),o.qZA()(),o.YNc(88,B,4,1,"ion-text",11),o.YNc(89,L,1,2,"ion-input",12),o.qZA(),o.TgZ(90,"ion-item",9)(91,"ion-text",10)(92,"h5"),o._uU(93,"Tel\xe9fono Oficina"),o.qZA()(),o.YNc(94,$,4,1,"ion-text",11),o.YNc(95,j,1,2,"ion-input",12),o.qZA(),o.YNc(96,X,4,1,"div",17),o.YNc(97,to,4,1,"div",17),o.qZA()()),2&e&&(o.Q6J("translucent",!0),o.xp6(5),o.hij("Solicitud de ",i.oportunidad.empresa,""),o.xp6(2),o.Q6J("name",i.edit?"save":"pencil"),o.xp6(1),o.Q6J("fullscreen",!0),o.xp6(8),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(1),o.Q6J("ngIf",i.oportunidad.especialidades.length>0&&!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(10),o.lnq("",i.oportunidad.contacto.nombre," ",i.oportunidad.contacto.paterno," ",null==i.oportunidad||null==i.oportunidad.contacto?null:i.oportunidad.contacto.materno,""),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(5),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit),o.xp6(1),o.Q6J("ngIf",!i.edit),o.xp6(1),o.Q6J("ngIf",i.edit))},dependencies:[p.sg,p.O5,g.JJ,g.On,_.YG,_.nz,_.W2,_.Gu,_.gu,_.pK,_.Ie,_.Q$,_.yW,_.wd,_.sr,_.w,_.j9]}),d})()}}]);