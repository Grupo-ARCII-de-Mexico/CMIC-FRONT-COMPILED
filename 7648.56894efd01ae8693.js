"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7648],{7648:(k,f,o)=>{o.r(f),o.d(f,{VerLicitacionesPageModule:()=>S});var h=o(6814),x=o(95),l=o(9843),g=o(9085),d=o(5861),Z=o(1486),v=o(6676),e=o(6689),L=o(2338),T=o(930),P=o(4433),b=o(7153),A=o(2425);function V(n,r){if(1&n){const c=e.EpF();e.TgZ(0,"tr")(1,"th",16),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"ion-buttons",17)(9,"ion-button",18),e._UZ(10,"ion-icon",19),e.qZA(),e.TgZ(11,"ion-button",20),e.NdJ("click",function(){const a=e.CHM(c).$implicit,s=e.oxw();return e.KtG(s.deleteEvento(a.id))}),e._UZ(12,"ion-icon",21),e.qZA()()()()}if(2&n){const c=r.$implicit;e.xp6(2),e.hij(" ",c.codigoContrato," "),e.xp6(2),e.Oqu(c.noProcedimiento),e.xp6(2),e.Oqu(c.dependencia),e.xp6(3),e.MGl("routerLink","editar-licitaciones/",c.id,"")}}const C=function(){return["/dashboard/licitaciones/crear-licitaciones"]},U=[{path:"",component:(()=>{var n;class r{constructor(t,i,a,s,u){this.licitacionRepo=t,this.genericService=i,this.alert=a,this.loading=s,this.toast=u,this.licitaciones=[]}ngOnInit(){this.licitacionRepo.licitaciones$.subscribe(t=>{this.licitaciones=t,console.log(t)})}mon(t){return v(t).locale("es").format("L")+" "+v(new Date(t)).utc().format("LTS")}deleteEvento(t){var i=this;return(0,d.Z)(function*(){var a;yield i.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar esta licitaci\xf3n",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(a=(0,d.Z)(function*(){i.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield i.loading.create(),yield i.loading.show(),i.genericService.delete("licitaciones",t).subscribe(function(){var s=(0,d.Z)(function*(u){yield i.loading.hide(),i.toast.success("Licitaci\xf3n Eliminada"),i.licitacionRepo.deleteLicitacion(t)});return function(u){return s.apply(this,arguments)}}())}),function(){return a.apply(this,arguments)})}]})})()}onFileSelected(t){var i=this;return(0,d.Z)(function*(){if(i.loading.setData({animated:!0,message:"Cargando licitaciones",spinner:"dots"}),yield i.loading.create(),yield i.loading.show(),i.file={documento:"file",uri:t.target.files[0]},i.file){const a=new FileReader;a.onload=function(){var s=(0,d.Z)(function*(u){const y=Z.ij(u.target.result,{type:"binary"});let m=Z.P6.sheet_to_json(y.Sheets[y.SheetNames[0]],{header:1});m=m.filter(J=>J.some(p=>null!=p&&""!==p)),console.log(m),yield i.loading.hide()});return function(u){return s.apply(this,arguments)}}(),a.readAsBinaryString(i.file.uri)}})()}click(t){document.getElementById(t).click()}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(L.X),e.Y36(T.M),e.Y36(P.c),e.Y36(b.b),e.Y36(A._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ver-licitaciones"]],decls:34,vars:7,consts:[[3,"fullscreen"],[1,"mt-5","px-3"],[1,"container"],[1,"my-3"],[1,"d-flex"],["shape","round","expand","block",1,"mx-auto",3,"color","click"],["id","in","type","file","accept",".xls, .cvc, .xlsx",2,"display","none",3,"change"],["routerLinkActive","router-link-active","shape","round",1,"mx-auto",3,"routerLink"],[1,"d-flex","mt-5"],[1,"h4"],["placeholder","Buscar licitaci\xf3n","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"debounce"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red","d-none","d-md-block"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center"],["color","primary","slot","start"],["color","primary",3,"routerLink"],["slot","icon-only","name","create-outline"],["color","primary",3,"click"],["slot","icon-only","name","trash-outline"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br")(2,"br"),e.TgZ(3,"div",1)(4,"div",2)(5,"h1",3)(6,"b"),e._uU(7,"Licitaciones"),e.qZA()(),e.TgZ(8,"div",4)(9,"ion-button",5),e.NdJ("click",function(){return i.click("in")}),e.TgZ(10,"ion-label"),e._uU(11),e.qZA(),e.TgZ(12,"input",6),e.NdJ("change",function(s){return i.onFileSelected(s)}),e.qZA()(),e.TgZ(13,"ion-button",7),e._uU(14," Crear Licitaci\xf3n "),e.qZA()(),e.TgZ(15,"div",8),e._UZ(16,"hr"),e.TgZ(17,"h5",9)(18,"b"),e._uU(19,"Licitaciones Registradas"),e.qZA()(),e._UZ(20,"ion-searchbar",10),e.qZA(),e.TgZ(21,"table",11)(22,"thead",12)(23,"tr")(24,"th",13),e._uU(25,"No. Contrato"),e.qZA(),e.TgZ(26,"th",14),e._uU(27,"No. Procedimiento"),e.qZA(),e.TgZ(28,"th",14),e._uU(29,"Dependencia"),e.qZA(),e.TgZ(30,"th",14),e._uU(31,"Opciones"),e.qZA()()(),e.TgZ(32,"tbody"),e.YNc(33,V,13,4,"tr",15),e.qZA()()()()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(9),e.Q6J("color",null!=i.file&&i.file.uri?"success":"primary"),e.xp6(2),e.Oqu(null!=i.file&&i.file.uri?"Archivo Cargado":"Subir Licitaciones"),e.xp6(2),e.Q6J("routerLink",e.DdM(6,C)),e.xp6(7),e.Q6J("debounce",250),e.xp6(13),e.Q6J("ngForOf",i.licitaciones))},dependencies:[h.sg,l.YG,l.Sm,l.W2,l.gu,l.Q$,l.VI,l.j9,l.YI,g.rH,g.Od],styles:["ion-searchbar[_ngcontent-%COMP%]{width:250px;border-radius:15px!important;border-start-end-radius:10px}ion-img[_ngcontent-%COMP%]{width:150px}.red[_ngcontent-%COMP%]{background-color:red;color:#fff}"]}),r})()}];let M=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(U),g.Bz]}),r})(),S=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.ez,x.u5,l.Pc,M]}),r})()}}]);