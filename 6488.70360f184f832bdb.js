"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(T,m,t)=>{t.r(m),t.d(m,{LoginPageModule:()=>F});var v=t(6814),a=t(95),r=t(7027),f=t(9085),g=t(5861),p=t(6306),h=t(9773),y=t(9397),P=t(3843),d=t(553),o=t(6689),w=t(7153),Z=t(3614),C=t(930),L=t(1328);const S=[{path:"",component:(()=>{var e;class l{constructor(n,i,s,u,M,J){this.fb=n,this.loading=i,this.toast=s,this.genericService=u,this.errorService=M,this.navController=J,this.viewPassword=!1}ngOnInit(){this.loginForm=this.fb.group({email:[null,a.kI.required],password:[null,a.kI.required]}),this.loading.setData({animated:!0,backdropDismiss:!1,message:"Iniciando Sesi\xf3n",spinner:"crescent"}),localStorage.getItem(d.N.jwt)&&(0,P.r)(localStorage.getItem(d.N.jwt)||"")&&this.navController.navigateForward("/dashboard")}login(){var n=this;return(0,g.Z)(function*(){yield n.loading.create(),yield n.loading.show(),n.genericService.post("user/login",n.loginForm.value).pipe((0,p.K)(function(){var i=(0,g.Z)(function*(s){return yield n.errorService.catchError(s),yield n.loading.hide(),{user:{names:""},jwt:"undefined"}});return function(s){return i.apply(this,arguments)}}()),(0,h.R)(n.errorService.next),(0,y.b)(function(){var i=(0,g.Z)(function*({user:s,jwt:u}){n.toast.setData({message:"Bienvenido: "+s.names,duration:3e3,color:"success"}),yield n.loading.hide(),yield n.toast.create(),yield n.toast.show(),localStorage.setItem(d.N.jwt,u),n.navController.navigateForward("/dashboard",{animated:!0})});return function(s){return i.apply(this,arguments)}}())).subscribe()})()}}return(e=l).\u0275fac=function(n){return new(n||e)(o.Y36(a.qu),o.Y36(w.b),o.Y36(Z.k),o.Y36(C.M),o.Y36(L.T),o.Y36(r.SH))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:16,vars:5,consts:[[3,"fullscreen"],[1,"h-100","d-flex","fondo"],["mode","ios",1,"m-auto"],[1,"d-flex"],["src","https://www.cmiccdmx.org/wp-content/uploads/2021/08/logo-cmic.png",1,"img-fluid","mx-auto","my-4"],[3,"formGroup","ngSubmit"],["label","Correo","labelPlacement","floating","required","","formControlName","email","type","text"],["label","Contrase\xf1a","labelPlacement","floating","required","","formControlName","password",3,"type"],["fill","clear",3,"click"],["slot","icon-only",3,"name"],[1,"d-flex","my-3"],["block","","color","primary","shape","round","type","submit",1,"mx-auto",3,"disabled"]],template:function(n,i){1&n&&(o.TgZ(0,"ion-content",0)(1,"div",1)(2,"ion-card",2)(3,"ion-card-header",3),o._UZ(4,"ion-img",4),o.qZA(),o.TgZ(5,"ion-card-content")(6,"form",5),o.NdJ("ngSubmit",function(){return i.login()}),o.TgZ(7,"ion-item"),o._UZ(8,"ion-input",6),o.qZA(),o.TgZ(9,"ion-item"),o._UZ(10,"ion-input",7),o.TgZ(11,"ion-button",8),o.NdJ("click",function(){return i.viewPassword=!i.viewPassword}),o._UZ(12,"ion-icon",9),o.qZA()(),o.TgZ(13,"div",10)(14,"ion-button",11),o._uU(15," Iniciar sesi\xf3n "),o.qZA()()()()()()()),2&n&&(o.Q6J("fullscreen",!0),o.xp6(6),o.Q6J("formGroup",i.loginForm),o.xp6(4),o.Q6J("type",i.viewPassword?"text":"password"),o.xp6(2),o.Q6J("name",i.viewPassword?"eye-off-outline":"eye-outline"),o.xp6(2),o.Q6J("disabled",i.loginForm.invalid))},dependencies:[a._Y,a.JJ,a.JL,a.Q7,a.sg,a.u,r.YG,r.PM,r.FN,r.Zi,r.W2,r.gu,r.Xz,r.pK,r.Ie,r.j9],styles:["ion-img[_ngcontent-%COMP%]{width:250px}.fondo[_ngcontent-%COMP%]{background-image:url(https://www.cmic.org.mx/sectores/comunicacion/noticias/fotografias/Fachada%20CMIC%20800.jpg);background-repeat:no-repeat;background-size:cover}.rounded[_ngcontent-%COMP%]{border-radius:10px}"]}),l})()}];let b=(()=>{var e;class l{}return(e=l).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[f.Bz.forChild(S),f.Bz]}),l})(),F=(()=>{var e;class l{}return(e=l).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[v.ez,a.u5,a.UX,r.Pc,b]}),l})()}}]);