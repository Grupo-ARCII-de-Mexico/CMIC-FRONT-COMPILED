(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1842],{1842:(Y,r,x)=>{"use strict";x.d(r,{w:()=>K});var n=x(553),h=x(6689),T=x(9843),N=x(4684);let K=(()=>{var P;class M{constructor(j){this.modalc=j,this.titulo="JUAN",this.uri=n.N.image+"oportunidades-documentos/"}ngOnInit(){console.log(this.uri+this.pdf)}}return(P=M).\u0275fac=function(j){return new(j||P)(h.Y36(T.IN))},P.\u0275cmp=h.Xpm({type:P,selectors:[["app-visor-pdf"]],inputs:{titulo:"titulo",pdf:"pdf"},decls:8,vars:6,consts:[[3,"translucent"],["color","dark"],["color","light","slot","start","expand","block","fill","clear","shape","round",3,"click"],["slot","icon-only","name","close-outline"],[3,"fullscreen"],[2,"display","block","min-height","100%",3,"src","render-text","original-size"]],template:function(j,O){1&j&&(h.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-button",2),h.NdJ("click",function(){return O.modalc.dismiss()}),h._UZ(3,"ion-icon",3),h.qZA(),h.TgZ(4,"ion-title"),h._uU(5),h.qZA()()(),h.TgZ(6,"ion-content",4),h._UZ(7,"pdf-viewer",5),h.qZA()),2&j&&(h.Q6J("translucent",!0),h.xp6(5),h.Oqu(O.titulo),h.xp6(1),h.Q6J("fullscreen",!0),h.xp6(1),h.Q6J("src",O.uri+O.pdf)("render-text",!0)("original-size",!0))},dependencies:[T.YG,T.W2,T.Gu,T.gu,T.wd,T.sr,N.rQ]}),M})()},9627:(module,__unused_webpack_exports,__webpack_require__)=>{var _classStaticPrivateMethodGet=__webpack_require__(5764).default,_defineProperty=__webpack_require__(8416).default,_classPrivateMethodInitSpec=__webpack_require__(1860).default,_classPrivateMethodGet=__webpack_require__(4467).default,_classPrivateFieldInitSpec=__webpack_require__(9159).default,_classPrivateFieldSet=__webpack_require__(5661).default,_classPrivateFieldGet=__webpack_require__(468).default,_classStaticPrivateFieldSpecSet=__webpack_require__(9382).default,_classStaticPrivateFieldSpecGet=__webpack_require__(1280).default,_asyncToGenerator=__webpack_require__(7156).default,x;globalThis,x=()=>(()=>{"use strict";var __webpack_modules__=[,(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.UNSUPPORTED_FEATURES=r.TextRenderingMode=r.StreamType=r.RenderingIntentFlag=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FontType=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0,r.arrayByteLength=le,r.arraysToBytes=function ue(ee){const X=ee.length;if(1===X&&ee[0]instanceof Uint8Array)return ee[0];let Q=0;for(let he=0;he<X;he++)Q+=le(ee[he]);let Ae=0;const be=new Uint8Array(Q);for(let he=0;he<X;he++){let ce=ee[he];ce instanceof Uint8Array||(ce="string"==typeof ce?pe(ce):new Uint8Array(ce));const ve=ce.byteLength;be.set(ce,Ae),Ae+=ve}return be},r.assert=function s(ee,X){ee||a(X)},r.bytesToString=function ie(ee){("object"!=typeof ee||null===ee||void 0===ee.length)&&a("Invalid argument for bytesToString");const X=ee.length,Q=8192;if(X<Q)return String.fromCharCode.apply(null,ee);const Ae=[];for(let be=0;be<X;be+=Q){const he=Math.min(be+Q,X),ce=ee.subarray(be,he);Ae.push(String.fromCharCode.apply(null,ce))}return Ae.join("")},r.createPromiseCapability=function ge(){const ee=Object.create(null);let X=!1;return Object.defineProperty(ee,"settled",{get:()=>X}),ee.promise=new Promise(function(Q,Ae){ee.resolve=function(be){X=!0,Q(be)},ee.reject=function(be){X=!0,Ae(be)}}),ee},r.createValidAbsoluteUrl=function w(ee,X=null,Q=null){if(!ee)return null;try{if(Q&&"string"==typeof ee){if(Q.addDefaultProtocol&&ee.startsWith("www.")){const be=ee.match(/\./g);be&&be.length>=2&&(ee=`http://${ee}`)}if(Q.tryConvertEncoding)try{ee=W(ee)}catch{}}const Ae=X?new URL(ee,X):new URL(ee);if(function v(ee){if(!ee)return!1;switch(ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Ae))return Ae}catch{}return null},r.escapeString=function xe(ee){return ee.replace(/([()\\\n\r])/g,X=>"\n"===X?"\\n":"\r"===X?"\\r":`\\${X}`)},r.getModificationDate=function ae(ee=new Date){return[ee.getUTCFullYear().toString(),(ee.getUTCMonth()+1).toString().padStart(2,"0"),ee.getUTCDate().toString().padStart(2,"0"),ee.getUTCHours().toString().padStart(2,"0"),ee.getUTCMinutes().toString().padStart(2,"0"),ee.getUTCSeconds().toString().padStart(2,"0")].join("")},r.getVerbosityLevel=function $(){return V},r.info=function q(ee){V>=p.INFOS&&console.log(`Info: ${ee}`)},r.isArrayBuffer=function se(ee){return"object"==typeof ee&&null!==ee&&void 0!==ee.byteLength},r.isArrayEqual=function J(ee,X){if(ee.length!==X.length)return!1;for(let Q=0,Ae=ee.length;Q<Ae;Q++)if(ee[Q]!==X[Q])return!1;return!0},r.isAscii=function Pe(ee){return/^[\x00-\x7F]*$/.test(ee)},r.objectFromMap=function me(ee){const X=Object.create(null);for(const[Q,Ae]of ee)X[Q]=Ae;return X},r.objectSize=function _e(ee){return Object.keys(ee).length},r.setVerbosityLevel=function U(ee){Number.isInteger(ee)&&(V=ee)},r.shadow=E,r.string32=function de(ee){return String.fromCharCode(ee>>24&255,ee>>16&255,ee>>8&255,255&ee)},r.stringToBytes=pe,r.stringToPDFString=function Ce(ee){if(ee[0]>="\xef"){let Q;if("\xfe"===ee[0]&&"\xff"===ee[1]?Q="utf-16be":"\xff"===ee[0]&&"\xfe"===ee[1]?Q="utf-16le":"\xef"===ee[0]&&"\xbb"===ee[1]&&"\xbf"===ee[2]&&(Q="utf-8"),Q)try{const Ae=new TextDecoder(Q,{fatal:!0}),be=pe(ee);return Ae.decode(be)}catch(Ae){B(`stringToPDFString: "${Ae}".`)}}const X=[];for(let Q=0,Ae=ee.length;Q<Ae;Q++){const be=fe[ee.charCodeAt(Q)];X.push(be?String.fromCharCode(be):ee.charAt(Q))}return X.join("")},r.stringToUTF16BEString=function ye(ee){const X=["\xfe\xff"];for(let Q=0,Ae=ee.length;Q<Ae;Q++){const be=ee.charCodeAt(Q);X.push(String.fromCharCode(be>>8&255),String.fromCharCode(255&be))}return X.join("")},r.stringToUTF8String=W,r.unreachable=a,r.utf8StringToString=function te(ee){return unescape(encodeURIComponent(ee))},r.warn=B,x(2),r.IDENTITY_MATRIX=[1,0,0,1,0,0],r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],r.LINE_FACTOR=1.35,r.LINE_DESCENT_FACTOR=.35,r.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},r.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},r.AnnotationEditorPrefix="pdfjs_internal_editor_",r.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},r.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},r.AnnotationReplyType={GROUP:"Group",REPLY:"R"},r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},r.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},r.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},r.PageActionEventType={O:"PageOpen",C:"PageClose"},r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const p={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=p,r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let V=p.WARNINGS;function B(ee){V>=p.WARNINGS&&console.log(`Warning: ${ee}`)}function a(ee){throw new Error(ee)}function E(ee,X,Q){return Object.defineProperty(ee,X,{value:Q,enumerable:!0,configurable:!0,writable:!1}),Q}const i=function(){function X(Q,Ae){this.constructor===X&&a("Cannot initialize BaseException."),this.message=Q,this.name=Ae}return X.prototype=new Error,X.constructor=X,X}();function pe(ee){"string"!=typeof ee&&a("Invalid argument for stringToBytes");const X=ee.length,Q=new Uint8Array(X);for(let Ae=0;Ae<X;++Ae)Q[Ae]=255&ee.charCodeAt(Ae);return Q}function le(ee){return void 0!==ee.length?ee.length:void 0!==ee.byteLength?ee.byteLength:void a("Invalid argument for arrayByteLength")}r.BaseException=i,r.PasswordException=class d extends i{constructor(X,Q){super(X,"PasswordException"),this.code=Q}},r.UnknownErrorException=class c extends i{constructor(X,Q){super(X,"UnknownErrorException"),this.details=Q}},r.InvalidPDFException=class S extends i{constructor(X){super(X,"InvalidPDFException")}},r.MissingPDFException=class k extends i{constructor(X){super(X,"MissingPDFException")}},r.UnexpectedResponseException=class z extends i{constructor(X,Q){super(X,"UnexpectedResponseException"),this.status=Q}},r.FormatError=class Z extends i{constructor(X){super(X,"FormatError")}},r.AbortException=class re extends i{constructor(X){super(X,"AbortException")}},r.FeatureTest=class Fe{static get isLittleEndian(){return E(this,"isLittleEndian",function ne(){const ee=new Uint8Array(4);return ee[0]=1,1===new Uint32Array(ee.buffer,0,1)[0]}())}static get isEvalSupported(){return E(this,"isEvalSupported",function oe(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return E(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const Le=[...Array(256).keys()].map(ee=>ee.toString(16).padStart(2,"0"));class Me{static makeHexColor(X,Q,Ae){return`#${Le[X]}${Le[Q]}${Le[Ae]}`}static scaleMinMax(X,Q){let Ae;X[0]?(X[0]<0&&(Ae=Q[0],Q[0]=Q[1],Q[1]=Ae),Q[0]*=X[0],Q[1]*=X[0],X[3]<0&&(Ae=Q[2],Q[2]=Q[3],Q[3]=Ae),Q[2]*=X[3],Q[3]*=X[3]):(Ae=Q[0],Q[0]=Q[2],Q[2]=Ae,Ae=Q[1],Q[1]=Q[3],Q[3]=Ae,X[1]<0&&(Ae=Q[2],Q[2]=Q[3],Q[3]=Ae),Q[2]*=X[1],Q[3]*=X[1],X[2]<0&&(Ae=Q[0],Q[0]=Q[1],Q[1]=Ae),Q[0]*=X[2],Q[1]*=X[2]),Q[0]+=X[4],Q[1]+=X[4],Q[2]+=X[5],Q[3]+=X[5]}static transform(X,Q){return[X[0]*Q[0]+X[2]*Q[1],X[1]*Q[0]+X[3]*Q[1],X[0]*Q[2]+X[2]*Q[3],X[1]*Q[2]+X[3]*Q[3],X[0]*Q[4]+X[2]*Q[5]+X[4],X[1]*Q[4]+X[3]*Q[5]+X[5]]}static applyTransform(X,Q){return[X[0]*Q[0]+X[1]*Q[2]+Q[4],X[0]*Q[1]+X[1]*Q[3]+Q[5]]}static applyInverseTransform(X,Q){const Ae=Q[0]*Q[3]-Q[1]*Q[2];return[(X[0]*Q[3]-X[1]*Q[2]+Q[2]*Q[5]-Q[4]*Q[3])/Ae,(-X[0]*Q[1]+X[1]*Q[0]+Q[4]*Q[1]-Q[5]*Q[0])/Ae]}static getAxialAlignedBoundingBox(X,Q){const Ae=Me.applyTransform(X,Q),be=Me.applyTransform(X.slice(2,4),Q),he=Me.applyTransform([X[0],X[3]],Q),ce=Me.applyTransform([X[2],X[1]],Q);return[Math.min(Ae[0],be[0],he[0],ce[0]),Math.min(Ae[1],be[1],he[1],ce[1]),Math.max(Ae[0],be[0],he[0],ce[0]),Math.max(Ae[1],be[1],he[1],ce[1])]}static inverseTransform(X){const Q=X[0]*X[3]-X[1]*X[2];return[X[3]/Q,-X[1]/Q,-X[2]/Q,X[0]/Q,(X[2]*X[5]-X[4]*X[3])/Q,(X[4]*X[1]-X[5]*X[0])/Q]}static apply3dTransform(X,Q){return[X[0]*Q[0]+X[1]*Q[1]+X[2]*Q[2],X[3]*Q[0]+X[4]*Q[1]+X[5]*Q[2],X[6]*Q[0]+X[7]*Q[1]+X[8]*Q[2]]}static singularValueDecompose2dScale(X){const Q=[X[0],X[2],X[1],X[3]],Ae=X[0]*Q[0]+X[1]*Q[2],ce=X[2]*Q[1]+X[3]*Q[3],ve=(Ae+ce)/2,Ee=Math.sqrt((Ae+ce)**2-4*(Ae*ce-(X[2]*Q[0]+X[3]*Q[2])*(X[0]*Q[1]+X[1]*Q[3])))/2,we=ve-Ee||1;return[Math.sqrt(ve+Ee||1),Math.sqrt(we)]}static normalizeRect(X){const Q=X.slice(0);return X[0]>X[2]&&(Q[0]=X[2],Q[2]=X[0]),X[1]>X[3]&&(Q[1]=X[3],Q[3]=X[1]),Q}static intersect(X,Q){const Ae=Math.max(Math.min(X[0],X[2]),Math.min(Q[0],Q[2])),be=Math.min(Math.max(X[0],X[2]),Math.max(Q[0],Q[2]));if(Ae>be)return null;const he=Math.max(Math.min(X[1],X[3]),Math.min(Q[1],Q[3])),ce=Math.min(Math.max(X[1],X[3]),Math.max(Q[1],Q[3]));return he>ce?null:[Ae,he,be,ce]}static bezierBoundingBox(X,Q,Ae,be,he,ce,ve,Ee){const Se=[],we=[[],[]];let ke,Te,Re,De,Be,Ne,We,Ge;for(let $e=0;$e<2;++$e)if(0===$e?(Te=6*X-12*Ae+6*he,ke=-3*X+9*Ae-9*he+3*ve,Re=3*Ae-3*X):(Te=6*Q-12*be+6*ce,ke=-3*Q+9*be-9*ce+3*Ee,Re=3*be-3*Q),Math.abs(ke)<1e-12){if(Math.abs(Te)<1e-12)continue;De=-Re/Te,0<De&&De<1&&Se.push(De)}else We=Te*Te-4*Re*ke,Ge=Math.sqrt(We),!(We<0)&&(Be=(-Te+Ge)/(2*ke),0<Be&&Be<1&&Se.push(Be),Ne=(-Te-Ge)/(2*ke),0<Ne&&Ne<1&&Se.push(Ne));let Ie,Oe=Se.length;const ze=Oe;for(;Oe--;)De=Se[Oe],Ie=1-De,we[0][Oe]=Ie*Ie*Ie*X+3*Ie*Ie*De*Ae+3*Ie*De*De*he+De*De*De*ve,we[1][Oe]=Ie*Ie*Ie*Q+3*Ie*Ie*De*be+3*Ie*De*De*ce+De*De*De*Ee;return we[0][ze]=X,we[1][ze]=Q,we[0][ze+1]=ve,we[1][ze+1]=Ee,we[0].length=we[1].length=ze+2,[Math.min(...we[0]),Math.min(...we[1]),Math.max(...we[0]),Math.max(...we[1])]}}r.Util=Me;const fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function W(ee){return decodeURIComponent(escape(ee))}},(Y,r,x)=>{x(3)},(Y,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const x=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);r.isNodeJS=x},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Y,NodeCMapReaderFactory:r,NodeStandardFontDataFactory:x}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=Y,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=r,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=x}function setPDFNetworkStreamFactory(Y){createPDFNetworkStream=Y}function getDocument(Y){const r=new PDFDocumentLoadingTask;let x;if("string"==typeof Y||Y instanceof URL)x={url:Y};else if((0,_util.isArrayBuffer)(Y))x={data:Y};else if(Y instanceof PDFDataRangeTransport)x={range:Y};else{if("object"!=typeof Y)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!Y.url&&!Y.data&&!Y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");x=Y}const n=Object.create(null);let h=null,T=null;for(const K in x){const P=x[K];switch(K){case"url":if(typeof window<"u")try{n[K]=new URL(P,window.location).href;continue}catch(M){(0,_util.warn)(`Cannot create valid URL: "${M}".`)}else if("string"==typeof P||P instanceof URL){n[K]=P.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":h=P;continue;case"worker":T=P;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&P instanceof Buffer)n[K]=new Uint8Array(P);else{if(P instanceof Uint8Array)break;if("string"==typeof P)n[K]=(0,_util.stringToBytes)(P);else if("object"!=typeof P||null===P||isNaN(P.length)){if(!(0,_util.isArrayBuffer)(P))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");n[K]=new Uint8Array(P)}else n[K]=new Uint8Array(P)}continue}n[K]=P}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.fontExtraProperties=!0===n.fontExtraProperties,n.pdfBug=!0===n.pdfBug,n.enableXfa=!0===n.enableXfa,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),"string"!=typeof n.cMapUrl&&(n.cMapUrl=null),"string"!=typeof n.standardFontDataUrl&&(n.standardFontDataUrl=null),"boolean"!=typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),("object"!=typeof n.ownerDocument||null===n.ownerDocument)&&(n.ownerDocument=globalThis.document),"boolean"!=typeof n.disableRange&&(n.disableRange=!1),"boolean"!=typeof n.disableStream&&(n.disableStream=!1),"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!T){const K={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};T=K.port?PDFWorker.fromPort(K):new PDFWorker(K),r._worker=T}const N=r.docId;return T.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const K=_fetchDocument(T,n,h,N),P=new Promise(function(M){let I;h?I=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},h):n.data||(I=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),M(I)});return Promise.all([K,P]).then(function([M,I]){if(r.destroyed)throw new Error("Loading aborted");const j=new _message_handler.MessageHandler(N,M,T.port),O=new WorkerTransport(j,r,I,n);r._transport=O,j.send("Ready",null)})}).catch(r._capability.reject),r}function _fetchDocument(Y,r,x,n){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(Y,r,x,n){if(Y.destroyed)throw new Error("Worker was destroyed");x&&(r.length=x.length,r.initialData=x.initialData,r.progressiveDone=x.progressiveDone,r.contentDispositionFilename=x.contentDispositionFilename);const h=yield Y.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.105",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});if(r.data&&(r.data=null),Y.destroyed)throw new Error("Worker was destroyed");return h})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var r,x;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(r=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),x=r++,r)),x}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var r=this;return _asyncToGenerator(function*(){var x;r.destroyed=!0,yield null===(x=r._transport)||void 0===x?void 0:x.destroy(),r._transport=null,r._worker&&(r._worker.destroy(),r._worker=null)})()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,x,n=!1,h=null){this.length=r,this.initialData=x,this.progressiveDone=n,this.contentDispositionFilename=h,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,x){for(const n of this._rangeListeners)n(r,x)}onDataProgress(r,x){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(r,x)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const x of this._progressiveReadListeners)x(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,x){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,x){var h,n=this;this._pdfInfo=r,this._transport=x,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(h=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),n.stats||{streamTypes:{},fontTypes:{}}}),function(){return h.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,x,n,h,T=!1){this._pageIndex=r,this._pageInfo=x,this._ownerDocument=h,this._transport=n,this._stats=T?new _display_utils.StatTimer:null,this._pdfBug=T,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:x=this.rotate,offsetX:n=0,offsetY:h=0,dontFlip:T=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:x,offsetX:n,offsetY:h,dontFlip:T})}getAnnotations({intent:r="display"}={}){const x=this._transport.getRenderingIntent(r);let n=this._annotationPromises.get(x.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,x.renderingIntent),this._annotationPromises.set(x.cacheKey,n),n=n.then(h=>{for(const T of h)void 0!==T.titleObj&&Object.defineProperty(T,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),T.titleObj.str)}),void 0!==T.contentsObj&&Object.defineProperty(T,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),T.contentsObj.str)});return h})),n}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var r=this;return _asyncToGenerator(function*(){var x;return(null===(x=r._transport._htmlForXfa)||void 0===x?void 0:x.children[r._pageIndex])||null})()}render({canvasContext:r,viewport:x,intent:n="display",annotationMode:h=_util.AnnotationMode.ENABLE,transform:T=null,imageLayer:N=null,canvasFactory:K=null,background:P=null,optionalContentConfigPromise:M=null,annotationCanvasMap:I=null,pageColors:j=null,printAnnotationStorage:O=null}){var D,F,o;void 0!==(null===(D=arguments[0])||void 0===D?void 0:D.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&h===_util.AnnotationMode.ENABLE&&(h=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null===(F=arguments[0])||void 0===F?void 0:F.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&h===_util.AnnotationMode.ENABLE&&(h=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const g=this._transport.getRenderingIntent(n,h,O);this.pendingCleanup=!1,M||(M=this._transport.getOptionalContentConfig());let C=this._intentStates.get(g.cacheKey);C||(C=Object.create(null),this._intentStates.set(g.cacheKey,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const b=K||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),y=!!(g.renderingIntent&_util.RenderingIntentFlag.PRINT);C.displayReadyCapability||(C.displayReadyCapability=(0,_util.createPromiseCapability)(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(g));const f=u=>{C.renderTasks.delete(t),(this.cleanupAfterRender||y)&&(this.pendingCleanup=!0),this._tryCleanup(),u?(t.capability.reject(u),this._abortOperatorList({intentState:C,reason:u instanceof Error?u:new Error(u)})):t.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},t=new InternalRenderTask({callback:f,params:{canvasContext:r,viewport:x,transform:T,imageLayer:N,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:I,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:b,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:j});((o=C).renderTasks||(o.renderTasks=new Set)).add(t);const e=t.task;return Promise.all([C.displayReadyCapability.promise,M]).then(([u,_])=>{this.pendingCleanup?f():(this._stats&&this._stats.time("Rendering"),t.initializeGraphics({transparency:u,optionalContentConfig:_}),t.operatorListChanged())}).catch(f),e}getOperatorList({intent:r="display",annotationMode:x=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}={}){const T=this._transport.getRenderingIntent(r,x,n,!0);let K,N=this._intentStates.get(T.cacheKey);var P;return N||(N=Object.create(null),this._intentStates.set(T.cacheKey,N)),N.opListReadCapability||(K=Object.create(null),K.operatorListChanged=function h(){N.operatorList.lastChunk&&(N.opListReadCapability.resolve(N.operatorList),N.renderTasks.delete(K))},N.opListReadCapability=(0,_util.createPromiseCapability)(),((P=N).renderTasks||(P.renderTasks=new Set)).add(K),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(T)),N.opListReadCapability.promise}streamTextContent({disableCombineTextItems:r=!1,includeMarkedContent:x=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==r,includeMarkedContent:!0===x},{highWaterMark:100,size:h=>h.items.length})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>_xfa_text.XfaText.textContent(n));const x=this.streamTextContent(r);return new Promise(function(n,h){const N=x.getReader(),K={items:[],styles:Object.create(null)};!function T(){N.read().then(function({value:P,done:M}){M?n(K):(Object.assign(K.styles,P.styles),K.items.push(...P.items),T())},h)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const r=[];for(const x of this._intentStates.values())if(this._abortOperatorList({intentState:x,reason:new Error("Page was destroyed."),force:!0}),!x.opListReadCapability)for(const n of x.renderTasks)r.push(n.completed),n.cancel();this.objs.clear();for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:x,operatorList:n}of this._intentStates.values())if(x.size>0||!n.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(r,x){const n=this._intentStates.get(x);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(r))}_renderPageChunk(r,x){for(let n=0,h=r.length;n<h;n++)x.operatorList.fnArray.push(r.fnArray[n]),x.operatorList.argsArray.push(r.argsArray[n]);x.operatorList.lastChunk=r.lastChunk,x.operatorList.separateAnnots=r.separateAnnots;for(const n of x.renderTasks)n.operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:r,cacheKey:x,annotationStorageMap:n}){const T=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:x,annotationStorage:n}).getReader(),N=this._intentStates.get(x);N.streamReader=T;const K=()=>{T.read().then(({value:P,done:M})=>{M?N.streamReader=null:this._transport.destroyed||(this._renderPageChunk(P,N),K())},P=>{if(N.streamReader=null,!this._transport.destroyed){if(N.operatorList){N.operatorList.lastChunk=!0;for(const M of N.renderTasks)M.operatorListChanged();this._tryCleanup()}if(N.displayReadyCapability)N.displayReadyCapability.reject(P);else{if(!N.opListReadCapability)throw P;N.opListReadCapability.reject(P)}}})};K()}_abortOperatorList({intentState:r,reason:x,force:n=!1}){if(r.streamReader){if(!n){if(r.renderTasks.size>0)return;if(x instanceof _display_utils.RenderingCancelledException)return void(r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:x,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(r.streamReader.cancel(new _util.AbortException(x.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[h,T]of this._intentStates)if(T===r){this._intentStates.delete(h);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(r,x){const n={data:structuredClone(r,x)};this._deferred.then(()=>{for(const h of this._listeners)h.call(this,n)})}addEventListener(r,x){this._listeners.push(x)}removeEventListener(r,x){const n=this._listeners.indexOf(x);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){var _document;const Y=null===(_document=document)||void 0===_document||null===(_document=_document.currentScript)||void 0===_document?void 0:_document.src;Y&&(PDFWorkerUtil.fallbackWorkerSrc=Y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Y,r){let x;try{if(x=new URL(Y),!x.origin||"null"===x.origin)return!1}catch{return!1}const n=new URL(r,x);return x.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(Y){return URL.createObjectURL(new Blob([`importScripts("${Y}");`]))};class PDFWorker{constructor({name:Y=null,port:r=null,verbosity:x=(0,_util.getVerbosityLevel)()}={}){if(r&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(r))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Y,this.destroyed=!1,this.verbosity=x,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r)return _classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(r,this),void this._initializeFromPort(r);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Y){this._port=Y,this._messageHandler=new _message_handler.MessageHandler("main","worker",Y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Y}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Y)||(Y=PDFWorkerUtil.createCDNWrapper(new URL(Y,window.location).href));const r=new Worker(Y),x=new _message_handler.MessageHandler("main","worker",r),n=()=>{r.removeEventListener("error",h),x.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},h=()=>{this._webWorker||n()};r.addEventListener("error",h),x.on("test",N=>{r.removeEventListener("error",h),this.destroyed?n():N?(this._messageHandler=x,this._port=r,this._webWorker=r,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),x.destroy(),r.terminate())}),x.on("ready",N=>{if(r.removeEventListener("error",h),this.destroyed)n();else try{T()}catch{this._setupFakeWorker()}});const T=()=>{const N=new Uint8Array;x.send("test",N,[N.buffer])};return void T()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(Y=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const r=new LoopbackPort;this._port=r;const x="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(x+"_worker",x,r);Y.setup(n,r);const h=new _message_handler.MessageHandler(x,x+"_worker",r);this._messageHandler=h,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})}).catch(Y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Y.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Y){if(null==Y||!Y.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(Y.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(Y.port):new PDFWorker(Y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var Y;return(null===(Y=globalThis.pdfjsWorker)||void 0===Y?void 0:Y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function Y(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(r,x,n,h){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=r,this.loadingTask=x,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:x.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:h.ownerDocument,styleElement:h.styleElement}),this._params=h,h.useWorkerFetch||(this.CMapReaderFactory=new h.CMapReaderFactory({baseUrl:h.cMapUrl,isCompressed:h.cMapPacked}),this.StandardFontDataFactory=new h.StandardFontDataFactory({baseUrl:h.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(r,x=_util.AnnotationMode.ENABLE,n=null,h=!1){let T=_util.RenderingIntentFlag.DISPLAY,N=null;switch(r){case"any":T=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":T=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(x){case _util.AnnotationMode.DISABLE:T+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:T+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:T+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,N=(T&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${x}`)}return h&&(T+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:T,cacheKey:`${T}_${_annotation_storage.AnnotationStorage.getHash(N)}`,annotationStorageMap:N}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];for(const n of _classPrivateFieldGet(this,_pageCache).values())r.push(n._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const x=this.messageHandler.sendWithPromise("Terminate",null);return r.push(x),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:x}=this;r.on("GetReader",(n,h)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=T=>{this._lastProgress={loaded:T.loaded,total:T.total}},h.onPull=()=>{this._fullReader.read().then(function({value:T,done:N}){N?h.close():((0,_util.assert)((0,_util.isArrayBuffer)(T),"GetReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(T),1,[T]))}).catch(T=>{h.error(T)})},h.onCancel=T=>{this._fullReader.cancel(T),h.ready.catch(N=>{if(!this.destroyed)throw N})}}),r.on("ReaderHeadersReady",n=>{const h=(0,_util.createPromiseCapability)(),T=this._fullReader;return T.headersReady.then(()=>{var N;T.isStreamingSupported&&T.isRangeSupported||(this._lastProgress&&(null===(N=x.onProgress)||void 0===N||N.call(x,this._lastProgress)),T.onProgress=K=>{var P;null===(P=x.onProgress)||void 0===P||P.call(x,{loaded:K.loaded,total:K.total})}),h.resolve({isStreamingSupported:T.isStreamingSupported,isRangeSupported:T.isRangeSupported,contentLength:T.contentLength})},h.reject),h.promise}),r.on("GetRangeReader",(n,h)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const T=this._networkStream.getRangeReader(n.begin,n.end);T?(h.onPull=()=>{T.read().then(function({value:N,done:K}){K?h.close():((0,_util.assert)((0,_util.isArrayBuffer)(N),"GetRangeReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(N),1,[N]))}).catch(N=>{h.error(N)})},h.onCancel=N=>{T.cancel(N),h.ready.catch(K=>{if(!this.destroyed)throw K})}):h.close()}),r.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,x._capability.resolve(new PDFDocumentProxy(n,this))}),r.on("DocException",function(n){let h;switch(n.name){case"PasswordException":h=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":h=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":h=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":h=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":h=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}x._capability.reject(h)}),r.on("PasswordRequest",n=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),x.onPassword){const h=T=>{T instanceof Error?this._passwordCapability.reject(T):this._passwordCapability.resolve({password:T})};try{x.onPassword(h,n.code)}catch(T){this._passwordCapability.reject(T)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),r.on("DataLoaded",n=>{var h;null===(h=x.onProgress)||void 0===h||h.call(x,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),r.on("StartRenderPage",n=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),r.on("commonobj",([n,h,T])=>{var N;if(!this.destroyed&&!this.commonObjs.has(n))switch(h){case"Font":const K=this._params;if("error"in T){const I=T.error;(0,_util.warn)(`Error during font loading: ${I}`),this.commonObjs.resolve(n,I);break}let P=null;K.pdfBug&&null!==(N=globalThis.FontInspector)&&void 0!==N&&N.enabled&&(P={registerFont(I,j){globalThis.FontInspector.fontAdded(I,j)}});const M=new _font_loader.FontFaceObject(T,{isEvalSupported:K.isEvalSupported,disableFontFace:K.disableFontFace,ignoreErrors:K.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:P});this.fontLoader.bind(M).catch(I=>r.sendWithPromise("FontFallback",{id:n})).finally(()=>{!K.fontExtraProperties&&M.data&&(M.data=null),this.commonObjs.resolve(n,M)});break;case"FontPath":case"Image":this.commonObjs.resolve(n,T);break;default:throw new Error(`Got unknown common object type ${h}`)}}),r.on("obj",([n,h,T,N])=>{if(this.destroyed)return;const K=_classPrivateFieldGet(this,_pageCache).get(h);if(!K.objs.has(n))switch(T){case"Image":K.objs.resolve(n,N);const M=8e6;if(N){let I;if(N.bitmap){const{bitmap:j,width:O,height:D}=N;I=O*D*4,K._bitmaps.add(j)}else{var P;I=(null===(P=N.data)||void 0===P?void 0:P.length)||0}I>M&&(K.cleanupAfterRender=!0)}break;case"Pattern":K.objs.resolve(n,N);break;default:throw new Error(`Got unknown object type ${T}`)}}),r.on("DocProgress",n=>{var h;this.destroyed||null===(h=x.onProgress)||void 0===h||h.call(x,{loaded:n.loaded,total:n.total})}),r.on("DocStats",n=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(n.streamTypes),fontTypes:Object.freeze(n.fontTypes)}))}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:r}){var x,n;this.destroyed||null===(x=(n=this.loadingTask).onUnsupportedFeature)||void 0===x||x.call(n,r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));const x=r-1,n=_classPrivateFieldGet(this,_pagePromises).get(x);if(n)return n;const h=this.messageHandler.sendWithPromise("GetPage",{pageIndex:x}).then(T=>{if(this.destroyed)throw new Error("Transport destroyed");const N=new PDFPageProxy(x,T,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(x,N),N});return _classPrivateFieldGet(this,_pagePromises).set(x,h),h}getPageIndex(r){return"object"!=typeof r||null===r||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,x){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:x})}saveDocument(){var r,x;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(r=null===(x=this._fullReader)||void 0===x?void 0:x.filename)&&void 0!==r?r:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return"string"!=typeof r?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>{var x,n,h,T;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:null!==(x=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==x?x:null,contentLength:null!==(h=null===(T=this._fullReader)||void 0===T?void 0:T.contentLength)&&void 0!==h?h:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(r=!1){var x=this;return _asyncToGenerator(function*(){if(yield x.messageHandler.sendWithPromise("Cleanup",null),!x.destroyed){for(const n of _classPrivateFieldGet(x,_pageCache).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);x.commonObjs.clear(),r||x.fontLoader.clear(),_classPrivateFieldSet(x,_metadataPromise,null),x._getFieldObjectsPromise=null,x._hasJSActionsPromise=null}})()}get loadingParams(){const r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,enableXfa:r.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(r,x=null){if(x){const h=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,r);return h.capability.promise.then(()=>x(h.data)),null}const n=_classPrivateFieldGet(this,_objs)[r];if(null==n||!n.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return n.data}has(r){const x=_classPrivateFieldGet(this,_objs)[r];return(null==x?void 0:x.capability.settled)||!1}resolve(r,x=null){const n=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,r);n.data=x,n.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(Y){return _classPrivateFieldGet(this,_objs)[Y]||(_classPrivateFieldGet(this,_objs)[Y]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(r){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,r),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:r}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!r)return!1;const{annotationCanvasMap:x}=_classPrivateFieldGet(this,_internalRenderTask);return r.form||r.canvas&&(null==x?void 0:x.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:r,params:x,objs:n,commonObjs:h,annotationCanvasMap:T,operatorList:N,pageIndex:K,canvasFactory:P,useRequestAnimationFrame:M=!1,pdfBug:I=!1,pageColors:j=null}){this.callback=r,this.params=x,this.objs=n,this.commonObjs=h,this.annotationCanvasMap=T,this.operatorListIdx=null,this.operatorList=N,this._pageIndex=K,this.canvasFactory=P,this._pdfBug=I,this.pageColors=j,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===M&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=x.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:x}){var n;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&null!==(n=globalThis.StepperManager)&&void 0!==n&&n.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:h,viewport:T,transform:N,imageLayer:K,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,K,x,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:N,viewport:T,transparency:r,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var r=this;return _asyncToGenerator(function*(){r.cancelled||(r.operatorListIdx=r.gfx.executeOperatorList(r.operatorList,r.operatorListIdx,r._continueBound,r.stepper),r.operatorListIdx===r.operatorList.argsArray.length&&(r.running=!1,r.operatorList.lastChunk&&(r.gfx.endDrawing(),r._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(r._canvas),r.callback())))})()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var n=x(1),h=x(6),T=x(10),N=new WeakSet;class K{constructor(){_classPrivateMethodInitSpec(this,N),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(O,D){const F=this._storage.get(O);return void 0===F?D:Object.assign(D,F)}getRawValue(O){return this._storage.get(O)}remove(O){if(this._storage.delete(O),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const D of this._storage.values())if(D instanceof h.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(O,D){const F=this._storage.get(O);let o=!1;if(void 0!==F)for(const[g,C]of Object.entries(D))F[g]!==C&&(o=!0,F[g]=C);else o=!0,this._storage.set(O,D);o&&_classPrivateMethodGet(this,N,P).call(this),D instanceof h.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(D.constructor._type)}has(O){return this._storage.has(O)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new I(this)}get serializable(){if(0===this._storage.size)return null;const O=new Map;for(const[D,F]of this._storage){const o=F instanceof h.AnnotationEditor?F.serialize():F;o&&O.set(D,o)}return O}static getHash(O){if(!O)return"";const D=new T.MurmurHash3_64;for(const[F,o]of O)D.update(`${F}:${JSON.stringify(o)}`);return D.hexdigest()}}function P(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}r.AnnotationStorage=K;var M=new WeakMap;class I extends K{constructor(O){super(),_classPrivateFieldInitSpec(this,M,{writable:!0,value:null}),_classPrivateFieldSet(this,M,structuredClone(O.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet(this,M)}}r.PrintAnnotationStorage=I},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditor=void 0;var n=x(7),h=x(1),T=new WeakMap,N=new WeakMap,K=new WeakMap,P=new WeakMap,M=new WeakMap,I=new WeakMap;class j{constructor(D){_classPrivateFieldInitSpec(this,T,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec(this,N,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec(this,K,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,P,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,M,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:j._zIndex++}),this.constructor===j&&(0,h.unreachable)("Cannot initialize AnnotationEditor."),this.parent=D.parent,this.id=D.id,this.width=this.height=null,this.pageIndex=D.parent.pageIndex,this.name=D.name,this.div=null;const[F,o]=this.parent.viewportBaseDimensions;this.x=D.x/F,this.y=D.y/o,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,h.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,I)}focusin(D){_classPrivateFieldGet(this,K)?_classPrivateFieldSet(this,K,!1):this.parent.setSelected(this)}focusout(D){if(!this.isAttachedToDOM)return;const F=D.relatedTarget;null!=F&&F.closest(`#${this.id}`)||(D.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(D){const F=this.parent.div.getBoundingClientRect();this.startX=D.clientX-F.x,this.startY=D.clientY-F.y,D.dataTransfer.setData("text/plain",this.id),D.dataTransfer.effectAllowed="move"}setAt(D,F,o,g){const[C,b]=this.parent.viewportBaseDimensions;[o,g]=this.screenToPageTranslation(o,g),this.x=(D+o)/C,this.y=(F+g)/b,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(D,F){const[o,g]=this.parent.viewportBaseDimensions;[D,F]=this.screenToPageTranslation(D,F),this.x+=D/o,this.y+=F/g,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(D,F){const{rotation:o}=this.parent.viewport;switch(o){case 90:return[F,-D];case 180:return[-D,-F];case 270:return[-F,D];default:return[D,F]}}setDims(D,F){const[o,g]=this.parent.viewportBaseDimensions;this.div.style.width=100*D/o+"%",this.div.style.height=100*F/g+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(this,T)),this.div.addEventListener("focusout",_classPrivateFieldGet(this,N));const[D,F]=this.getInitialTranslation();return this.translate(D,F),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(D){const F=n.KeyboardManager.platform.isMac;0!==D.button||D.ctrlKey&&F?D.preventDefault():(D.ctrlKey&&!F||D.shiftKey||D.metaKey&&F?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet(this,K,!0))}getRect(D,F){const[o,g]=this.parent.viewportBaseDimensions,[C,b]=this.parent.pageDimensions,y=C*D/o,f=b*F/g,t=this.x*C,e=this.y*b,u=this.width*C,_=this.height*b;switch(this.rotation){case 0:return[t+y,b-e-f-_,t+y+u,b-e-f];case 90:return[t+f,b-e+y,t+f+_,b-e+y+u];case 180:return[t-y-u,b-e+f,t-y,b-e+f+_];case 270:return[t-f-_,b-e-y-u,t-f,b-e-y];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(D,F){const[o,g,C,b]=D,y=C-o,f=b-g;switch(this.rotation){case 0:return[o,F-b,y,f];case 90:return[o,F-g,f,y];case 180:return[C,F-g,y,f];case 270:return[C,F-b,f,y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(this,M,!0)}disableEditMode(){_classPrivateFieldSet(this,M,!1)}isInEditMode(){return _classPrivateFieldGet(this,M)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var D;null===(D=this.div)||void 0===D||D.addEventListener("focusin",_classPrivateFieldGet(this,T))}serialize(){(0,h.unreachable)("An editor must be serializable")}static deserialize(D,F){const o=new this.prototype.constructor({parent:F,id:F.getNextId()});o.rotation=D.rotation;const[g,C]=F.pageDimensions,[b,y,f,t]=o.getRectInCurrentCoords(D.rect,C);return o.x=b/g,o.y=y/C,o.width=f/g,o.height=t/C,o}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,T)),this.div.removeEventListener("focusout",_classPrivateFieldGet(this,N)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var D;null===(D=this.div)||void 0===D||D.classList.add("selectedEditor")}unselect(){var D;null===(D=this.div)||void 0===D||D.classList.remove("selectedEditor")}updateParams(D,F){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(this,P)}set isEditing(D){_classPrivateFieldSet(this,P,D),D?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}_defineProperty(j,"_colorManager",new n.ColorManager),_defineProperty(j,"_zIndex",1),r.AnnotationEditor=j},(Y,r,x)=>{var n;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0,r.bindEvents=function N(me,ne,oe){for(const Fe of oe)ne.addEventListener(Fe,me[Fe].bind(me))},r.opacityToHex=function K(me){return Math.round(Math.min(255,Math.max(1,255*me))).toString(16).padStart(2,"0")};var h=x(1),T=x(8),P=new WeakMap;class M{constructor(){_classPrivateFieldInitSpec(this,P,{writable:!0,value:0})}getId(){var ne,oe;return`${h.AnnotationEditorPrefix}${_classPrivateFieldSet(this,P,(ne=_classPrivateFieldGet(this,P),oe=ne++,ne)),oe}`}}var I=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakMap;class F{constructor(ne=128){_classPrivateFieldInitSpec(this,I,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,j,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:-1}),_classPrivateFieldSet(this,O,ne)}add({cmd:ne,undo:oe,mustExec:Fe,type:Le=NaN,overwriteIfSameType:Me=!1,keepUndo:fe=!1}){if(Fe&&ne(),_classPrivateFieldGet(this,j))return;const Ce={cmd:ne,undo:oe,type:Le};if(-1===_classPrivateFieldGet(this,D))return _classPrivateFieldGet(this,I).length>0&&(_classPrivateFieldGet(this,I).length=0),_classPrivateFieldSet(this,D,0),void _classPrivateFieldGet(this,I).push(Ce);if(Me&&_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].type===Le)return fe&&(Ce.undo=_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].undo),void(_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)]=Ce);const xe=_classPrivateFieldGet(this,D)+1;xe===_classPrivateFieldGet(this,O)?_classPrivateFieldGet(this,I).splice(0,1):(_classPrivateFieldSet(this,D,xe),xe<_classPrivateFieldGet(this,I).length&&_classPrivateFieldGet(this,I).splice(xe)),_classPrivateFieldGet(this,I).push(Ce)}undo(){-1!==_classPrivateFieldGet(this,D)&&(_classPrivateFieldSet(this,j,!0),_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].undo(),_classPrivateFieldSet(this,j,!1),_classPrivateFieldSet(this,D,_classPrivateFieldGet(this,D)-1))}redo(){_classPrivateFieldGet(this,D)<_classPrivateFieldGet(this,I).length-1&&(_classPrivateFieldSet(this,D,_classPrivateFieldGet(this,D)+1),_classPrivateFieldSet(this,j,!0),_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].cmd(),_classPrivateFieldSet(this,j,!1))}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,D)}hasSomethingToRedo(){return _classPrivateFieldGet(this,D)<_classPrivateFieldGet(this,I).length-1}destroy(){_classPrivateFieldSet(this,I,null)}}r.CommandManager=F;var o=new WeakSet;class g{constructor(ne){_classPrivateMethodInitSpec(this,o),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const oe=g.platform.isMac;for(const[Fe,Le]of ne)for(const Me of Fe){const fe=Me.startsWith("mac+");oe&&fe?(this.callbacks.set(Me.slice(4),Le),this.allKeys.add(Me.split("+").at(-1))):!oe&&!fe&&(this.callbacks.set(Me,Le),this.allKeys.add(Me.split("+").at(-1)))}}static get platform(){const ne=typeof navigator<"u"?navigator.platform:"";return(0,h.shadow)(this,"platform",{isWin:ne.includes("Win"),isMac:ne.includes("Mac")})}exec(ne,oe){if(!this.allKeys.has(oe.key))return;const Fe=this.callbacks.get(_classPrivateMethodGet(this,o,C).call(this,oe));Fe&&(Fe.bind(ne)(),oe.stopPropagation(),oe.preventDefault())}}function C(me){me.altKey&&this.buffer.push("alt"),me.ctrlKey&&this.buffer.push("ctrl"),me.metaKey&&this.buffer.push("meta"),me.shiftKey&&this.buffer.push("shift"),this.buffer.push(me.key);const ne=this.buffer.join("+");return this.buffer.length=0,ne}r.KeyboardManager=g;var b=new WeakMap;class y{constructor(){_classPrivateFieldInitSpec(this,b,{writable:!0,value:null})}copy(ne){ne&&(Array.isArray(ne)?_classPrivateFieldSet(this,b,ne.map(oe=>oe.serialize())):_classPrivateFieldSet(this,b,[ne.serialize()]),_classPrivateFieldSet(this,b,_classPrivateFieldGet(this,b).filter(oe=>!!oe)),0===_classPrivateFieldGet(this,b).length&&_classPrivateFieldSet(this,b,null))}paste(){return _classPrivateFieldGet(this,b)}isEmpty(){return null===_classPrivateFieldGet(this,b)}destroy(){_classPrivateFieldSet(this,b,null)}}class f{get _colors(){const ne=new Map([["CanvasText",null],["Canvas",null]]);return(0,T.getColorValues)(ne),(0,h.shadow)(this,"_colors",ne)}convert(ne){const oe=(0,T.getRGB)(ne);if(!window.matchMedia("(forced-colors: active)").matches)return oe;for(const[Fe,Le]of this._colors)if(Le.every((Me,fe)=>Me===oe[fe]))return f._colorsMapping.get(Fe);return oe}getHexCode(ne){const oe=this._colors.get(ne);return oe?h.Util.makeHexColor(...oe):ne}}_defineProperty(f,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),r.ColorManager=f;var t=new WeakMap,e=new WeakMap,u=new WeakMap,_=new WeakMap,m=new WeakMap,A=new WeakMap,l=new WeakMap,p=new WeakMap,R=new WeakMap,L=new WeakMap,H=new WeakMap,G=new WeakMap,V=new WeakMap,U=new WeakMap,$=new WeakMap,q=new WeakMap,B=new WeakMap,a=new WeakSet,s=new WeakSet,v=new WeakSet,w=new WeakSet,E=new WeakSet,i=new WeakSet,d=new WeakSet,c=new WeakSet,S=new WeakSet;class k{constructor(ne,oe){_classPrivateMethodInitSpec(this,S),_classPrivateMethodInitSpec(this,c),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,i),_classPrivateMethodInitSpec(this,E),_classPrivateMethodInitSpec(this,w),_classPrivateMethodInitSpec(this,v),_classPrivateMethodInitSpec(this,s),_classPrivateMethodInitSpec(this,a),_classPrivateFieldInitSpec(this,t,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,u,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_,{writable:!0,value:new y}),_classPrivateFieldInitSpec(this,m,{writable:!0,value:new F}),_classPrivateFieldInitSpec(this,A,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,l,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,p,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,R,{writable:!0,value:new M}),_classPrivateFieldInitSpec(this,L,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,H,{writable:!0,value:h.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,V,{writable:!0,value:this.keydown.bind(this)}),_classPrivateFieldInitSpec(this,U,{writable:!0,value:this.onEditingAction.bind(this)}),_classPrivateFieldInitSpec(this,$,{writable:!0,value:this.onPageChanging.bind(this)}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),_classPrivateFieldInitSpec(this,B,{writable:!0,value:null}),_classPrivateFieldSet(this,B,ne),_classPrivateFieldSet(this,p,oe),_classPrivateFieldGet(this,p)._on("editingaction",_classPrivateFieldGet(this,U)),_classPrivateFieldGet(this,p)._on("pagechanging",_classPrivateFieldGet(this,$))}destroy(){_classPrivateMethodGet(this,s,Z).call(this),_classPrivateFieldGet(this,p)._off("editingaction",_classPrivateFieldGet(this,U)),_classPrivateFieldGet(this,p)._off("pagechanging",_classPrivateFieldGet(this,$));for(const ne of _classPrivateFieldGet(this,u).values())ne.destroy();_classPrivateFieldGet(this,u).clear(),_classPrivateFieldGet(this,e).clear(),_classPrivateFieldSet(this,t,null),_classPrivateFieldGet(this,G).clear(),_classPrivateFieldGet(this,_).destroy(),_classPrivateFieldGet(this,m).destroy()}onPageChanging({pageNumber:ne}){_classPrivateFieldSet(this,A,ne-1)}focusMainContainer(){_classPrivateFieldGet(this,B).focus()}keydown(ne){var oe;null!==(oe=this.getActive())&&void 0!==oe&&oe.shouldGetKeyboardEvents()||k._keyboardManager.exec(this,ne)}onEditingAction(ne){["undo","redo","cut","copy","paste","delete","selectAll"].includes(ne.name)&&this[ne.name]()}setEditingState(ne){ne?(_classPrivateMethodGet(this,a,z).call(this),_classPrivateMethodGet(this,v,re).call(this,{isEditing:_classPrivateFieldGet(this,H)!==h.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,c,de).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,m).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,m).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet(this,_).isEmpty()})):(_classPrivateMethodGet(this,s,Z).call(this),_classPrivateMethodGet(this,v,re).call(this,{isEditing:!1}))}registerEditorTypes(ne){_classPrivateFieldSet(this,l,ne);for(const oe of _classPrivateFieldGet(this,l))_classPrivateMethodGet(this,w,ie).call(this,oe.defaultPropertiesToUpdate)}getId(){return _classPrivateFieldGet(this,R).getId()}addLayer(ne){_classPrivateFieldGet(this,u).set(ne.pageIndex,ne),_classPrivateFieldGet(this,L)?ne.enable():ne.disable()}removeLayer(ne){_classPrivateFieldGet(this,u).delete(ne.pageIndex)}updateMode(ne){if(_classPrivateFieldSet(this,H,ne),ne===h.AnnotationEditorType.NONE)this.setEditingState(!1),_classPrivateMethodGet(this,i,le).call(this);else{this.setEditingState(!0),_classPrivateMethodGet(this,E,pe).call(this);for(const oe of _classPrivateFieldGet(this,u).values())oe.updateMode(ne)}}updateToolbar(ne){ne!==_classPrivateFieldGet(this,H)&&_classPrivateFieldGet(this,p).dispatch("switchannotationeditormode",{source:this,mode:ne})}updateParams(ne,oe){for(const Fe of _classPrivateFieldGet(this,G))Fe.updateParams(ne,oe);for(const Fe of _classPrivateFieldGet(this,l))Fe.updateDefaultParams(ne,oe)}getEditors(ne){const oe=[];for(const Fe of _classPrivateFieldGet(this,e).values())Fe.pageIndex===ne&&oe.push(Fe);return oe}getEditor(ne){return _classPrivateFieldGet(this,e).get(ne)}addEditor(ne){_classPrivateFieldGet(this,e).set(ne.id,ne)}removeEditor(ne){_classPrivateFieldGet(this,e).delete(ne.id),this.unselect(ne)}setActiveEditor(ne){_classPrivateFieldGet(this,t)!==ne&&(_classPrivateFieldSet(this,t,ne),ne&&_classPrivateMethodGet(this,w,ie).call(this,ne.propertiesToUpdate))}toggleSelected(ne){if(_classPrivateFieldGet(this,G).has(ne))return _classPrivateFieldGet(this,G).delete(ne),ne.unselect(),void _classPrivateMethodGet(this,v,re).call(this,{hasSelectedEditor:this.hasSelection});_classPrivateFieldGet(this,G).add(ne),ne.select(),_classPrivateMethodGet(this,w,ie).call(this,ne.propertiesToUpdate),_classPrivateMethodGet(this,v,re).call(this,{hasSelectedEditor:!0})}setSelected(ne){for(const oe of _classPrivateFieldGet(this,G))oe!==ne&&oe.unselect();_classPrivateFieldGet(this,G).clear(),_classPrivateFieldGet(this,G).add(ne),ne.select(),_classPrivateMethodGet(this,w,ie).call(this,ne.propertiesToUpdate),_classPrivateMethodGet(this,v,re).call(this,{hasSelectedEditor:!0})}isSelected(ne){return _classPrivateFieldGet(this,G).has(ne)}unselect(ne){ne.unselect(),_classPrivateFieldGet(this,G).delete(ne),_classPrivateMethodGet(this,v,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(this,G).size}undo(){_classPrivateFieldGet(this,m).undo(),_classPrivateMethodGet(this,v,re).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,m).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,c,de).call(this)})}redo(){_classPrivateFieldGet(this,m).redo(),_classPrivateMethodGet(this,v,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,m).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,c,de).call(this)})}addCommands(ne){_classPrivateFieldGet(this,m).add(ne),_classPrivateMethodGet(this,v,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,c,de).call(this)})}delete(){if(_classPrivateFieldGet(this,t)&&_classPrivateFieldGet(this,t).commitOrRemove(),!this.hasSelection)return;const ne=[..._classPrivateFieldGet(this,G)];this.addCommands({cmd:()=>{for(const Le of ne)Le.remove()},undo:()=>{for(const Le of ne)_classPrivateMethodGet(this,d,ue).call(this,Le)},mustExec:!0})}copy(){if(_classPrivateFieldGet(this,t)&&_classPrivateFieldGet(this,t).commitOrRemove(),this.hasSelection){const ne=[];for(const oe of _classPrivateFieldGet(this,G))oe.isEmpty()||ne.push(oe);if(0===ne.length)return;_classPrivateFieldGet(this,_).copy(ne),_classPrivateMethodGet(this,v,re).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(_classPrivateFieldGet(this,_).isEmpty())return;this.unselectAll();const ne=_classPrivateFieldGet(this,u).get(_classPrivateFieldGet(this,A)),oe=_classPrivateFieldGet(this,_).paste().map(Me=>ne.deserialize(Me));this.addCommands({cmd:()=>{for(const Me of oe)_classPrivateMethodGet(this,d,ue).call(this,Me);_classPrivateMethodGet(this,S,_e).call(this,oe)},undo:()=>{for(const Me of oe)Me.remove()},mustExec:!0})}selectAll(){for(const ne of _classPrivateFieldGet(this,G))ne.commit();_classPrivateMethodGet(this,S,_e).call(this,_classPrivateFieldGet(this,e).values())}unselectAll(){if(_classPrivateFieldGet(this,t))_classPrivateFieldGet(this,t).commitOrRemove();else if(0!==_classPrivateMethodGet(this,S,_e).size){for(const ne of _classPrivateFieldGet(this,G))ne.unselect();_classPrivateFieldGet(this,G).clear(),_classPrivateMethodGet(this,v,re).call(this,{hasSelectedEditor:!1})}}isActive(ne){return _classPrivateFieldGet(this,t)===ne}getActive(){return _classPrivateFieldGet(this,t)}getMode(){return _classPrivateFieldGet(this,H)}}function z(){_classPrivateFieldGet(this,B).addEventListener("keydown",_classPrivateFieldGet(this,V))}function Z(){_classPrivateFieldGet(this,B).removeEventListener("keydown",_classPrivateFieldGet(this,V))}function re(me){Object.entries(me).some(([oe,Fe])=>_classPrivateFieldGet(this,q)[oe]!==Fe)&&_classPrivateFieldGet(this,p).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,q),me)})}function ie(me){_classPrivateFieldGet(this,p).dispatch("annotationeditorparamschanged",{source:this,details:me})}function pe(){if(!_classPrivateFieldGet(this,L)){_classPrivateFieldSet(this,L,!0);for(const me of _classPrivateFieldGet(this,u).values())me.enable()}}function le(){if(this.unselectAll(),_classPrivateFieldGet(this,L)){_classPrivateFieldSet(this,L,!1);for(const me of _classPrivateFieldGet(this,u).values())me.disable()}}function ue(me){const ne=_classPrivateFieldGet(this,u).get(me.pageIndex);ne?ne.addOrRebuild(me):this.addEditor(me)}function de(){if(0===_classPrivateFieldGet(this,e).size)return!0;if(1===_classPrivateFieldGet(this,e).size)for(const me of _classPrivateFieldGet(this,e).values())return me.isEmpty();return!1}function _e(me){_classPrivateFieldGet(this,G).clear();for(const ne of me)ne.isEmpty()||(_classPrivateFieldGet(this,G).add(ne),ne.select());_classPrivateMethodGet(this,v,re).call(this,{hasSelectedEditor:!0})}_defineProperty(k,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],(n=k).prototype.selectAll],[["ctrl+c","mac+meta+c"],n.prototype.copy],[["ctrl+v","mac+meta+v"],n.prototype.paste],[["ctrl+x","mac+meta+x"],n.prototype.cut],[["ctrl+z","mac+meta+z"],n.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],n.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],n.prototype.delete],[["Escape","mac+Escape"],n.prototype.unselectAll]])),r.AnnotationEditorUIManager=k},(Y,r,x)=>{var n;Object.defineProperty(r,"__esModule",{value:!0}),r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=r.AnnotationPrefix=void 0,r.deprecated=function _(G){console.log("Deprecated API usage: "+G)},r.getColorValues=function R(G){const V=document.createElement("span");V.style.visibility="hidden",document.body.append(V);for(const U of G.keys()){V.style.color=U;const $=window.getComputedStyle(V).color;G.set(U,p($))}V.remove()},r.getCurrentTransform=function L(G){const{a:V,b:U,c:$,d:q,e:B,f:a}=G.getTransform();return[V,U,$,q,B,a]},r.getCurrentTransformInverse=function H(G){const{a:V,b:U,c:$,d:q,e:B,f:a}=G.getTransform().invertSelf();return[V,U,$,q,B,a]},r.getFilenameFromUrl=function y(G){const V=G.indexOf("#"),U=G.indexOf("?"),$=Math.min(V>0?V:G.length,U>0?U:G.length);return G.substring(G.lastIndexOf("/",$)+1,$)},r.getPdfFilenameFromUrl=function f(G,V="document.pdf"){if("string"!=typeof G)return V;if(C(G))return(0,T.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const $=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(G);let B=$.exec(q[1])||$.exec(q[2])||$.exec(q[3]);if(B&&(B=B[0],B.includes("%")))try{B=$.exec(decodeURIComponent(B))[0]}catch{}return B||V},r.getRGB=p,r.getXfaPageViewport=function l(G,{scale:V=1,rotation:U=0}){const{width:$,height:q}=G.attributes.style,B=[0,0,parseInt($),parseInt(q)];return new o({viewBox:B,scale:V,rotation:U})},r.isDataScheme=C,r.isPdfFile=function b(G){return"string"==typeof G&&/\.pdf$/i.test(G)},r.isValidFetchUrl=e,r.loadScript=function u(G,V=!1){return new Promise((U,$)=>{const q=document.createElement("script");q.src=G,q.onload=function(B){V&&q.remove(),U(B)},q.onerror=function(){$(new Error(`Cannot load script at: ${q.src}`))},(document.head||document.documentElement).append(q)})};var h=x(9),T=x(1);r.AnnotationPrefix="pdfjs_internal_id_";class P{}function I(G){return j.apply(this,arguments)}function j(){return(j=_asyncToGenerator(function*(G,V=!1){if(e(G,document.baseURI)){const U=yield fetch(G);if(!U.ok)throw new Error(U.statusText);return V?new Uint8Array(yield U.arrayBuffer()):(0,T.stringToBytes)(yield U.text())}return new Promise((U,$)=>{const q=new XMLHttpRequest;q.open("GET",G,!0),V&&(q.responseType="arraybuffer"),q.onreadystatechange=()=>{if(q.readyState===XMLHttpRequest.DONE){if(200===q.status||0===q.status){let B;if(V&&q.response?B=new Uint8Array(q.response):!V&&q.responseText&&(B=(0,T.stringToBytes)(q.responseText)),B)return void U(B)}$(new Error(q.statusText))}},q.send(null)})})).apply(this,arguments)}n=P,_defineProperty(P,"CSS",96),_defineProperty(P,"PDF",72),_defineProperty(P,"PDF_TO_CSS_UNITS",n.CSS/n.PDF),r.PixelsPerInch=P,r.DOMCanvasFactory=class M extends h.BaseCanvasFactory{constructor({ownerDocument:V=globalThis.document}={}){super(),this._document=V}_createCanvas(V,U){const $=this._document.createElement("canvas");return $.width=V,$.height=U,$}},r.DOMCMapReaderFactory=class O extends h.BaseCMapReaderFactory{_fetchData(V,U){return I(V,this.isCompressed).then($=>({cMapData:$,compressionType:U}))}},r.DOMStandardFontDataFactory=class D extends h.BaseStandardFontDataFactory{_fetchData(V){return I(V,!0)}},r.DOMSVGFactory=class F extends h.BaseSVGFactory{_createSVG(V){return document.createElementNS("http://www.w3.org/2000/svg",V)}};class o{constructor({viewBox:V,scale:U,rotation:$,offsetX:q=0,offsetY:B=0,dontFlip:a=!1}){this.viewBox=V,this.scale=U,this.rotation=$,this.offsetX=q,this.offsetY=B;const s=(V[2]+V[0])/2,v=(V[3]+V[1])/2;let w,E,i,d,c,S,k,z;switch(($%=360)<0&&($+=360),$){case 180:w=-1,E=0,i=0,d=1;break;case 90:w=0,E=1,i=1,d=0;break;case 270:w=0,E=-1,i=-1,d=0;break;case 0:w=1,E=0,i=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(i=-i,d=-d),0===w?(c=Math.abs(v-V[1])*U+q,S=Math.abs(s-V[0])*U+B,k=Math.abs(V[3]-V[1])*U,z=Math.abs(V[2]-V[0])*U):(c=Math.abs(s-V[0])*U+q,S=Math.abs(v-V[1])*U+B,k=Math.abs(V[2]-V[0])*U,z=Math.abs(V[3]-V[1])*U),this.transform=[w*U,E*U,i*U,d*U,c-w*U*s-i*U*v,S-E*U*s-d*U*v],this.width=k,this.height=z}clone({scale:V=this.scale,rotation:U=this.rotation,offsetX:$=this.offsetX,offsetY:q=this.offsetY,dontFlip:B=!1}={}){return new o({viewBox:this.viewBox.slice(),scale:V,rotation:U,offsetX:$,offsetY:q,dontFlip:B})}convertToViewportPoint(V,U){return T.Util.applyTransform([V,U],this.transform)}convertToViewportRectangle(V){const U=T.Util.applyTransform([V[0],V[1]],this.transform),$=T.Util.applyTransform([V[2],V[3]],this.transform);return[U[0],U[1],$[0],$[1]]}convertToPdfPoint(V,U){return T.Util.applyInverseTransform([V,U],this.transform)}}function C(G){const V=G.length;let U=0;for(;U<V&&""===G[U].trim();)U++;return"data:"===G.substring(U,U+5).toLowerCase()}function e(G,V){try{const{protocol:U}=V?new URL(G,V):new URL(G);return"http:"===U||"https:"===U}catch{return!1}}let m;function p(G){if(G.startsWith("#")){const V=parseInt(G.slice(1),16);return[(16711680&V)>>16,(65280&V)>>8,255&V]}return G.startsWith("rgb(")?G.slice(4,-1).split(",").map(V=>parseInt(V)):G.startsWith("rgba(")?G.slice(5,-1).split(",").map(V=>parseInt(V)).slice(0,3):((0,T.warn)(`Not a valid color format: "${G}"`),[0,0,0])}r.PageViewport=o,r.RenderingCancelledException=class g extends T.BaseException{constructor(V,U){super(V,"RenderingCancelledException"),this.type=U}},r.StatTimer=class t{constructor(){this.started=Object.create(null),this.times=[]}time(V){V in this.started&&(0,T.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,T.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let U=0;for(const $ of this.times){const q=$.name;q.length>U&&(U=q.length)}for(const $ of this.times){const q=$.end-$.start;V.push(`${$.name.padEnd(U)} ${q}ms\n`)}return V.join("")}},r.PDFDateString=class A{static toDateObject(V){if(!V||"string"!=typeof V)return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=m.exec(V);if(!U)return null;const $=parseInt(U[1],10);let q=parseInt(U[2],10);q=q>=1&&q<=12?q-1:0;let B=parseInt(U[3],10);B=B>=1&&B<=31?B:1;let a=parseInt(U[4],10);a=a>=0&&a<=23?a:0;let s=parseInt(U[5],10);s=s>=0&&s<=59?s:0;let v=parseInt(U[6],10);v=v>=0&&v<=59?v:0;const w=U[7]||"Z";let E=parseInt(U[8],10);E=E>=0&&E<=23?E:0;let i=parseInt(U[9],10)||0;return i=i>=0&&i<=59?i:0,"-"===w?(a+=E,s+=i):"+"===w&&(a-=E,s-=i),new Date(Date.UTC($,q,B,a,s,v))}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var n=x(1);class h{constructor(){this.constructor===h&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(M,I){if(M<=0||I<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(M,I);return{canvas:j,context:j.getContext("2d")}}reset(M,I,j){if(!M.canvas)throw new Error("Canvas is not specified");if(I<=0||j<=0)throw new Error("Invalid canvas size");M.canvas.width=I,M.canvas.height=j}destroy(M){if(!M.canvas)throw new Error("Canvas is not specified");M.canvas.width=0,M.canvas.height=0,M.canvas=null,M.context=null}_createCanvas(M,I){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}r.BaseCanvasFactory=h;class T{constructor({baseUrl:M=null,isCompressed:I=!1}){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=M,this.isCompressed=I}fetch({name:M}){var I=this;return _asyncToGenerator(function*(){if(!I.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!M)throw new Error("CMap name must be specified.");const j=I.baseUrl+M+(I.isCompressed?".bcmap":"");return I._fetchData(j,I.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE).catch(D=>{throw new Error(`Unable to load ${I.isCompressed?"binary ":""}CMap at: ${j}`)})})()}_fetchData(M,I){(0,n.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=T;class N{constructor({baseUrl:M=null}){this.constructor===N&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=M}fetch({filename:M}){var I=this;return _asyncToGenerator(function*(){if(!I.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!M)throw new Error("Font filename must be specified.");const j=`${I.baseUrl}${M}`;return I._fetchData(j).catch(O=>{throw new Error(`Unable to load font data at: ${j}`)})})()}_fetchData(M){(0,n.unreachable)("Abstract method `_fetchData` called.")}}r.BaseStandardFontDataFactory=N;class K{constructor(){this.constructor===K&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(M,I,j=!1){if(M<=0||I<=0)throw new Error("Invalid SVG dimensions");const O=this._createSVG("svg:svg");return O.setAttribute("version","1.1"),j||(O.setAttribute("width",`${M}px`),O.setAttribute("height",`${I}px`)),O.setAttribute("preserveAspectRatio","none"),O.setAttribute("viewBox",`0 0 ${M} ${I}`),O}createElement(M){if("string"!=typeof M)throw new Error("Invalid SVG element type");return this._createSVG(M)}_createSVG(M){(0,n.unreachable)("Abstract method `_createSVG` called.")}}r.BaseSVGFactory=K},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0;var n=x(1);const h=3285377520,T=4294901760,N=65535;r.MurmurHash3_64=class K{constructor(M){this.h1=M?4294967295&M:h,this.h2=M?4294967295&M:h}update(M){let I,j;if("string"==typeof M){I=new Uint8Array(2*M.length),j=0;for(let u=0,_=M.length;u<_;u++){const m=M.charCodeAt(u);m<=255?I[j++]=m:(I[j++]=m>>>8,I[j++]=255&m)}}else{if(!(0,n.isArrayBuffer)(M))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");I=M.slice(),j=I.byteLength}const O=j>>2,D=j-4*O,F=new Uint32Array(I.buffer,0,O);let o=0,g=0,C=this.h1,b=this.h2;const y=3432918353,f=461845907,t=y&N,e=f&N;for(let u=0;u<O;u++)1&u?(o=F[u],o=o*y&T|o*t&N,o=o<<15|o>>>17,o=o*f&T|o*e&N,C^=o,C=C<<13|C>>>19,C=5*C+3864292196):(g=F[u],g=g*y&T|g*t&N,g=g<<15|g>>>17,g=g*f&T|g*e&N,b^=g,b=b<<13|b>>>19,b=5*b+3864292196);switch(o=0,D){case 3:o^=I[4*O+2]<<16;case 2:o^=I[4*O+1]<<8;case 1:o^=I[4*O],o=o*y&T|o*t&N,o=o<<15|o>>>17,o=o*f&T|o*e&N,1&O?C^=o:b^=o}this.h1=C,this.h2=b}hexdigest(){let M=this.h1,I=this.h2;M^=I>>>1,M=3981806797*M&T|36045*M&N,I=4283543511*I&T|(2950163797*(I<<16|M>>>16)&T)>>>16,M^=I>>>1,M=444984403*M&T|60499*M&N,I=3301882366*I&T|(3120437893*(I<<16|M>>>16)&T)>>>16,M^=I>>>1;const j=(M>>>0).toString(16),O=(I>>>0).toString(16);return j.padStart(8,"0")+O.padStart(8,"0")}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var n=x(1);class h{constructor({docId:P,onUnsupportedFeature:M,ownerDocument:I=globalThis.document,styleElement:j=null}){this.constructor===h&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=P,this._onUnsupportedFeature=M,this._document=I,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(P){this.nativeFontFaces.push(P),this._document.fonts.add(P)}insertRule(P){let M=this.styleElement;M||(M=this.styleElement=this._document.createElement("style"),M.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(M));const I=M.sheet;I.insertRule(P,I.cssRules.length)}clear(){for(const P of this.nativeFontFaces)this._document.fonts.delete(P);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(P){var M=this;return _asyncToGenerator(function*(){if(P.attached||P.missingFile)return;if(P.attached=!0,M.isFontLoadingAPISupported){const j=P.createNativeFontFace();if(j){M.addNativeFontFace(j);try{yield j.loaded}catch(O){throw M._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${j.family}': '${O}'.`),P.disableFontFace=!0,O}}return}const I=P.createFontFaceRule();if(I){if(M.insertRule(I),M.isSyncFontLoadingSupported)return;yield new Promise(j=>{const O=M._queueLoadingCallback(j);M._prepareFontLoadEvent([I],[P],O)})}})()}_queueLoadingCallback(P){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var P;const M=!(null===(P=this._document)||void 0===P||!P.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",M)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(P,M,I){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let T;r.FontLoader=T,r.FontLoader=T=class extends h{constructor(P){super(P),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let P=!1;if(typeof navigator>"u")P=!0;else{const M=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==M?void 0:M[1])>=14&&(P=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",P)}_queueLoadingCallback(P){const I=this.loadingContext,j={id:"pdfjs-font-loading-"+I.nextRequestId++,done:!1,complete:function M(){for((0,n.assert)(!j.done,"completeRequest() cannot be called twice."),j.done=!0;I.requests.length>0&&I.requests[0].done;){const O=I.requests.shift();setTimeout(O.callback,0)}},callback:P};return I.requests.push(j),j}get _loadTestFont(){return(0,n.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(P,M,I){function j(R,L){return R.charCodeAt(L)<<24|R.charCodeAt(L+1)<<16|R.charCodeAt(L+2)<<8|255&R.charCodeAt(L+3)}function O(R,L,H,G){return R.substring(0,L)+G+R.substring(L+H)}let D,F;const o=this._document.createElement("canvas");o.width=1,o.height=1;const g=o.getContext("2d");let C=0;const y=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=O(f,976,y.length,y);const u=1482184792;let _=j(f,16);for(D=0,F=y.length-3;D<F;D+=4)_=_-u+j(y,D)|0;D<y.length&&(_=_-u+j(y+"XXX",D)|0),f=O(f,16,4,(0,n.string32)(_));const m=`url(data:font/opentype;base64,${btoa(f)});`;this.insertRule(`@font-face {font-family:"${y}";src:${m}}`);const l=[];for(const R of M)l.push(R.loadedName);l.push(y);const p=this._document.createElement("div");p.style.visibility="hidden",p.style.width=p.style.height="10px",p.style.position="absolute",p.style.top=p.style.left="0px";for(const R of l){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=R,p.append(L)}this._document.body.append(p),function b(R,L){if(C++,C>30)return(0,n.warn)("Load test font never loaded."),void L();g.font="30px "+R,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0?L():setTimeout(b.bind(null,R,L))}(y,()=>{p.remove(),I.complete()})}},r.FontFaceObject=class N{constructor(P,{isEvalSupported:M=!0,disableFontFace:I=!1,ignoreErrors:j=!1,onUnsupportedFeature:O,fontRegistry:D=null}){this.compiledGlyphs=Object.create(null);for(const F in P)this[F]=P[F];this.isEvalSupported=!1!==M,this.disableFontFace=!0===I,this.ignoreErrors=!0===j,this._onUnsupportedFeature=O,this.fontRegistry=D}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let P;if(this.cssFontInfo){const M={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(M.style=`oblique ${this.cssFontInfo.italicAngle}deg`),P=new FontFace(this.cssFontInfo.fontFamily,this.data,M)}else P=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),P}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const P=(0,n.bytesToString)(this.data),M=`url(data:${this.mimetype};base64,${btoa(P)});`;let I;if(this.cssFontInfo){let j=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(j+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),I=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${j}src:${M}}`}else I=`@font-face {font-family:"${this.loadedName}";src:${M}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,M),I}getPathGenerator(P,M){if(void 0!==this.compiledGlyphs[M])return this.compiledGlyphs[M];let I;try{I=P.get(this.loadedName+"_path_"+M)}catch(j){if(!this.ignoreErrors)throw j;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${j}".`),this.compiledGlyphs[M]=function(O,D){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const j=[];for(const O of I){const D=void 0!==O.args?O.args.join(","):"";j.push("c.",O.cmd,"(",D,");\n")}return this.compiledGlyphs[M]=new Function("c","size",j.join(""))}return this.compiledGlyphs[M]=function(j,O){for(const D of I)"scale"===D.cmd&&(D.args=[O,-O]),j[D.cmd].apply(j,D.args)}}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var n=x(8),h=x(1),T=x(13),N=x(14),K=x(3);const I=4096,D=K.isNodeJS&&typeof Path2D>"u"?-1:1e3,F=16;class g{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,s,v){let w;return void 0!==this.cache[a]?(w=this.cache[a],this.canvasFactory.reset(w,s,v)):(w=this.canvasFactory.create(s,v),this.cache[a]=w),w}delete(a){delete this.cache[a]}clear(){for(const a in this.cache)this.canvasFactory.destroy(this.cache[a]),delete this.cache[a]}}function C(B,a,s,v,w,E,i,d,c,S){const[k,z,Z,re,ie,pe]=(0,n.getCurrentTransform)(B);if(0===z&&0===Z){const _e=Math.round(i*k+ie),ne=Math.round(d*re+pe),Fe=Math.abs(Math.round((i+c)*k+ie)-_e)||1,Me=Math.abs(Math.round((d+S)*re+pe)-ne)||1;return B.setTransform(Math.sign(k),0,0,Math.sign(re),_e,ne),B.drawImage(a,s,v,w,E,0,0,Fe,Me),B.setTransform(k,z,Z,re,ie,pe),[Fe,Me]}if(0===k&&0===re){const _e=Math.round(d*Z+ie),ne=Math.round(i*z+pe),Fe=Math.abs(Math.round((d+S)*Z+ie)-_e)||1,Me=Math.abs(Math.round((i+c)*z+pe)-ne)||1;return B.setTransform(0,Math.sign(z),Math.sign(Z),0,_e,ne),B.drawImage(a,s,v,w,E,0,0,Me,Fe),B.setTransform(k,z,Z,re,ie,pe),[Me,Fe]}return B.drawImage(a,s,v,w,E,i,d,c,S),[Math.hypot(k,z)*c,Math.hypot(Z,re)*S]}class y{constructor(a,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,a,s])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,s){this.x=a,this.y=s}updatePathMinMax(a,s,v){[s,v]=h.Util.applyTransform([s,v],a),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,v),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,v)}updateRectMinMax(a,s){const v=h.Util.applyTransform(s,a),w=h.Util.applyTransform(s.slice(2),a);this.minX=Math.min(this.minX,v[0],w[0]),this.minY=Math.min(this.minY,v[1],w[1]),this.maxX=Math.max(this.maxX,v[0],w[0]),this.maxY=Math.max(this.maxY,v[1],w[1])}updateScalingPathMinMax(a,s){h.Util.scaleMinMax(a,s),this.minX=Math.min(this.minX,s[0]),this.maxX=Math.max(this.maxX,s[1]),this.minY=Math.min(this.minY,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(a,s,v,w,E,i,d,c,S,k){const z=h.Util.bezierBoundingBox(s,v,w,E,i,d,c,S);if(k)return k[0]=Math.min(k[0],z[0],z[2]),k[1]=Math.max(k[1],z[0],z[2]),k[2]=Math.min(k[2],z[1],z[3]),void(k[3]=Math.max(k[3],z[1],z[3]));this.updateRectMinMax(a,z)}getPathBoundingBox(a=T.PathType.FILL,s=null){const v=[this.minX,this.minY,this.maxX,this.maxY];if(a===T.PathType.STROKE){s||(0,h.unreachable)("Stroke bounding box must include transform.");const w=h.Util.singularValueDecompose2dScale(s),E=w[0]*this.lineWidth/2,i=w[1]*this.lineWidth/2;v[0]-=E,v[1]-=i,v[2]+=E,v[3]+=i}return v}updateClipFromPath(){const a=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=T.PathType.FILL,s=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(a,s))}}function f(B,a,s=null){if(typeof ImageData<"u"&&a instanceof ImageData)return void B.putImageData(a,0,0);const v=a.height,w=a.width,E=v%F,i=(v-E)/F,d=0===E?i:i+1,c=B.createImageData(w,F);let k,S=0;const z=a.data,Z=c.data;let re,ie,pe,le,ue,de,_e,me;if(s)switch(s.length){case 1:ue=s[0],de=s[0],_e=s[0],me=s[0];break;case 4:ue=s[0],de=s[1],_e=s[2],me=s[3]}if(a.kind===h.ImageKind.GRAYSCALE_1BPP){const ne=z.byteLength,oe=new Uint32Array(Z.buffer,0,Z.byteLength>>2),Fe=oe.length,Le=w+7>>3;let Me=4294967295,fe=h.FeatureTest.isLittleEndian?4278190080:255;for(me&&255===me[0]&&0===me[255]&&([Me,fe]=[fe,Me]),re=0;re<d;re++){for(pe=re<i?F:E,k=0,ie=0;ie<pe;ie++){const Ce=ne-S;let xe=0;const Pe=Ce>Le?w:8*Ce-7,ye=-8&Pe;let W=0,te=0;for(;xe<ye;xe+=8)te=z[S++],oe[k++]=128&te?Me:fe,oe[k++]=64&te?Me:fe,oe[k++]=32&te?Me:fe,oe[k++]=16&te?Me:fe,oe[k++]=8&te?Me:fe,oe[k++]=4&te?Me:fe,oe[k++]=2&te?Me:fe,oe[k++]=1&te?Me:fe;for(;xe<Pe;xe++)0===W&&(te=z[S++],W=128),oe[k++]=te&W?Me:fe,W>>=1}for(;k<Fe;)oe[k++]=0;B.putImageData(c,0,re*F)}}else if(a.kind===h.ImageKind.RGBA_32BPP){const ne=!!(ue||de||_e);for(ie=0,le=w*F*4,re=0;re<i;re++){if(Z.set(z.subarray(S,S+le)),S+=le,ne)for(let oe=0;oe<le;oe+=4)ue&&(Z[oe+0]=ue[Z[oe+0]]),de&&(Z[oe+1]=de[Z[oe+1]]),_e&&(Z[oe+2]=_e[Z[oe+2]]);B.putImageData(c,0,ie),ie+=F}if(re<d){if(le=w*E*4,Z.set(z.subarray(S,S+le)),ne)for(let oe=0;oe<le;oe+=4)ue&&(Z[oe+0]=ue[Z[oe+0]]),de&&(Z[oe+1]=de[Z[oe+1]]),_e&&(Z[oe+2]=_e[Z[oe+2]]);B.putImageData(c,0,ie)}}else{if(a.kind!==h.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${a.kind}`);{const ne=!!(ue||de||_e);for(pe=F,le=w*pe,re=0;re<d;re++){for(re>=i&&(pe=E,le=w*pe),k=0,ie=le;ie--;)Z[k++]=z[S++],Z[k++]=z[S++],Z[k++]=z[S++],Z[k++]=255;if(ne)for(let oe=0;oe<k;oe+=4)ue&&(Z[oe+0]=ue[Z[oe+0]]),de&&(Z[oe+1]=de[Z[oe+1]]),_e&&(Z[oe+2]=_e[Z[oe+2]]);B.putImageData(c,0,re*F)}}}}function t(B,a){if(a.bitmap)return void B.drawImage(a.bitmap,0,0);const s=a.height,v=a.width,w=s%F,E=(s-w)/F,i=0===w?E:E+1,d=B.createImageData(v,F);let c=0;const S=a.data,k=d.data;for(let z=0;z<i;z++){const Z=z<E?F:w;({srcPos:c}=(0,N.applyMaskImageData)({src:S,srcPos:c,dest:k,width:v,height:Z})),B.putImageData(d,0,z*F)}}function e(B,a){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let v=0,w=s.length;v<w;v++){const E=s[v];void 0!==B[E]&&(a[E]=B[E])}void 0!==B.setLineDash&&(a.setLineDash(B.getLineDash()),a.lineDashOffset=B.lineDashOffset)}function u(B,a){B.strokeStyle=B.fillStyle=a||"#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",void 0!==B.setLineDash&&(B.setLineDash([]),B.lineDashOffset=0)}function _(B,a,s,v){const w=B.length;for(let E=3;E<w;E+=4){const i=B[E];if(0===i)B[E-3]=a,B[E-2]=s,B[E-1]=v;else if(i<255){const d=255-i;B[E-3]=B[E-3]*i+a*d>>8,B[E-2]=B[E-2]*i+s*d>>8,B[E-1]=B[E-1]*i+v*d>>8}}}function m(B,a,s){const v=B.length;for(let E=3;E<v;E+=4)a[E]=a[E]*(s?s[B[E]]:B[E])*.00392156862745098|0}function A(B,a,s){const v=B.length;for(let w=3;w<v;w+=4){const E=77*B[w-3]+152*B[w-2]+28*B[w-1];a[w]=s?a[w]*s[E>>8]>>8:a[w]*E>>16}}function R(B,a){const s=h.Util.singularValueDecompose2dScale(B);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const v=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==a?a:s[0]<=v||s[1]<=v}const L=["butt","round","square"],H=["miter","round","bevel"],G={},V={};var U=new WeakSet;class ${constructor(a,s,v,w,E,i,d,c){_classPrivateMethodInitSpec(this,U),this.ctx=a,this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=v,this.canvasFactory=w,this.imageLayer=E,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=i,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==c?void 0:c.background)||null,this.foregroundColor=(null==c?void 0:c.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,s=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):s}beginDrawing({transform:a,viewport:s,transparency:v=!1,background:w=null}){const E=this.ctx.canvas.width,i=this.ctx.canvas.height,d=w||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const c=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const S=this.backgroundColor=this.ctx.fillStyle;let k=!0,z=d;if(this.ctx.fillStyle=d,z=this.ctx.fillStyle,k="string"==typeof z&&/^#[0-9A-Fa-f]{6}$/.test(z),"#000000"===c&&"#ffffff"===S||c===S||!k)this.foregroundColor=this.backgroundColor=null;else{const[Z,re,ie]=(0,n.getRGB)(z),pe=ue=>(ue/=255)<=.03928?ue/12.92:((ue+.055)/1.055)**2.4,le=Math.round(.2126*pe(Z)+.7152*pe(re)+.0722*pe(ie));this.selectColor=(ue,de,_e)=>{const me=.2126*pe(ue)+.7152*pe(de)+.0722*pe(_e);return Math.round(me)===le?S:c}}}if(this.ctx.fillStyle=this.backgroundColor||d,this.ctx.fillRect(0,0,E,i),this.ctx.restore(),v){const c=this.cachedCanvases.getCanvas("transparent",E,i);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),u(this.ctx,this.foregroundColor),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(a,s,v,w){const E=a.argsArray,i=a.fnArray;let d=s||0;const c=E.length;if(c===d)return d;const S=c-d>10&&"function"==typeof v,k=S?Date.now()+15:0;let z=0;const Z=this.commonObjs,re=this.objs;let ie;for(;;){if(void 0!==w&&d===w.nextBreakPoint)return w.breakIt(d,v),d;if(ie=i[d],ie!==h.OPS.dependency)this[ie].apply(this,E[d]);else for(const pe of E[d]){const le=pe.startsWith("g_")?Z:re;if(!le.has(pe))return le.get(pe,v),d}if(d++,d===c)return d;if(S&&++z>10){if(Date.now()>k)return v(),d;z=0}}}endDrawing(){_classPrivateMethodGet(this,U,q).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const s of a.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(a,s){const v=a.width,w=a.height;let k,z,E=Math.max(Math.hypot(s[0],s[1]),1),i=Math.max(Math.hypot(s[2],s[3]),1),d=v,c=w,S="prescale1";for(;E>2&&d>1||i>2&&c>1;){let Z=d,re=c;E>2&&d>1&&(Z=Math.ceil(d/2),E/=d/Z),i>2&&c>1&&(re=Math.ceil(c/2),i/=c/re),k=this.cachedCanvases.getCanvas(S,Z,re),z=k.context,z.clearRect(0,0,Z,re),z.drawImage(a,0,0,d,c,0,0,Z,re),a=k.canvas,d=Z,c=re,S="prescale1"===S?"prescale2":"prescale1"}return{img:a,paintWidth:d,paintHeight:c}}_createMaskCanvas(a){const s=this.ctx,{width:v,height:w}=a,E=this.current.fillColor,i=this.current.patternFill,d=(0,n.getCurrentTransform)(s);let c,S,k,z;if((a.bitmap||a.data)&&a.count>1){const Fe=a.bitmap||a.data.buffer,Le=d.slice(0,4);S=JSON.stringify(i?Le:[Le,E]),c=this._cachedBitmapsMap.get(Fe),c||(c=new Map,this._cachedBitmapsMap.set(Fe,c));const Me=c.get(S);if(Me&&!i)return{canvas:Me,offsetX:Math.round(Math.min(d[0],d[2])+d[4]),offsetY:Math.round(Math.min(d[1],d[3])+d[5])};k=Me}k||(z=this.cachedCanvases.getCanvas("maskCanvas",v,w),t(z.context,a));let Z=h.Util.transform(d,[1/v,0,0,-1/w,0,0]);Z=h.Util.transform(Z,[1,0,0,1,0,-w]);const re=h.Util.applyTransform([0,0],Z),ie=h.Util.applyTransform([v,w],Z),pe=h.Util.normalizeRect([re[0],re[1],ie[0],ie[1]]),le=Math.round(pe[2]-pe[0])||1,ue=Math.round(pe[3]-pe[1])||1,de=this.cachedCanvases.getCanvas("fillCanvas",le,ue),_e=de.context,me=Math.min(re[0],ie[0]),ne=Math.min(re[1],ie[1]);_e.translate(-me,-ne),_e.transform(...Z),k||(k=this._scaleImage(z.canvas,(0,n.getCurrentTransformInverse)(_e)),k=k.img,c&&i&&c.set(S,k)),_e.imageSmoothingEnabled=R((0,n.getCurrentTransform)(_e),a.interpolate),C(_e,k,0,0,k.width,k.height,0,0,v,w),_e.globalCompositeOperation="source-in";const oe=h.Util.transform((0,n.getCurrentTransformInverse)(_e),[1,0,0,1,-me,-ne]);return _e.fillStyle=i?E.getPattern(s,this,oe,T.PathType.FILL):E,_e.fillRect(0,0,v,w),c&&!i&&(this.cachedCanvases.delete("fillCanvas"),c.set(S,de.canvas)),{canvas:de.canvas,offsetX:Math.round(me),offsetY:Math.round(ne)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=L[a]}setLineJoin(a){this.ctx.lineJoin=H[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,s){const v=this.ctx;void 0!==v.setLineDash&&(v.setLineDash(a),v.lineDashOffset=s)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let s=0,v=a.length;s<v;s++){const w=a[s],i=w[1];switch(w[0]){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=w[1];break;case"ca":this.current.fillAlpha=w[1],this.ctx.globalAlpha=w[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const w=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=w.context;const E=this.ctx;E.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),e(this.suspendedCtx,E),function o(B,a){if(B._removeMirroring)throw new Error("Context is already forwarding operations.");B.__originalSave=B.save,B.__originalRestore=B.restore,B.__originalRotate=B.rotate,B.__originalScale=B.scale,B.__originalTranslate=B.translate,B.__originalTransform=B.transform,B.__originalSetTransform=B.setTransform,B.__originalResetTransform=B.resetTransform,B.__originalClip=B.clip,B.__originalMoveTo=B.moveTo,B.__originalLineTo=B.lineTo,B.__originalBezierCurveTo=B.bezierCurveTo,B.__originalRect=B.rect,B.__originalClosePath=B.closePath,B.__originalBeginPath=B.beginPath,B._removeMirroring=()=>{B.save=B.__originalSave,B.restore=B.__originalRestore,B.rotate=B.__originalRotate,B.scale=B.__originalScale,B.translate=B.__originalTranslate,B.transform=B.__originalTransform,B.setTransform=B.__originalSetTransform,B.resetTransform=B.__originalResetTransform,B.clip=B.__originalClip,B.moveTo=B.__originalMoveTo,B.lineTo=B.__originalLineTo,B.bezierCurveTo=B.__originalBezierCurveTo,B.rect=B.__originalRect,B.closePath=B.__originalClosePath,B.beginPath=B.__originalBeginPath,delete B._removeMirroring},B.save=function(){a.save(),this.__originalSave()},B.restore=function(){a.restore(),this.__originalRestore()},B.translate=function(v,w){a.translate(v,w),this.__originalTranslate(v,w)},B.scale=function(v,w){a.scale(v,w),this.__originalScale(v,w)},B.transform=function(v,w,E,i,d,c){a.transform(v,w,E,i,d,c),this.__originalTransform(v,w,E,i,d,c)},B.setTransform=function(v,w,E,i,d,c){a.setTransform(v,w,E,i,d,c),this.__originalSetTransform(v,w,E,i,d,c)},B.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},B.rotate=function(v){a.rotate(v),this.__originalRotate(v)},B.clip=function(v){a.clip(v),this.__originalClip(v)},B.moveTo=function(s,v){a.moveTo(s,v),this.__originalMoveTo(s,v)},B.lineTo=function(s,v){a.lineTo(s,v),this.__originalLineTo(s,v)},B.bezierCurveTo=function(s,v,w,E,i,d){a.bezierCurveTo(s,v,w,E,i,d),this.__originalBezierCurveTo(s,v,w,E,i,d)},B.rect=function(s,v,w,E){a.rect(s,v,w,E),this.__originalRect(s,v,w,E)},B.closePath=function(){a.closePath(),this.__originalClosePath()},B.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}(E,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){this.current.activeSMask&&(a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function p(B,a,s,v){const w=v[0],E=v[1],i=v[2]-w,d=v[3]-E;0===i||0===d||(function l(B,a,s,v,w,E,i,d,c,S,k){const z=!!E,Z=z?E[0]:0,re=z?E[1]:0,ie=z?E[2]:0;let pe;pe="Luminosity"===w?A:m;const ue=Math.min(v,Math.ceil(1048576/s));for(let de=0;de<v;de+=ue){const _e=Math.min(ue,v-de),me=B.getImageData(d-S,de+(c-k),s,_e),ne=a.getImageData(d,de+c,s,_e);z&&_(me.data,Z,re,ie),pe(me.data,ne.data,i),a.putImageData(ne,d,de+c)}}(a.context,s,i,d,a.subtype,a.backdrop,a.transferMap,w,E,a.offsetX,a.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(s.canvas,0,0),B.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,s,v,w,E,i){this.ctx.transform(a,s,v,w,E,i),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(a,s,v){const w=this.ctx,E=this.current;let c,S,i=E.x,d=E.y;const k=(0,n.getCurrentTransform)(w),z=0===k[0]&&0===k[3]||0===k[1]&&0===k[2],Z=z?v.slice(0):null;for(let re=0,ie=0,pe=a.length;re<pe;re++)switch(0|a[re]){case h.OPS.rectangle:i=s[ie++],d=s[ie++];const le=s[ie++],ue=s[ie++],de=i+le,_e=d+ue;w.moveTo(i,d),0===le||0===ue?w.lineTo(de,_e):(w.lineTo(de,d),w.lineTo(de,_e),w.lineTo(i,_e)),z||E.updateRectMinMax(k,[i,d,de,_e]),w.closePath();break;case h.OPS.moveTo:i=s[ie++],d=s[ie++],w.moveTo(i,d),z||E.updatePathMinMax(k,i,d);break;case h.OPS.lineTo:i=s[ie++],d=s[ie++],w.lineTo(i,d),z||E.updatePathMinMax(k,i,d);break;case h.OPS.curveTo:c=i,S=d,i=s[ie+4],d=s[ie+5],w.bezierCurveTo(s[ie],s[ie+1],s[ie+2],s[ie+3],i,d),E.updateCurvePathMinMax(k,c,S,s[ie],s[ie+1],s[ie+2],s[ie+3],i,d,Z),ie+=6;break;case h.OPS.curveTo2:c=i,S=d,w.bezierCurveTo(i,d,s[ie],s[ie+1],s[ie+2],s[ie+3]),E.updateCurvePathMinMax(k,c,S,i,d,s[ie],s[ie+1],s[ie+2],s[ie+3],Z),i=s[ie+2],d=s[ie+3],ie+=4;break;case h.OPS.curveTo3:c=i,S=d,i=s[ie+2],d=s[ie+3],w.bezierCurveTo(s[ie],s[ie+1],i,d,i,d),E.updateCurvePathMinMax(k,c,S,s[ie],s[ie+1],i,d,i,d,Z),ie+=4;break;case h.OPS.closePath:w.closePath()}z&&E.updateScalingPathMinMax(k,Z),E.setCurrentPoint(i,d)}closePath(){this.ctx.closePath()}stroke(a){a=!(typeof a<"u")||a;const s=this.ctx,v=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof v&&null!=v&&v.getPattern?(s.save(),s.strokeStyle=v.getPattern(s,this,(0,n.getCurrentTransformInverse)(s),T.PathType.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a){a=!(typeof a<"u")||a;const s=this.ctx,v=this.current.fillColor;let E=!1;this.current.patternFill&&(s.save(),s.fillStyle=v.getPattern(s,this,(0,n.getCurrentTransformInverse)(s),T.PathType.FILL),E=!0);const i=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==i&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),E&&s.restore(),a&&this.consumePath(i)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=V}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,s=this.ctx;if(void 0!==a){s.save(),s.beginPath();for(const v of a)s.setTransform(...v.transform),s.translate(v.x,v.y),v.addToPath(s,v.fontSize);s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}else s.beginPath()}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,s){const v=this.commonObjs.get(a),w=this.current;if(!v)throw new Error(`Can't find font for ${a}`);if(w.fontMatrix=v.fontMatrix||h.FONT_IDENTITY_MATRIX,(0===w.fontMatrix[0]||0===w.fontMatrix[3])&&(0,h.warn)("Invalid font matrix for font "+a),s<0?(s=-s,w.fontDirection=-1):w.fontDirection=1,this.current.font=v,this.current.fontSize=s,v.isType3Font)return;let i="normal";v.black?i="900":v.bold&&(i="bold");const d=v.italic?"italic":"normal",c=`"${v.loadedName||"sans-serif"}", ${v.fallbackName}`;let S=s;s<16?S=16:s>100&&(S=100),this.current.fontSizeScale=s/S,this.ctx.font=`${d} ${i} ${S}px ${c}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,s){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=s}setLeadingMoveText(a,s){this.setLeading(-s),this.moveText(a,s)}setTextMatrix(a,s,v,w,E,i){this.current.textMatrix=[a,s,v,w,E,i],this.current.textMatrixScale=Math.hypot(a,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,s,v,w){const E=this.ctx,i=this.current,d=i.font,c=i.textRenderingMode,S=i.fontSize/i.fontSizeScale,k=c&h.TextRenderingMode.FILL_STROKE_MASK,z=!!(c&h.TextRenderingMode.ADD_TO_PATH_FLAG),Z=i.patternFill&&!d.missingFile;let re;(d.disableFontFace||z||Z)&&(re=d.getPathGenerator(this.commonObjs,a)),d.disableFontFace||Z?(E.save(),E.translate(s,v),E.beginPath(),re(E,S),w&&E.setTransform(...w),(k===h.TextRenderingMode.FILL||k===h.TextRenderingMode.FILL_STROKE)&&E.fill(),(k===h.TextRenderingMode.STROKE||k===h.TextRenderingMode.FILL_STROKE)&&E.stroke(),E.restore()):((k===h.TextRenderingMode.FILL||k===h.TextRenderingMode.FILL_STROKE)&&E.fillText(a,s,v),(k===h.TextRenderingMode.STROKE||k===h.TextRenderingMode.FILL_STROKE)&&E.strokeText(a,s,v)),z&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(E),x:s,y:v,fontSize:S,addToPath:re})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const s=a.getImageData(0,0,10,10).data;let v=!1;for(let w=3;w<s.length;w+=4)if(s[w]>0&&s[w]<255){v=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",v)}showText(a){const s=this.current,v=s.font;if(v.isType3Font)return this.showType3Text(a);const w=s.fontSize;if(0===w)return;const E=this.ctx,i=s.fontSizeScale,d=s.charSpacing,c=s.wordSpacing,S=s.fontDirection,k=s.textHScale*S,z=a.length,Z=v.vertical,re=Z?1:-1,ie=v.defaultVMetrics,pe=w*s.fontMatrix[0],le=s.textRenderingMode===h.TextRenderingMode.FILL&&!v.disableFontFace&&!s.patternFill;let ue;if(E.save(),E.transform(...s.textMatrix),E.translate(s.x,s.y+s.textRise),E.scale(k,S>0?-1:1),s.patternFill){E.save();const oe=s.fillColor.getPattern(E,this,(0,n.getCurrentTransformInverse)(E),T.PathType.FILL);ue=(0,n.getCurrentTransform)(E),E.restore(),E.fillStyle=oe}let de=s.lineWidth;const _e=s.textMatrixScale;if(0===_e||0===de){const oe=s.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(oe===h.TextRenderingMode.STROKE||oe===h.TextRenderingMode.FILL_STROKE)&&(de=this.getSinglePixelWidth())}else de/=_e;1!==i&&(E.scale(i,i),de/=i),E.lineWidth=de;let ne,me=0;for(ne=0;ne<z;++ne){const oe=a[ne];if("number"==typeof oe){me+=re*oe*w/1e3;continue}let Fe=!1;const Le=(oe.isSpace?c:0)+d,Me=oe.fontChar,fe=oe.accent;let Ce,xe,ye,Pe=oe.width;if(Z){const W=oe.vmetric||ie,te=-(oe.vmetric?W[1]:.5*Pe)*pe;Pe=W?-W[0]:Pe,Ce=te/i,xe=(me+W[2]*pe)/i}else Ce=me/i,xe=0;if(v.remeasure&&Pe>0){const W=1e3*E.measureText(Me).width/w*i;if(Pe<W&&this.isFontSubpixelAAEnabled){const te=Pe/W;Fe=!0,E.save(),E.scale(te,1),Ce/=te}else Pe!==W&&(Ce+=(Pe-W)/2e3*w/i)}this.contentVisible&&(oe.isInFont||v.missingFile)&&(le&&!fe?E.fillText(Me,Ce,xe):(this.paintChar(Me,Ce,xe,ue),fe&&this.paintChar(fe.fontChar,Ce+w*fe.offset.x/i,xe-w*fe.offset.y/i,ue))),ye=Z?Pe*pe-Le*S:Pe*pe+Le*S,me+=ye,Fe&&E.restore()}Z?s.y-=me:s.x+=me*k,E.restore(),this.compose()}showType3Text(a){const s=this.ctx,v=this.current,w=v.font,E=v.fontSize,i=v.fontDirection,d=w.vertical?1:-1,c=v.charSpacing,S=v.wordSpacing,k=v.textHScale*i,z=v.fontMatrix||h.FONT_IDENTITY_MATRIX,Z=a.length;let ie,pe,le,ue;if(v.textRenderingMode!==h.TextRenderingMode.INVISIBLE&&0!==E){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(...v.textMatrix),s.translate(v.x,v.y),s.scale(k,i),ie=0;ie<Z;++ie){if(pe=a[ie],"number"==typeof pe){ue=d*pe*E/1e3,this.ctx.translate(ue,0),v.x+=ue*k;continue}const de=(pe.isSpace?S:0)+c,_e=w.charProcOperatorList[pe.operatorListId];_e?(this.contentVisible&&(this.processingType3=pe,this.save(),s.scale(E,E),s.transform(...z),this.executeOperatorList(_e),this.restore()),le=h.Util.applyTransform([pe.width,0],z)[0]*E+de,s.translate(le,0),v.x+=le*k):(0,h.warn)(`Type3 character "${pe.operatorListId}" is not available.`)}s.restore(),this.processingType3=null}}setCharWidth(a,s){}setCharWidthAndBounds(a,s,v,w,E,i){this.ctx.rect(v,w,E-v,i-w),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let s;if("TilingPattern"===a[0]){const v=a[1],w=this.baseTransform||(0,n.getCurrentTransform)(this.ctx);s=new T.TilingPattern(a,v,this.ctx,{createCanvasGraphics:i=>new $(i,this.commonObjs,this.objs,this.canvasFactory)},w)}else s=this._getPattern(a[1],a[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,s,v){var w;const E=(null===(w=this.selectColor)||void 0===w?void 0:w.call(this,a,s,v))||h.Util.makeHexColor(a,s,v);this.ctx.strokeStyle=E,this.current.strokeColor=E}setFillRGBColor(a,s,v){var w;const E=(null===(w=this.selectColor)||void 0===w?void 0:w.call(this,a,s,v))||h.Util.makeHexColor(a,s,v);this.ctx.fillStyle=E,this.current.fillColor=E,this.current.patternFill=!1}_getPattern(a,s=null){let v;return this.cachedPatterns.has(a)?v=this.cachedPatterns.get(a):(v=(0,T.getShadingPattern)(this.objs.get(a)),this.cachedPatterns.set(a,v)),s&&(v.matrix=s),v}shadingFill(a){if(!this.contentVisible)return;const s=this.ctx;this.save();const v=this._getPattern(a);s.fillStyle=v.getPattern(s,this,(0,n.getCurrentTransformInverse)(s),T.PathType.SHADING);const w=(0,n.getCurrentTransformInverse)(s);if(w){const E=s.canvas,i=E.width,d=E.height,c=h.Util.applyTransform([0,0],w),S=h.Util.applyTransform([0,d],w),k=h.Util.applyTransform([i,0],w),z=h.Util.applyTransform([i,d],w),Z=Math.min(c[0],S[0],k[0],z[0]),re=Math.min(c[1],S[1],k[1],z[1]),ie=Math.max(c[0],S[0],k[0],z[0]),pe=Math.max(c[1],S[1],k[1],z[1]);this.ctx.fillRect(Z,re,ie-Z,pe-re)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,s){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&6===a.length&&this.transform(...a),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),s)&&(this.ctx.rect(s[0],s[1],s[2]-s[0],s[3]-s[1]),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),s),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;a.isolated||(0,h.info)("TODO: Support non-isolated groups."),a.knockout&&(0,h.warn)("Knockout groups not supported.");const v=(0,n.getCurrentTransform)(s);if(a.matrix&&s.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let w=h.Util.getAxialAlignedBoundingBox(a.bbox,(0,n.getCurrentTransform)(s));w=h.Util.intersect(w,[0,0,s.canvas.width,s.canvas.height])||[0,0,0,0];const i=Math.floor(w[0]),d=Math.floor(w[1]);let c=Math.max(Math.ceil(w[2])-i,1),S=Math.max(Math.ceil(w[3])-d,1),k=1,z=1;c>I&&(k=c/I,c=I),S>I&&(z=S/I,S=I),this.current.startNewPathAndClipBox([0,0,c,S]);let Z="groupAt"+this.groupLevel;a.smask&&(Z+="_smask_"+this.smaskCounter++%2);const re=this.cachedCanvases.getCanvas(Z,c,S),ie=re.context;ie.scale(1/k,1/z),ie.translate(-i,-d),ie.transform(...v),a.smask?this.smaskStack.push({canvas:re.canvas,context:ie,offsetX:i,offsetY:d,scaleX:k,scaleY:z,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(i,d),s.scale(k,z),s.save()),e(s,ie),this.ctx=ie,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,v=this.groupStack.pop();if(this.ctx=v,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const w=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...w);const E=h.Util.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],w);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(E)}}beginAnnotation(a,s,v,w,E){if(_classPrivateMethodGet(this,U,q).call(this),u(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(s)&&4===s.length){const i=s[2]-s[0],d=s[3]-s[1];if(E&&this.annotationCanvasMap){(v=v.slice())[4]-=s[0],v[5]-=s[1],(s=s.slice())[0]=s[1]=0,s[2]=i,s[3]=d;const[c,S]=h.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:k}=this,z=Math.ceil(i*this.outputScaleX*k),Z=Math.ceil(d*this.outputScaleY*k);this.annotationCanvas=this.canvasFactory.create(z,Z);const{canvas:re,context:ie}=this.annotationCanvas;this.annotationCanvasMap.set(a,re),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ie,this.ctx.setTransform(c,0,0,-S,0,d*S),u(this.ctx,this.foregroundColor)}else u(this.ctx,this.foregroundColor),this.ctx.rect(s[0],s[1],i,d),this.ctx.clip(),this.endPath()}this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...v),this.transform(...w)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const s=a.count;(a=this.getObject(a.data,a)).count=s;const v=this.ctx,w=this.processingType3;if(w&&(void 0===w.compiled&&(w.compiled=function b(B){const{width:a,height:s}=B;if(a>D||s>D)return null;const w=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),E=a+1;let d,c,S,i=new Uint8Array(E*(s+1));const k=a+7&-8;let z=new Uint8Array(k*s),Z=0;for(const ue of B.data){let de=128;for(;de>0;)z[Z++]=ue&de?0:255,de>>=1}let re=0;for(Z=0,0!==z[Z]&&(i[0]=1,++re),c=1;c<a;c++)z[Z]!==z[Z+1]&&(i[c]=z[Z]?2:1,++re),Z++;for(0!==z[Z]&&(i[c]=2,++re),d=1;d<s;d++){Z=d*k,S=d*E,z[Z-k]!==z[Z]&&(i[S]=z[Z]?1:8,++re);let ue=(z[Z]?4:0)+(z[Z-k]?8:0);for(c=1;c<a;c++)ue=(ue>>2)+(z[Z+1]?4:0)+(z[Z-k+1]?8:0),w[ue]&&(i[S+c]=w[ue],++re),Z++;if(z[Z-k]!==z[Z]&&(i[S+c]=z[Z]?2:4,++re),re>1e3)return null}for(Z=k*(s-1),S=d*E,0!==z[Z]&&(i[S]=8,++re),c=1;c<a;c++)z[Z]!==z[Z+1]&&(i[S+c]=z[Z]?4:8,++re),Z++;if(0!==z[Z]&&(i[S+c]=4,++re),re>1e3)return null;const ie=new Int32Array([0,E,-1,0,-E,0,0,0,1]),pe=new Path2D;for(d=0;re&&d<=s;d++){let ue=d*E;const de=ue+a;for(;ue<de&&!i[ue];)ue++;if(ue===de)continue;pe.moveTo(ue%E,d);const _e=ue;let me=i[ue];do{const ne=ie[me];do{ue+=ne}while(!i[ue]);const oe=i[ue];5!==oe&&10!==oe?(me=oe,i[ue]=0):(me=oe&51*me>>4,i[ue]&=me>>2|me<<2),pe.lineTo(ue%E,ue/E|0),i[ue]||--re}while(_e!==ue);--d}return z=null,i=null,function(ue){ue.save(),ue.scale(1/a,-1/s),ue.translate(0,-s),ue.fill(pe),ue.beginPath(),ue.restore()}}(a)),w.compiled))return void w.compiled(v);const E=this._createMaskCanvas(a),i=E.canvas;v.save(),v.setTransform(1,0,0,1,0,0),v.drawImage(i,E.offsetX,E.offsetY),v.restore(),this.compose()}paintImageMaskXObjectRepeat(a,s,v=0,w=0,E,i){if(!this.contentVisible)return;a=this.getObject(a.data,a);const d=this.ctx;d.save();const c=(0,n.getCurrentTransform)(d);d.transform(s,v,w,E,0,0);const S=this._createMaskCanvas(a);d.setTransform(1,0,0,1,0,0);for(let k=0,z=i.length;k<z;k+=2){const Z=h.Util.transform(c,[s,v,w,E,i[k],i[k+1]]),[re,ie]=h.Util.applyTransform([0,0],Z);d.drawImage(S.canvas,re,ie)}d.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const s=this.ctx,v=this.current.fillColor,w=this.current.patternFill;for(const E of a){const{data:i,width:d,height:c,transform:S}=E,k=this.cachedCanvases.getCanvas("maskCanvas",d,c),z=k.context;z.save(),t(z,this.getObject(i,E)),z.globalCompositeOperation="source-in",z.fillStyle=w?v.getPattern(z,this,(0,n.getCurrentTransformInverse)(s),T.PathType.FILL):v,z.fillRect(0,0,d,c),z.restore(),s.save(),s.transform(...S),s.scale(1,-1),C(s,k.canvas,0,0,d,c,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const s=this.getObject(a);s?this.paintInlineImageXObject(s):(0,h.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(a,s,v,w){if(!this.contentVisible)return;const E=this.getObject(a);if(!E)return void(0,h.warn)("Dependent image isn't ready yet");const i=E.width,d=E.height,c=[];for(let S=0,k=w.length;S<k;S+=2)c.push({transform:[s,0,0,v,w[S],w[S+1]],x:0,y:0,w:i,h:d});this.paintInlineImageXObjectGroup(E,c)}paintInlineImageXObject(a){if(!this.contentVisible)return;const s=a.width,v=a.height,w=this.ctx;let E;if(this.save(),w.scale(1/s,-1/v),"function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)E=a;else{const S=this.cachedCanvases.getCanvas("inlineImage",s,v);f(S.context,a,this.current.transferMaps),E=S.canvas}const i=this._scaleImage(E,(0,n.getCurrentTransformInverse)(w));w.imageSmoothingEnabled=R((0,n.getCurrentTransform)(w),a.interpolate);const[d,c]=C(w,i.img,0,0,i.paintWidth,i.paintHeight,0,-v,s,v);if(this.imageLayer){const[S,k]=h.Util.applyTransform([0,-v],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:a,left:S,top:k,width:d,height:c})}this.compose(),this.restore()}paintInlineImageXObjectGroup(a,s){if(!this.contentVisible)return;const v=this.ctx,w=a.width,E=a.height,i=this.cachedCanvases.getCanvas("inlineImage",w,E);f(i.context,a,this.current.transferMaps);for(const c of s){if(v.save(),v.transform(...c.transform),v.scale(1,-1),C(v,i.canvas,c.x,c.y,c.w,c.h,0,-1,1,1),this.imageLayer){const[S,k]=h.Util.applyTransform([c.x,c.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:a,left:S,top:k,width:w,height:E})}v.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,s){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,s){this.markedContentStack.push("OC"===a?{visible:this.optionalContentConfig.isVisible(s)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const v=this.ctx;this.pendingClip&&(s||(this.pendingClip===V?v.clip("evenodd"):v.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),v.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,n.getCurrentTransform)(this.ctx);if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const s=Math.abs(a[0]*a[3]-a[2]*a[1]),v=Math.hypot(a[0],a[2]),w=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(v,w)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:a}=this.current,s=(0,n.getCurrentTransform)(this.ctx);let v,w;if(0===s[1]&&0===s[2]){const E=Math.abs(s[0]),i=Math.abs(s[3]);if(0===a)v=1/E,w=1/i;else{const d=E*a,c=i*a;v=d<1?1/d:1,w=c<1?1/c:1}}else{const E=Math.abs(s[0]*s[3]-s[2]*s[1]),i=Math.hypot(s[0],s[1]),d=Math.hypot(s[2],s[3]);if(0===a)v=d/E,w=i/E;else{const c=a*E;v=d>c?d/c:1,w=i>c?i/c:1}}this._cachedScaleForStroking=[v,w]}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:s}=this,{lineWidth:v}=this.current,[w,E]=this.getScaleForStroking();if(s.lineWidth=v||1,1===w&&1===E)return void s.stroke();let i,d,c;a&&(i=(0,n.getCurrentTransform)(s),d=s.getLineDash().slice(),c=s.lineDashOffset),s.scale(w,E);const S=Math.max(w,E);s.setLineDash(s.getLineDash().map(k=>k/S)),s.lineDashOffset/=S,s.stroke(),a&&(s.setTransform(...i),s.setLineDash(d),s.lineDashOffset=c)}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}function q(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}r.CanvasGraphics=$;for(const B in h.OPS)void 0!==$.prototype[B]&&($.prototype[h.OPS[B]]=$.prototype[B])},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TilingPattern=r.PathType=void 0,r.getShadingPattern=function F(C){switch(C[0]){case"RadialAxial":return new M(C);case"Mesh":return new O(C);case"Dummy":return new D}throw new Error(`Unknown IR type: ${C[0]}`)};var n=x(1),h=x(8),T=x(3);const N={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function K(C,b){if(!b||T.isNodeJS)return;const y=b[2]-b[0],f=b[3]-b[1],t=new Path2D;t.rect(b[0],b[1],y,f),C.clip(t)}r.PathType=N;class P{constructor(){this.constructor===P&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class M extends P{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let y;"axial"===this._type?y=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(y=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const f of this._colorStops)y.addColorStop(f[0],f[1]);return y}getPattern(b,y,f,t){let e;if(t===N.STROKE||t===N.FILL){const u=y.current.getClippedPathBoundingBox(t,(0,h.getCurrentTransform)(b))||[0,0,0,0],_=Math.ceil(u[2]-u[0])||1,m=Math.ceil(u[3]-u[1])||1,A=y.cachedCanvases.getCanvas("pattern",_,m,!0),l=A.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-u[0],-u[1]),f=n.Util.transform(f,[1,0,0,1,u[0],u[1]]),l.transform(...y.baseTransform),this.matrix&&l.transform(...this.matrix),K(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),e=b.createPattern(A.canvas,"no-repeat");const p=new DOMMatrix(f);try{e.setTransform(p)}catch(R){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${null==R?void 0:R.message}".`)}}else K(b,this._bbox),e=this._createGradient(b);return e}}function I(C,b,y,f,t,e,u,_){const m=b.coords,A=b.colors,l=C.data,p=4*C.width;let R;m[y+1]>m[f+1]&&(R=y,y=f,f=R,R=e,e=u,u=R),m[f+1]>m[t+1]&&(R=f,f=t,t=R,R=u,u=_,_=R),m[y+1]>m[f+1]&&(R=y,y=f,f=R,R=e,e=u,u=R);const L=(m[y]+b.offsetX)*b.scaleX,H=(m[y+1]+b.offsetY)*b.scaleY,G=(m[f]+b.offsetX)*b.scaleX,V=(m[f+1]+b.offsetY)*b.scaleY,U=(m[t]+b.offsetX)*b.scaleX,$=(m[t+1]+b.offsetY)*b.scaleY;if(H>=$)return;const q=A[e],B=A[e+1],a=A[e+2],s=A[u],v=A[u+1],w=A[u+2],E=A[_],i=A[_+1],d=A[_+2],c=Math.round(H),S=Math.round($);let k,z,Z,re,ie,pe,le,ue;for(let de=c;de<=S;de++){if(de<V){let Fe;Fe=de<H?0:(H-de)/(H-V),k=L-(L-G)*Fe,z=q-(q-s)*Fe,Z=B-(B-v)*Fe,re=a-(a-w)*Fe}else{let Fe;Fe=de>$?1:V===$?0:(V-de)/(V-$),k=G-(G-U)*Fe,z=s-(s-E)*Fe,Z=v-(v-i)*Fe,re=w-(w-d)*Fe}let _e;_e=de<H?0:de>$?1:(H-de)/(H-$),ie=L-(L-U)*_e,pe=q-(q-E)*_e,le=B-(B-i)*_e,ue=a-(a-d)*_e;const me=Math.round(Math.min(k,ie)),ne=Math.round(Math.max(k,ie));let oe=p*de+4*me;for(let Fe=me;Fe<=ne;Fe++)_e=(k-Fe)/(k-ie),_e<0?_e=0:_e>1&&(_e=1),l[oe++]=z-(z-pe)*_e|0,l[oe++]=Z-(Z-le)*_e|0,l[oe++]=re-(re-ue)*_e|0,l[oe++]=255}}function j(C,b,y){const f=b.coords,t=b.colors;let e,u;switch(b.type){case"lattice":const _=b.verticesPerRow,m=Math.floor(f.length/_)-1,A=_-1;for(e=0;e<m;e++){let l=e*_;for(let p=0;p<A;p++,l++)I(C,y,f[l],f[l+1],f[l+_],t[l],t[l+1],t[l+_]),I(C,y,f[l+_+1],f[l+1],f[l+_],t[l+_+1],t[l+1],t[l+_])}break;case"triangles":for(e=0,u=f.length;e<u;e+=3)I(C,y,f[e],f[e+1],f[e+2],t[e],t[e+1],t[e+2]);break;default:throw new Error("illegal figure")}}class O extends P{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,y,f){const _=Math.floor(this._bounds[0]),m=Math.floor(this._bounds[1]),A=Math.ceil(this._bounds[2])-_,l=Math.ceil(this._bounds[3])-m,p=Math.min(Math.ceil(Math.abs(A*b[0]*1.1)),3e3),R=Math.min(Math.ceil(Math.abs(l*b[1]*1.1)),3e3),L=A/p,H=l/R,G={coords:this._coords,colors:this._colors,offsetX:-_,offsetY:-m,scaleX:1/L,scaleY:1/H},$=f.getCanvas("mesh",p+4,R+4,!1),q=$.context,B=q.createImageData(p,R);if(y){const s=B.data;for(let v=0,w=s.length;v<w;v+=4)s[v]=y[0],s[v+1]=y[1],s[v+2]=y[2],s[v+3]=255}for(const s of this._figures)j(B,s,G);return q.putImageData(B,2,2),{canvas:$.canvas,offsetX:_-2*L,offsetY:m-2*H,scaleX:L,scaleY:H}}getPattern(b,y,f,t){let e;if(K(b,this._bbox),t===N.SHADING)e=n.Util.singularValueDecompose2dScale((0,h.getCurrentTransform)(b));else if(e=n.Util.singularValueDecompose2dScale(y.baseTransform),this.matrix){const _=n.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*_[0],e[1]*_[1]]}const u=this._createMeshCanvas(e,t===N.SHADING?null:this._background,y.cachedCanvases);return t!==N.SHADING&&(b.setTransform(...y.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(u.offsetX,u.offsetY),b.scale(u.scaleX,u.scaleY),b.createPattern(u.canvas,"no-repeat")}}class D extends P{getPattern(){return"hotpink"}}class g{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(b,y,f,t,e){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=y,this.ctx=f,this.canvasGraphicsFactory=t,this.baseTransform=e}createPatternCanvas(b){const y=this.operatorList,f=this.bbox,t=this.xstep,e=this.ystep,u=this.paintType,m=this.color,A=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+this.tilingType);const l=f[0],p=f[1],R=f[2],L=f[3],H=n.Util.singularValueDecompose2dScale(this.matrix),G=n.Util.singularValueDecompose2dScale(this.baseTransform),V=[H[0]*G[0],H[1]*G[1]],U=this.getSizeAndScale(t,this.ctx.canvas.width,V[0]),$=this.getSizeAndScale(e,this.ctx.canvas.height,V[1]),q=b.cachedCanvases.getCanvas("pattern",U.size,$.size,!0),B=q.context,a=A.createCanvasGraphics(B);a.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(a,u,m);let s=l,v=p,w=R,E=L;return l<0&&(s=0,w+=Math.abs(l)),p<0&&(v=0,E+=Math.abs(p)),B.translate(-U.scale*s,-$.scale*v),a.transform(U.scale,0,0,$.scale,0,0),B.save(),this.clipBbox(a,s,v,w,E),a.baseTransform=(0,h.getCurrentTransform)(a.ctx),a.executeOperatorList(y),a.endDrawing(),{canvas:q.canvas,scaleX:U.scale,scaleY:$.scale,offsetX:s,offsetY:v}}getSizeAndScale(b,y,f){b=Math.abs(b);const t=Math.max(g.MAX_PATTERN_SIZE,y);let e=Math.ceil(b*f);return e>=t?e=t:f=e/b,{scale:f,size:e}}clipBbox(b,y,f,t,e){b.ctx.rect(y,f,t-y,e-f),b.current.updateRectMinMax((0,h.getCurrentTransform)(b.ctx),[y,f,t,e]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,y,f){const t=b.ctx,e=b.current;switch(y){case 1:const u=this.ctx;t.fillStyle=u.fillStyle,t.strokeStyle=u.strokeStyle,e.fillColor=u.fillStyle,e.strokeColor=u.strokeStyle;break;case 2:const _=n.Util.makeHexColor(f[0],f[1],f[2]);t.fillStyle=_,t.strokeStyle=_,e.fillColor=_,e.strokeColor=_;break;default:throw new n.FormatError(`Unsupported paint type: ${y}`)}}getPattern(b,y,f,t){let e=f;t!==N.SHADING&&(e=n.Util.transform(e,y.baseTransform),this.matrix&&(e=n.Util.transform(e,this.matrix)));const u=this.createPatternCanvas(y);let _=new DOMMatrix(e);_=_.translate(u.offsetX,u.offsetY),_=_.scale(1/u.scaleX,1/u.scaleY);const m=b.createPattern(u.canvas,"repeat");try{m.setTransform(_)}catch(A){(0,n.warn)(`TilingPattern.getPattern: "${null==A?void 0:A.message}".`)}return m}}r.TilingPattern=g},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.applyMaskImageData=function h({src:T,srcPos:N=0,dest:K,destPos:P=0,width:M,height:I,inverseDecode:j=!1}){const O=n.FeatureTest.isLittleEndian?4278190080:255,[D,F]=j?[0,O]:[O,0],o=M>>3,g=7&M,C=T.length;K=new Uint32Array(K.buffer);for(let b=0;b<I;b++){for(const f=N+o;N<f;N++){const t=N<C?T[N]:255;K[P++]=128&t?F:D,K[P++]=64&t?F:D,K[P++]=32&t?F:D,K[P++]=16&t?F:D,K[P++]=8&t?F:D,K[P++]=4&t?F:D,K[P++]=2&t?F:D,K[P++]=1&t?F:D}if(0===g)continue;const y=N<C?T[N++]:255;for(let f=0;f<g;f++)K[P++]=y&1<<7-f?F:D}return{srcPos:N,destPos:P}};var n=x(1)},(Y,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const x=Object.create(null);r.GlobalWorkerOptions=x,x.workerPort=void 0===x.workerPort?null:x.workerPort,x.workerSrc=void 0===x.workerSrc?"":x.workerSrc},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var n=x(1);function N(P){switch(P instanceof Error||"object"==typeof P&&null!==P||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),P.name){case"AbortException":return new n.AbortException(P.message);case"MissingPDFException":return new n.MissingPDFException(P.message);case"PasswordException":return new n.PasswordException(P.message,P.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(P.message,P.status);case"UnknownErrorException":return new n.UnknownErrorException(P.message,P.details);default:return new n.UnknownErrorException(P.message,P.toString())}}r.MessageHandler=class K{constructor(M,I,j){this.sourceName=M,this.targetName=I,this.comObj=j,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=O=>{const D=O.data;if(D.targetName!==this.sourceName)return;if(D.stream)return void this._processStreamMessage(D);if(D.callback){const o=D.callbackId,g=this.callbackCapabilities[o];if(!g)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],1===D.callback)g.resolve(D.data);else{if(2!==D.callback)throw new Error("Unexpected callback case");g.reject(N(D.reason))}return}const F=this.actionHandler[D.action];if(!F)throw new Error(`Unknown action from worker: ${D.action}`);if(D.callbackId){const o=this.sourceName,g=D.sourceName;new Promise(function(C){C(F(D.data))}).then(function(C){j.postMessage({sourceName:o,targetName:g,callback:1,callbackId:D.callbackId,data:C})},function(C){j.postMessage({sourceName:o,targetName:g,callback:2,callbackId:D.callbackId,reason:N(C)})})}else D.streamId?this._createStreamSink(D):F(D.data)},j.addEventListener("message",this._onComObjOnMessage)}on(M,I){const j=this.actionHandler;if(j[M])throw new Error(`There is already an actionName called "${M}"`);j[M]=I}send(M,I,j){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,data:I},j)}sendWithPromise(M,I,j){const O=this.callbackId++,D=(0,n.createPromiseCapability)();this.callbackCapabilities[O]=D;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,callbackId:O,data:I},j)}catch(F){D.reject(F)}return D.promise}sendWithStream(M,I,j,O){const D=this.streamId++,F=this.sourceName,o=this.targetName,g=this.comObj;return new ReadableStream({start:C=>{const b=(0,n.createPromiseCapability)();return this.streamControllers[D]={controller:C,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:F,targetName:o,action:M,streamId:D,data:I,desiredSize:C.desiredSize},O),b.promise},pull:C=>{const b=(0,n.createPromiseCapability)();return this.streamControllers[D].pullCall=b,g.postMessage({sourceName:F,targetName:o,stream:6,streamId:D,desiredSize:C.desiredSize}),b.promise},cancel:C=>{(0,n.assert)(C instanceof Error,"cancel must have a valid reason");const b=(0,n.createPromiseCapability)();return this.streamControllers[D].cancelCall=b,this.streamControllers[D].isClosed=!0,g.postMessage({sourceName:F,targetName:o,stream:1,streamId:D,reason:N(C)}),b.promise}},j)}_createStreamSink(M){const I=M.streamId,j=this.sourceName,O=M.sourceName,D=this.comObj,F=this,o=this.actionHandler[M.action],g={enqueue(C,b=1,y){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=b,f>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),D.postMessage({sourceName:j,targetName:O,stream:4,streamId:I,chunk:C},y)},close(){this.isCancelled||(this.isCancelled=!0,D.postMessage({sourceName:j,targetName:O,stream:3,streamId:I}),delete F.streamSinks[I])},error(C){(0,n.assert)(C instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,D.postMessage({sourceName:j,targetName:O,stream:5,streamId:I,reason:N(C)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:M.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[I]=g,new Promise(function(C){C(o(M.data,g))}).then(function(){D.postMessage({sourceName:j,targetName:O,stream:8,streamId:I,success:!0})},function(C){D.postMessage({sourceName:j,targetName:O,stream:8,streamId:I,reason:N(C)})})}_processStreamMessage(M){const I=M.streamId,j=this.sourceName,O=M.sourceName,D=this.comObj,F=this.streamControllers[I],o=this.streamSinks[I];switch(M.stream){case 8:M.success?F.startCall.resolve():F.startCall.reject(N(M.reason));break;case 7:M.success?F.pullCall.resolve():F.pullCall.reject(N(M.reason));break;case 6:if(!o){D.postMessage({sourceName:j,targetName:O,stream:7,streamId:I,success:!0});break}o.desiredSize<=0&&M.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=M.desiredSize,new Promise(function(g){g(o.onPull&&o.onPull())}).then(function(){D.postMessage({sourceName:j,targetName:O,stream:7,streamId:I,success:!0})},function(g){D.postMessage({sourceName:j,targetName:O,stream:7,streamId:I,reason:N(g)})});break;case 4:if((0,n.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(M.chunk);break;case 3:if((0,n.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),this._deleteStreamController(F,I);break;case 5:(0,n.assert)(F,"error should have stream controller"),F.controller.error(N(M.reason)),this._deleteStreamController(F,I);break;case 2:M.success?F.cancelCall.resolve():F.cancelCall.reject(N(M.reason)),this._deleteStreamController(F,I);break;case 1:if(!o)break;new Promise(function(g){g(o.onCancel&&o.onCancel(N(M.reason)))}).then(function(){D.postMessage({sourceName:j,targetName:O,stream:2,streamId:I,success:!0})},function(g){D.postMessage({sourceName:j,targetName:O,stream:2,streamId:I,reason:N(g)})}),o.sinkCapability.reject(N(M.reason)),o.isCancelled=!0,delete this.streamSinks[I];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(M,I){var j=this;return _asyncToGenerator(function*(){yield Promise.allSettled([M.startCall&&M.startCall.promise,M.pullCall&&M.pullCall.promise,M.cancelCall&&M.cancelCall.promise]),delete j.streamControllers[I]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var n=x(1),h=new WeakMap,T=new WeakMap;r.Metadata=class N{constructor({parsedData:P,rawData:M}){_classPrivateFieldInitSpec(this,h,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:void 0}),_classPrivateFieldSet(this,h,P),_classPrivateFieldSet(this,T,M)}getRaw(){return _classPrivateFieldGet(this,T)}get(P){var M;return null!==(M=_classPrivateFieldGet(this,h).get(P))&&void 0!==M?M:null}getAll(){return(0,n.objectFromMap)(_classPrivateFieldGet(this,h))}has(P){return _classPrivateFieldGet(this,h).has(P)}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var n=x(1);const h=Symbol("INTERNAL");var T=new WeakMap;class N{constructor(o,g){_classPrivateFieldInitSpec(this,T,{writable:!0,value:!0}),this.name=o,this.intent=g}get visible(){return _classPrivateFieldGet(this,T)}_setVisible(o,g){o!==h&&(0,n.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(this,T,g)}}var K=new WeakMap,P=new WeakMap,M=new WeakMap,I=new WeakMap,j=new WeakSet;function D(F){const o=F.length;if(o<2)return!0;const g=F[0];for(let C=1;C<o;C++){const b=F[C];let y;if(Array.isArray(b))y=_classPrivateMethodGet(this,j,D).call(this,b);else{if(!_classPrivateFieldGet(this,P).has(b))return(0,n.warn)(`Optional content group not found: ${b}`),!0;y=_classPrivateFieldGet(this,P).get(b).visible}switch(g){case"And":if(!y)return!1;break;case"Or":if(y)return!0;break;case"Not":return!y;default:return!0}}return"And"===g}r.OptionalContentConfig=class O{constructor(o){if(_classPrivateMethodInitSpec(this,j),_classPrivateFieldInitSpec(this,K,{writable:!0,value:!0}),_classPrivateFieldInitSpec(this,P,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,M,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:null}),this.name=null,this.creator=null,null!==o){this.name=o.name,this.creator=o.creator,_classPrivateFieldSet(this,I,o.order);for(const g of o.groups)_classPrivateFieldGet(this,P).set(g.id,new N(g.name,g.intent));if("OFF"===o.baseState)for(const g of _classPrivateFieldGet(this,P).values())g._setVisible(h,!1);for(const g of o.on)_classPrivateFieldGet(this,P).get(g)._setVisible(h,!0);for(const g of o.off)_classPrivateFieldGet(this,P).get(g)._setVisible(h,!1);_classPrivateFieldSet(this,M,new Map);for(const[g,C]of _classPrivateFieldGet(this,P))_classPrivateFieldGet(this,M).set(g,C.visible)}}isVisible(o){if(0===_classPrivateFieldGet(this,P).size)return!0;if(!o)return(0,n.warn)("Optional content group not defined."),!0;if("OCG"===o.type)return _classPrivateFieldGet(this,P).has(o.id)?_classPrivateFieldGet(this,P).get(o.id).visible:((0,n.warn)(`Optional content group not found: ${o.id}`),!0);if("OCMD"===o.type){if(o.expression)return _classPrivateMethodGet(this,j,D).call(this,o.expression);if(!o.policy||"AnyOn"===o.policy){for(const g of o.ids){if(!_classPrivateFieldGet(this,P).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(_classPrivateFieldGet(this,P).get(g).visible)return!0}return!1}if("AllOn"===o.policy){for(const g of o.ids){if(!_classPrivateFieldGet(this,P).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(!_classPrivateFieldGet(this,P).get(g).visible)return!1}return!0}if("AnyOff"===o.policy){for(const g of o.ids){if(!_classPrivateFieldGet(this,P).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(!_classPrivateFieldGet(this,P).get(g).visible)return!0}return!1}if("AllOff"===o.policy){for(const g of o.ids){if(!_classPrivateFieldGet(this,P).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(_classPrivateFieldGet(this,P).get(g).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${o.policy}.`),!0}return(0,n.warn)(`Unknown group type ${o.type}.`),!0}setVisibility(o,g=!0){_classPrivateFieldGet(this,P).has(o)?(_classPrivateFieldGet(this,P).get(o)._setVisible(h,!!g),_classPrivateFieldSet(this,K,null)):(0,n.warn)(`Optional content group not found: ${o}`)}get hasInitialVisibility(){if(null!==_classPrivateFieldGet(this,K))return _classPrivateFieldGet(this,K);for(const[o,g]of _classPrivateFieldGet(this,P)){const C=_classPrivateFieldGet(this,M).get(o);if(g.visible!==C)return _classPrivateFieldSet(this,K,!1)}return _classPrivateFieldSet(this,K,!0)}getOrder(){return _classPrivateFieldGet(this,P).size?_classPrivateFieldGet(this,I)?_classPrivateFieldGet(this,I).slice():[..._classPrivateFieldGet(this,P).keys()]:null}getGroups(){return _classPrivateFieldGet(this,P).size>0?(0,n.objectFromMap)(_classPrivateFieldGet(this,P)):null}getGroup(o){return _classPrivateFieldGet(this,P).get(o)||null}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var n=x(1),h=x(8);r.PDFDataTransportStream=class T{constructor(M,I){(0,n.assert)(I,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=M.progressiveDone||!1,this._contentDispositionFilename=M.contentDispositionFilename||null;const j=M.initialData;if((null==j?void 0:j.length)>0){const O=new Uint8Array(j).buffer;this._queuedChunks.push(O)}this._pdfDataRangeTransport=I,this._isStreamingSupported=!M.disableStream,this._isRangeSupported=!M.disableRange,this._contentLength=M.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((O,D)=>{this._onReceiveData({begin:O,chunk:D})}),this._pdfDataRangeTransport.addProgressListener((O,D)=>{this._onProgress({loaded:O,total:D})}),this._pdfDataRangeTransport.addProgressiveReadListener(O=>{this._onReceiveData({chunk:O})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(M){const I=new Uint8Array(M.chunk).buffer;if(void 0===M.begin)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const j=this._rangeReaders.some(function(O){return O._begin===M.begin&&(O._enqueue(I),!0)});(0,n.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var M,I;return null!==(M=null===(I=this._fullRequestReader)||void 0===I?void 0:I._loaded)&&void 0!==M?M:0}_onProgress(M){if(void 0===M.total){const I=this._rangeReaders[0];null!=I&&I.onProgress&&I.onProgress({loaded:M.loaded})}else{const I=this._fullRequestReader;null!=I&&I.onProgress&&I.onProgress({loaded:M.loaded,total:M.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(M){const I=this._rangeReaders.indexOf(M);I>=0&&this._rangeReaders.splice(I,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const M=this._queuedChunks;return this._queuedChunks=null,new N(this,M,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(M,I){if(I<=this._progressiveDataLength)return null;const j=new K(this,M,I);return this._pdfDataRangeTransport.requestDataRange(M,I),this._rangeReaders.push(j),j}cancelAllRequests(M){this._fullRequestReader&&this._fullRequestReader.cancel(M);for(const I of this._rangeReaders.slice(0))I.cancel(M);this._pdfDataRangeTransport.abort()}};class N{constructor(M,I,j=!1,O=null){this._stream=M,this._done=j||!1,this._filename=(0,h.isPdfFile)(O)?O:null,this._queuedChunks=I||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),M._fullRequestReader=this,this.onProgress=null}_enqueue(M){this._done||(this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunks.push(M),this._loaded+=M.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var M=this;return _asyncToGenerator(function*(){if(M._queuedChunks.length>0)return{value:M._queuedChunks.shift(),done:!1};if(M._done)return{value:void 0,done:!0};const I=(0,n.createPromiseCapability)();return M._requests.push(I),I.promise})()}cancel(M){this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class K{constructor(M,I,j){this._stream=M,this._begin=I,this._end=j,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(M){if(!this._done){if(0===this._requests.length)this._queuedChunk=M;else{this._requests.shift().resolve({value:M,done:!1});for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var M=this;return _asyncToGenerator(function*(){if(M._queuedChunk){const j=M._queuedChunk;return M._queuedChunk=null,{value:j,done:!1}}if(M._done)return{value:void 0,done:!0};const I=(0,n.createPromiseCapability)();return M._requests.push(I),I.promise})()}cancel(M){this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Y,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaText=void 0;class x{static textContent(h){const T=[],N={items:T,styles:Object.create(null)};return function K(P){var M;if(!P)return;let I=null;const j=P.name;if("#text"===j)I=P.value;else{if(!x.shouldBuildText(j))return;null!=P&&null!==(M=P.attributes)&&void 0!==M&&M.textContent?I=P.attributes.textContent:P.value&&(I=P.value)}if(null!==I&&T.push({str:I}),P.children)for(const O of P.children)K(O)}(h),N}static shouldBuildText(h){return!("textarea"===h||"input"===h||"option"===h||"select"===h)}}r.XfaText=x},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NodeStandardFontDataFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var n=x(9);const h=function(P){return new Promise((M,I)=>{__webpack_require__(172).readFile(P,(O,D)=>{!O&&D?M(new Uint8Array(D)):I(new Error(O))})})};r.NodeCanvasFactory=class T extends n.BaseCanvasFactory{_createCanvas(M,I){return __webpack_require__(3414).createCanvas(M,I)}},r.NodeCMapReaderFactory=class N extends n.BaseCMapReaderFactory{_fetchData(M,I){return h(M).then(j=>({cMapData:j,compressionType:I}))}},r.NodeStandardFontDataFactory=class K extends n.BaseStandardFontDataFactory{_fetchData(M){return h(M)}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayer=void 0;var n=x(7),h=x(1),T=x(23),N=x(24);r.AnnotationEditorLayer=(()=>{var P=new WeakMap,M=new WeakMap,I=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakMap,F=new WeakMap,o=new WeakMap,g=new WeakSet,C=new WeakSet,b=new WeakSet,y=new WeakSet;class f{constructor(A){_classPrivateMethodInitSpec(this,y),_classPrivateMethodInitSpec(this,b),_classPrivateMethodInitSpec(this,C),_classPrivateMethodInitSpec(this,g),_classPrivateFieldInitSpec(this,P,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,M,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:this.pointerup.bind(this)}),_classPrivateFieldInitSpec(this,j,{writable:!0,value:this.pointerdown.bind(this)}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,o,{writable:!0,value:void 0}),f._initialized||(f._initialized=!0,T.FreeTextEditor.initialize(A.l10n),N.InkEditor.initialize(A.l10n),A.uiManager.registerEditorTypes([T.FreeTextEditor,N.InkEditor])),_classPrivateFieldSet(this,o,A.uiManager),this.annotationStorage=A.annotationStorage,this.pageIndex=A.pageIndex,this.div=A.div,_classPrivateFieldSet(this,P,A.accessibilityManager),_classPrivateFieldGet(this,o).addLayer(this)}updateToolbar(A){_classPrivateFieldGet(this,o).updateToolbar(A)}updateMode(A=_classPrivateFieldGet(this,o).getMode()){_classPrivateMethodGet(this,y,_).call(this),A===h.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_classPrivateFieldGet(this,o).unselectAll()}addInkEditorIfNeeded(A){if(A||_classPrivateFieldGet(this,o).getMode()===h.AnnotationEditorType.INK){if(!A)for(const p of _classPrivateFieldGet(this,O).values())if(p.isEmpty())return void p.setInBackground();_classPrivateMethodGet(this,b,u).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(A){_classPrivateFieldGet(this,o).setEditingState(A)}addCommands(A){_classPrivateFieldGet(this,o).addCommands(A)}enable(){this.div.style.pointerEvents="auto";for(const A of _classPrivateFieldGet(this,O).values())A.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const A of _classPrivateFieldGet(this,O).values())A.disableEditing()}setActiveEditor(A){_classPrivateFieldGet(this,o).getActive()!==A&&_classPrivateFieldGet(this,o).setActiveEditor(A)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,j)),this.div.addEventListener("pointerup",_classPrivateFieldGet(this,I))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,j)),this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,I))}attach(A){_classPrivateFieldGet(this,O).set(A.id,A)}detach(A){var l;_classPrivateFieldGet(this,O).delete(A.id),null===(l=_classPrivateFieldGet(this,P))||void 0===l||l.removePointerInTextLayer(A.contentDiv)}remove(A){_classPrivateFieldGet(this,o).removeEditor(A),this.detach(A),this.annotationStorage.remove(A.id),A.div.style.display="none",setTimeout(()=>{A.div.style.display="",A.div.remove(),A.isAttachedToDOM=!1,document.activeElement===document.body&&_classPrivateFieldGet(this,o).focusMainContainer()},0),_classPrivateFieldGet(this,F)||this.addInkEditorIfNeeded(!1)}add(A){if(_classPrivateMethodGet(this,g,t).call(this,A),_classPrivateFieldGet(this,o).addEditor(A),this.attach(A),!A.isAttachedToDOM){const l=A.render();this.div.append(l),A.isAttachedToDOM=!0}this.moveEditorInDOM(A),A.onceAdded(),this.addToAnnotationStorage(A)}moveEditorInDOM(A){var l;null===(l=_classPrivateFieldGet(this,P))||void 0===l||l.moveElementInDOM(this.div,A.div,A.contentDiv,!0)}addToAnnotationStorage(A){!A.isEmpty()&&!this.annotationStorage.has(A.id)&&this.annotationStorage.setValue(A.id,A)}addOrRebuild(A){A.needsToBeRebuilt()?A.rebuild():this.add(A)}addANewEditor(A){this.addCommands({cmd:()=>{this.addOrRebuild(A)},undo:()=>{A.remove()},mustExec:!0})}addUndoableEditor(A){this.addCommands({cmd:()=>{this.addOrRebuild(A)},undo:()=>{A.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(this,o).getId()}deserialize(A){switch(A.annotationType){case h.AnnotationEditorType.FREETEXT:return T.FreeTextEditor.deserialize(A,this);case h.AnnotationEditorType.INK:return N.InkEditor.deserialize(A,this)}return null}setSelected(A){_classPrivateFieldGet(this,o).setSelected(A)}toggleSelected(A){_classPrivateFieldGet(this,o).toggleSelected(A)}isSelected(A){return _classPrivateFieldGet(this,o).isSelected(A)}unselect(A){_classPrivateFieldGet(this,o).unselect(A)}pointerup(A){if(!(0!==A.button||A.ctrlKey&&n.KeyboardManager.platform.isMac)&&A.target===this.div&&_classPrivateFieldGet(this,D)){if(_classPrivateFieldSet(this,D,!1),!_classPrivateFieldGet(this,M))return void _classPrivateFieldSet(this,M,!0);_classPrivateMethodGet(this,b,u).call(this,A)}}pointerdown(A){if(0!==A.button||A.ctrlKey&&n.KeyboardManager.platform.isMac||A.target!==this.div)return;_classPrivateFieldSet(this,D,!0);const p=_classPrivateFieldGet(this,o).getActive();_classPrivateFieldSet(this,M,!p||p.isEmpty())}drop(A){const l=A.dataTransfer.getData("text/plain"),p=_classPrivateFieldGet(this,o).getEditor(l);if(!p)return;A.preventDefault(),A.dataTransfer.dropEffect="move",_classPrivateMethodGet(this,g,t).call(this,p);const R=this.div.getBoundingClientRect();p.translate(A.clientX-R.x-p.startX,A.clientY-R.y-p.startY),this.moveEditorInDOM(p),p.div.focus()}dragover(A){A.preventDefault()}destroy(){var A;(null===(A=_classPrivateFieldGet(this,o).getActive())||void 0===A?void 0:A.parent)===this&&_classPrivateFieldGet(this,o).setActiveEditor(null);for(const p of _classPrivateFieldGet(this,O).values()){var l;null===(l=_classPrivateFieldGet(this,P))||void 0===l||l.removePointerInTextLayer(p.contentDiv),p.isAttachedToDOM=!1,p.div.remove(),p.parent=null}this.div=null,_classPrivateFieldGet(this,O).clear(),_classPrivateFieldGet(this,o).removeLayer(this)}render(A){this.viewport=A.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const l of _classPrivateFieldGet(this,o).getEditors(this.pageIndex))this.add(l);this.updateMode()}update(A){this.viewport=A.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[A,l,p,R]=this.viewport.viewBox;return[p-A,R-l]}get viewportBaseDimensions(){const{width:A,height:l,rotation:p}=this.viewport;return p%180==0?[A,l]:[l,A]}setDimensions(){const{width:A,height:l,rotation:p}=this.viewport,R=p%180!=0,L=Math.floor(A)+"px",H=Math.floor(l)+"px";this.div.style.width=R?H:L,this.div.style.height=R?L:H,this.div.setAttribute("data-main-rotation",p)}}function t(m){var A;m.parent!==this&&(this.attach(m),m.pageIndex=this.pageIndex,null===(A=m.parent)||void 0===A||A.detach(m),m.parent=this,m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))}function e(m){switch(_classPrivateFieldGet(this,o).getMode()){case h.AnnotationEditorType.FREETEXT:return new T.FreeTextEditor(m);case h.AnnotationEditorType.INK:return new N.InkEditor(m)}return null}function u(m){const A=this.getNextId(),l=_classPrivateMethodGet(this,C,e).call(this,{parent:this,id:A,x:m.offsetX,y:m.offsetY});return l&&this.add(l),l}function _(){_classPrivateFieldSet(this,F,!0);for(const m of _classPrivateFieldGet(this,O).values())m.isEmpty()&&m.remove();_classPrivateFieldSet(this,F,!1)}return _defineProperty(f,"_initialized",!1),f})()},(Y,r,x)=>{var n;Object.defineProperty(r,"__esModule",{value:!0}),r.FreeTextEditor=void 0;var h=x(1),T=x(7),N=x(6),K=new WeakMap,P=new WeakMap,M=new WeakMap,I=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakMap,F=new WeakSet,o=new WeakSet,g=new WeakSet,C=new WeakSet;class b extends N.AnnotationEditor{constructor(_){super({..._,name:"freeTextEditor"}),_classPrivateMethodInitSpec(this,C),_classPrivateMethodInitSpec(this,g),_classPrivateMethodInitSpec(this,o),_classPrivateMethodInitSpec(this,F),_classPrivateFieldInitSpec(this,K,{writable:!0,value:this.editorDivBlur.bind(this)}),_classPrivateFieldInitSpec(this,P,{writable:!0,value:this.editorDivFocus.bind(this)}),_classPrivateFieldInitSpec(this,M,{writable:!0,value:this.editorDivKeydown.bind(this)}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,j,{writable:!0,value:""}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:void 0}),_classPrivateFieldSet(this,I,_.color||b._defaultColor||N.AnnotationEditor._defaultLineColor),_classPrivateFieldSet(this,D,_.fontSize||b._defaultFontSize)}static initialize(_){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(A=>[A,_.get(A)]));const m=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(m.getPropertyValue("--freetext-padding"))}static updateDefaultParams(_,m){switch(_){case h.AnnotationEditorParamsType.FREETEXT_SIZE:b._defaultFontSize=m;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:b._defaultColor=m}}updateParams(_,m){switch(_){case h.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,F,y).call(this,m);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,o,f).call(this,m)}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,b._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,b._defaultColor||N.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,D)],[h.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,I)]]}getInitialTranslation(){return[-b._internalPadding*this.parent.scaleFactor,-(b._internalPadding+_classPrivateFieldGet(this,D))*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,M)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,P)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,K)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,M)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,P)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,K)),this.div.focus(),this.isEditing=!1)}focusin(_){super.focusin(_),_.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),_classPrivateFieldGet(this,O)||(_classPrivateFieldSet(this,O,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_classPrivateFieldSet(this,j,_classPrivateMethodGet(this,g,t).call(this).trimEnd()),_classPrivateMethodGet(this,C,e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(_){this.enableEditMode(),this.editorDiv.focus()}keydown(_){_.target===this.div&&"Enter"===_.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(_){b._keyboardManager.exec(this,_)}editorDivFocus(_){this.isEditing=!0}editorDivBlur(_){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let _,m;this.width&&(_=this.x,m=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),b._l10nPromise.get("editor_free_text_aria_label").then(l=>{var p;return null===(p=this.editorDiv)||void 0===p?void 0:p.setAttribute("aria-label",l)}),b._l10nPromise.get("free_text_default_content").then(l=>{var p;return null===(p=this.editorDiv)||void 0===p?void 0:p.setAttribute("default-content",l)}),this.editorDiv.contentEditable=!0;const{style:A}=this.editorDiv;if(A.fontSize=`calc(${_classPrivateFieldGet(this,D)}px * var(--scale-factor))`,A.color=_classPrivateFieldGet(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,T.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[l,p]=this.parent.viewportBaseDimensions;this.setAt(_*l,m*p,this.width*l,this.height*p);for(const R of _classPrivateFieldGet(this,j).split("\n")){const L=document.createElement("div");L.append(R?document.createTextNode(R):document.createElement("br")),this.editorDiv.append(L)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(_,m){const A=super.deserialize(_,m);return _classPrivateFieldSet(A,D,_.fontSize),_classPrivateFieldSet(A,I,h.Util.makeHexColor(..._.color)),_classPrivateFieldSet(A,j,_.value),A}serialize(){if(this.isEmpty())return null;const _=b._internalPadding*this.parent.scaleFactor,m=this.getRect(_,_),A=N.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:h.AnnotationEditorType.FREETEXT,color:A,fontSize:_classPrivateFieldGet(this,D),value:_classPrivateFieldGet(this,j),pageIndex:this.parent.pageIndex,rect:m,rotation:this.rotation}}}function y(u){const _=A=>{this.editorDiv.style.fontSize=`calc(${A}px * var(--scale-factor))`,this.translate(0,-(A-_classPrivateFieldGet(this,D))*this.parent.scaleFactor),_classPrivateFieldSet(this,D,A),_classPrivateMethodGet(this,C,e).call(this)},m=_classPrivateFieldGet(this,D);this.parent.addCommands({cmd:()=>{_(u)},undo:()=>{_(m)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function f(u){const _=_classPrivateFieldGet(this,I);this.parent.addCommands({cmd:()=>{_classPrivateFieldSet(this,I,u),this.editorDiv.style.color=u},undo:()=>{_classPrivateFieldSet(this,I,_),this.editorDiv.style.color=_},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function t(){const u=this.editorDiv.getElementsByTagName("div");if(0===u.length)return this.editorDiv.innerText;const _=[];for(let m=0,A=u.length;m<A;m++){const p=u[m].firstChild;_.push("#text"===(null==p?void 0:p.nodeName)?p.data:"")}return _.join("\n")}function e(){const[u,_]=this.parent.viewportBaseDimensions,m=this.div.getBoundingClientRect();this.width=m.width/u,this.height=m.height/_}n=b,_defineProperty(b,"_freeTextDefaultContent",""),_defineProperty(b,"_l10nPromise",void 0),_defineProperty(b,"_internalPadding",0),_defineProperty(b,"_defaultColor",null),_defineProperty(b,"_defaultFontSize",10),_defineProperty(b,"_keyboardManager",new T.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.prototype.commitOrRemove]])),_defineProperty(b,"_type","freetext"),r.FreeTextEditor=b},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InkEditor=void 0,Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function(){return T.fitCurve}});var n=x(1),h=x(6),T=x(25),N=x(7);const K=16;r.InkEditor=(()=>{var M,I=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakMap,F=new WeakMap,o=new WeakMap,g=new WeakMap,C=new WeakMap,b=new WeakMap,y=new WeakMap,f=new WeakMap,t=new WeakMap,e=new WeakMap,u=new WeakMap,_=new WeakSet,m=new WeakSet,A=new WeakSet,l=new WeakSet,p=new WeakSet,R=new WeakSet,L=new WeakSet,H=new WeakSet,G=new WeakSet,V=new WeakSet,U=new WeakSet,$=new WeakSet,q=new WeakSet,B=new WeakSet,a=new WeakSet,s=new WeakSet,v=new WeakSet,w=new WeakSet,E=new WeakSet,i=new WeakSet,d=new WeakSet,c=new WeakSet;class S extends h.AnnotationEditor{constructor(J){super({...J,name:"inkEditor"}),_classPrivateMethodInitSpec(this,c),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,i),_classPrivateMethodInitSpec(this,E),_classPrivateMethodInitSpec(this,w),_classPrivateMethodInitSpec(this,v),_classPrivateMethodInitSpec(this,s),_classPrivateMethodInitSpec(this,a),_classPrivateMethodInitSpec(this,B),_classPrivateMethodInitSpec(this,q),_classPrivateMethodInitSpec(this,$),_classPrivateMethodInitSpec(this,U),_classPrivateMethodInitSpec(this,V),_classPrivateMethodInitSpec(this,G),_classPrivateMethodInitSpec(this,H),_classPrivateMethodInitSpec(this,L),_classPrivateMethodInitSpec(this,R),_classPrivateMethodInitSpec(this,p),_classPrivateMethodInitSpec(this,l),_classPrivateMethodInitSpec(this,A),_classPrivateMethodInitSpec(this,m),_classPrivateMethodInitSpec(this,_),_classPrivateFieldInitSpec(this,I,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,j,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:this.canvasPointermove.bind(this)}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:this.canvasPointerleave.bind(this)}),_classPrivateFieldInitSpec(this,o,{writable:!0,value:this.canvasPointerup.bind(this)}),_classPrivateFieldInitSpec(this,g,{writable:!0,value:this.canvasPointerdown.bind(this)}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,b,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,y,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,f,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,t,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,u,{writable:!0,value:null}),this.color=J.color||null,this.thickness=J.thickness||null,this.opacity=J.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(J){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(ae=>[ae,J.get(ae)]))}static updateDefaultParams(J,ae){switch(J){case n.AnnotationEditorParamsType.INK_THICKNESS:S._defaultThickness=ae;break;case n.AnnotationEditorParamsType.INK_COLOR:S._defaultColor=ae;break;case n.AnnotationEditorParamsType.INK_OPACITY:S._defaultOpacity=ae/100}}updateParams(J,ae){switch(J){case n.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,_,k).call(this,ae);break;case n.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,m,z).call(this,ae);break;case n.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,A,Z).call(this,ae)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,S._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,S._defaultColor||h.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*S._defaultOpacity)]]}get propertiesToUpdate(){var J;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||S._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||S._defaultColor||h.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(J=this.opacity)&&void 0!==J?J:S._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(_classPrivateMethodGet(this,U,me).call(this),_classPrivateMethodGet(this,$,ne).call(this)),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet(this,q,oe).call(this)),_classPrivateMethodGet(this,d,W).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet(this,f).disconnect(),_classPrivateFieldSet(this,f,null),super.remove())}enableEditMode(){_classPrivateFieldGet(this,C)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,g)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,o)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,g)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,o)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){_classPrivateFieldGet(this,C)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet(this,C,!0),this.div.classList.add("disabled"),_classPrivateMethodGet(this,d,W).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(J){super.focusin(J),this.enableEditMode()}canvasPointerdown(J){0!==J.button||!this.isInEditMode()||_classPrivateFieldGet(this,C)||(this.setInForeground(),"mouse"!==J.type&&this.div.focus(),J.stopPropagation(),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,F)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,D)),_classPrivateMethodGet(this,R,pe).call(this,J.offsetX,J.offsetY))}canvasPointermove(J){J.stopPropagation(),_classPrivateMethodGet(this,L,le).call(this,J.offsetX,J.offsetY)}canvasPointerup(J){0===J.button&&this.isInEditMode()&&0!==this.currentPath.length&&(J.stopPropagation(),_classPrivateMethodGet(this,V,_e).call(this,J),this.setInBackground())}canvasPointerleave(J){_classPrivateMethodGet(this,V,_e).call(this,J),this.setInBackground()}render(){if(this.div)return this.div;let J,ae;this.width&&(J=this.x,ae=this.y),super.render(),S._l10nPromise.get("editor_ink_aria_label").then(Ae=>{var be;return null===(be=this.div)||void 0===be?void 0:be.setAttribute("aria-label",Ae)});const[ge,ee,X,Q]=_classPrivateMethodGet(this,l,re).call(this);if(this.setAt(ge,ee,0,0),this.setDims(X,Q),_classPrivateMethodGet(this,U,me).call(this),this.width){const[Ae,be]=this.parent.viewportBaseDimensions;this.setAt(J*Ae,ae*be,this.width*Ae,this.height*be),_classPrivateFieldSet(this,b,!0),_classPrivateMethodGet(this,q,oe).call(this),this.setDims(this.width*Ae,this.height*be),_classPrivateMethodGet(this,G,de).call(this),_classPrivateMethodGet(this,c,te).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet(this,$,ne).call(this),this.div}setDimensions(J,ae){const ge=Math.round(J),ee=Math.round(ae);if(_classPrivateFieldGet(this,t)===ge&&_classPrivateFieldGet(this,e)===ee)return;_classPrivateFieldSet(this,t,ge),_classPrivateFieldSet(this,e,ee),this.canvas.style.visibility="hidden",_classPrivateFieldGet(this,I)&&Math.abs(_classPrivateFieldGet(this,I)-J/ae)>.01&&(ae=Math.ceil(J/_classPrivateFieldGet(this,I)),this.setDims(J,ae));const[X,Q]=this.parent.viewportBaseDimensions;this.width=J/X,this.height=ae/Q,_classPrivateFieldGet(this,C)&&_classPrivateMethodGet(this,B,Fe).call(this,J,ae),_classPrivateMethodGet(this,q,oe).call(this),_classPrivateMethodGet(this,G,de).call(this),this.canvas.style.visibility="visible"}static deserialize(J,ae){const ge=super.deserialize(J,ae);ge.thickness=J.thickness,ge.color=n.Util.makeHexColor(...J.color),ge.opacity=J.opacity;const[ee,X]=ae.pageDimensions,Q=ge.width*ee,Ae=ge.height*X,be=ae.scaleFactor,he=J.thickness/2;_classPrivateFieldSet(ge,I,Q/Ae),_classPrivateFieldSet(ge,C,!0),_classPrivateFieldSet(ge,t,Math.round(Q)),_classPrivateFieldSet(ge,e,Math.round(Ae));for(const{bezier:ve}of J.paths){const Ee=[];ge.paths.push(Ee);let Se=be*(ve[0]-he),we=be*(Ae-ve[1]-he);for(let Te=2,Re=ve.length;Te<Re;Te+=6){const Ge=be*(ve[Te+4]-he),Oe=be*(Ae-ve[Te+5]-he);Ee.push([[Se,we],[be*(ve[Te]-he),be*(Ae-ve[Te+1]-he)],[be*(ve[Te+2]-he),be*(Ae-ve[Te+3]-he)],[Ge,Oe]]),Se=Ge,we=Oe}const ke=_classStaticPrivateMethodGet(this,S,Me).call(this,Ee);ge.bezierPath2D.push(ke)}const ce=_classPrivateMethodGet(ge,E,Pe).call(ge);return _classPrivateFieldSet(ge,O,Math.max(K,ce[2]-ce[0])),_classPrivateFieldSet(ge,j,Math.max(K,ce[3]-ce[1])),_classPrivateMethodGet(ge,B,Fe).call(ge,Q,Ae),ge}serialize(){if(this.isEmpty())return null;const J=this.getRect(0,0),ae=this.rotation%180==0?J[3]-J[1]:J[2]-J[0],ge=h.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:ge,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,s,fe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,ae),pageIndex:this.parent.pageIndex,rect:J,rotation:this.rotation}}}function k(se){const J=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=se,_classPrivateMethodGet(this,d,W).call(this)},undo:()=>{this.thickness=J,_classPrivateMethodGet(this,d,W).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function z(se){const J=this.color;this.parent.addCommands({cmd:()=>{this.color=se,_classPrivateMethodGet(this,G,de).call(this)},undo:()=>{this.color=J,_classPrivateMethodGet(this,G,de).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Z(se){se/=100;const J=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=se,_classPrivateMethodGet(this,G,de).call(this)},undo:()=>{this.opacity=J,_classPrivateMethodGet(this,G,de).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function re(){const{width:se,height:J,rotation:ae}=this.parent.viewport;switch(ae){case 90:return[0,se,se,J];case 180:return[se,J,se,J];case 270:return[J,0,se,J];default:return[0,0,se,J]}}function ie(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,N.opacityToHex)(this.opacity)}`}function pe(se,J){var ae;this.isEditing=!0,_classPrivateFieldGet(this,b)||(_classPrivateFieldSet(this,b,!0),_classPrivateMethodGet(this,q,oe).call(this),this.thickness||(this.thickness=M._defaultThickness),this.color||(this.color=M._defaultColor||h.AnnotationEditor._defaultLineColor),null!==(ae=this.opacity)&&void 0!==ae||(this.opacity=M._defaultOpacity)),this.currentPath.push([se,J]),_classPrivateFieldSet(this,y,null),_classPrivateMethodGet(this,p,ie).call(this),this.ctx.beginPath(),this.ctx.moveTo(se,J),_classPrivateFieldSet(this,u,()=>{_classPrivateFieldGet(this,u)&&(_classPrivateFieldGet(this,y)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):_classPrivateMethodGet(this,G,de).call(this),this.ctx.lineTo(..._classPrivateFieldGet(this,y)),_classPrivateFieldSet(this,y,null),this.ctx.stroke()),window.requestAnimationFrame(_classPrivateFieldGet(this,u)))}),window.requestAnimationFrame(_classPrivateFieldGet(this,u))}function le(se,J){const[ae,ge]=this.currentPath.at(-1);se===ae&&J===ge||(this.currentPath.push([se,J]),_classPrivateFieldSet(this,y,[se,J]))}function ue(se,J){this.ctx.closePath(),_classPrivateFieldSet(this,u,null),se=Math.min(Math.max(se,0),this.canvas.width),J=Math.min(Math.max(J,0),this.canvas.height);const[ae,ge]=this.currentPath.at(-1);let ee;if((se!==ae||J!==ge)&&this.currentPath.push([se,J]),1!==this.currentPath.length)ee=(0,T.fitCurve)(this.currentPath,30,null);else{const be=[se,J];ee=[[be,be.slice(),be.slice(),be]]}const X=_classStaticPrivateMethodGet(M,M,Me).call(M,ee);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(ee),this.bezierPath2D.push(X),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(_classPrivateMethodGet(this,U,me).call(this),_classPrivateMethodGet(this,$,ne).call(this)),_classPrivateMethodGet(this,d,W).call(this))},mustExec:!0})}function de(){if(this.isEmpty())return void _classPrivateMethodGet(this,a,Le).call(this);_classPrivateMethodGet(this,p,ie).call(this);const{canvas:se,ctx:J}=this;J.setTransform(1,0,0,1,0,0),J.clearRect(0,0,se.width,se.height),_classPrivateMethodGet(this,a,Le).call(this);for(const ae of this.bezierPath2D)J.stroke(ae)}function _e(se){_classPrivateMethodGet(this,H,ue).call(this,se.offsetX,se.offsetY),this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,F)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,D)),this.parent.addToAnnotationStorage(this)}function me(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",M._l10nPromise.get("editor_ink_canvas_aria_label").then(se=>{var J;return null===(J=this.canvas)||void 0===J?void 0:J.setAttribute("aria-label",se)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function ne(){_classPrivateFieldSet(this,f,new ResizeObserver(se=>{const J=se[0].contentRect;J.width&&J.height&&this.setDimensions(J.width,J.height)})),_classPrivateFieldGet(this,f).observe(this.div)}function oe(){if(!_classPrivateFieldGet(this,b))return;const[se,J]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*se),this.canvas.height=Math.ceil(this.height*J),_classPrivateMethodGet(this,a,Le).call(this)}function Fe(se,J){const ae=_classPrivateMethodGet(this,i,ye).call(this),ge=(se-ae)/_classPrivateFieldGet(this,O),ee=(J-ae)/_classPrivateFieldGet(this,j);this.scaleFactor=Math.min(ge,ee)}function Le(){const se=_classPrivateMethodGet(this,i,ye).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+se,this.translationY*this.scaleFactor+se)}function Me(se){const J=new Path2D;for(let ae=0,ge=se.length;ae<ge;ae++){const[ee,X,Q,Ae]=se[ae];0===ae&&J.moveTo(...ee),J.bezierCurveTo(X[0],X[1],Q[0],Q[1],Ae[0],Ae[1])}return J}function fe(se,J,ae,ge){const X=[],Q=this.thickness/2;let Ae,be;for(const he of this.paths){Ae=[],be=[];for(let ce=0,ve=he.length;ce<ve;ce++){const[Ee,Se,we,ke]=he[ce],Te=se*(Ee[0]+J)+Q,Re=ge-se*(Ee[1]+ae)-Q,De=se*(Se[0]+J)+Q,Be=ge-se*(Se[1]+ae)-Q,Ne=se*(we[0]+J)+Q,We=ge-se*(we[1]+ae)-Q,Ge=se*(ke[0]+J)+Q,Oe=ge-se*(ke[1]+ae)-Q;0===ce&&(Ae.push(Te,Re),be.push(Te,Re)),Ae.push(De,Be,Ne,We,Ge,Oe),_classPrivateMethodGet(this,v,Ce).call(this,Te,Re,De,Be,Ne,We,Ge,Oe,4,be)}X.push({bezier:Ae,points:be})}return X}function Ce(se,J,ae,ge,ee,X,Q,Ae,be,he){if(_classPrivateMethodGet(this,w,xe).call(this,se,J,ae,ge,ee,X,Q,Ae))he.push(Q,Ae);else{for(let ce=1;ce<be-1;ce++){const ve=ce/be,Ee=1-ve;let Se=ve*se+Ee*ae,we=ve*J+Ee*ge,ke=ve*ae+Ee*ee,Te=ve*ge+Ee*X;Se=ve*Se+Ee*ke,we=ve*we+Ee*Te,ke=ve*ke+Ee*(ve*ee+Ee*Q),Te=ve*Te+Ee*(ve*X+Ee*Ae),Se=ve*Se+Ee*ke,we=ve*we+Ee*Te,he.push(Se,we)}he.push(Q,Ae)}}function xe(se,J,ae,ge,ee,X,Q,Ae){const ce=(3*ge-2*J-Ae)**2,Ee=(3*X-J-2*Ae)**2;return Math.max((3*ae-2*se-Q)**2,(3*ee-se-2*Q)**2)+Math.max(ce,Ee)<=10}function Pe(){let se=1/0,J=-1/0,ae=1/0,ge=-1/0;for(const ee of this.paths)for(const[X,Q,Ae,be]of ee){const he=n.Util.bezierBoundingBox(...X,...Q,...Ae,...be);se=Math.min(se,he[0]),ae=Math.min(ae,he[1]),J=Math.max(J,he[2]),ge=Math.max(ge,he[3])}return[se,ae,J,ge]}function ye(){return _classPrivateFieldGet(this,C)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function W(se=!1){if(this.isEmpty())return;if(!_classPrivateFieldGet(this,C))return void _classPrivateMethodGet(this,G,de).call(this);const J=_classPrivateMethodGet(this,E,Pe).call(this),ae=_classPrivateMethodGet(this,i,ye).call(this);_classPrivateFieldSet(this,O,Math.max(K,J[2]-J[0])),_classPrivateFieldSet(this,j,Math.max(K,J[3]-J[1]));const ge=Math.ceil(ae+_classPrivateFieldGet(this,O)*this.scaleFactor),ee=Math.ceil(ae+_classPrivateFieldGet(this,j)*this.scaleFactor),[X,Q]=this.parent.viewportBaseDimensions;this.width=ge/X,this.height=ee/Q,_classPrivateFieldSet(this,I,ge/ee),_classPrivateMethodGet(this,c,te).call(this);const Ae=this.translationX,be=this.translationY;this.translationX=-J[0],this.translationY=-J[1],_classPrivateMethodGet(this,q,oe).call(this),_classPrivateMethodGet(this,G,de).call(this),_classPrivateFieldSet(this,t,ge),_classPrivateFieldSet(this,e,ee),this.setDims(ge,ee);const he=se?ae/this.scaleFactor/2:0;this.translate(Ae-this.translationX-he,be-this.translationY-he)}function te(){const{style:se}=this.div;_classPrivateFieldGet(this,I)>=1?(se.minHeight="16px",se.minWidth=`${Math.round(_classPrivateFieldGet(this,I)*K)}px`):(se.minWidth="16px",se.minHeight=`${Math.round(K/_classPrivateFieldGet(this,I))}px`)}return M=S,_defineProperty(S,"_defaultColor",null),_defineProperty(S,"_defaultOpacity",1),_defineProperty(S,"_defaultThickness",1),_defineProperty(S,"_l10nPromise",void 0),_defineProperty(S,"_type","ink"),S})()},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.fitCurve=void 0;const n=x(26);r.fitCurve=n},Y=>{function x(F,o,g,C,b){var f,t,e,u,_,m,A,l,p,R,L,H,G;if(2===F.length)return H=O.vectorLen(O.subtract(F[0],F[1]))/3,[f=[F[0],O.addArrays(F[0],O.mulItems(o,H)),O.addArrays(F[1],O.mulItems(g,H)),F[1]]];if(t=function K(F){var g,C,b,o=[];return F.forEach((y,f)=>{g=f?C+O.vectorLen(O.subtract(y,b)):0,o.push(g),C=g,b=y}),o=o.map(y=>y/C)}(F),[f,u,m]=n(F,t,t,o,g,b),0===u||u<C)return[f];if(u<C*C)for(e=t,_=u,A=m,G=0;G<20;G++){if(e=T(f,F,e),[f,u,m]=n(F,t,e,o,g,b),u<C)return[f];if(m===A){let V=u/_;if(V>.9999&&V<1.0001)break}_=u,A=m}return L=[],(l=O.subtract(F[m-1],F[m+1])).every(V=>0===V)&&(l=O.subtract(F[m-1],F[m]),[l[0],l[1]]=[-l[1],l[0]]),p=O.normalize(l),R=O.mulItems(p,-1),(L=L.concat(x(F.slice(0,m+1),o,p,C,b))).concat(x(F.slice(m),R,g,C,b))}function n(F,o,g,C,b,y){var f,t,e;return f=function h(F,o,g,C){var b,y,f,t,e,u,A,l,p,R,L,H,G,V,U,$=F[0],q=F[F.length-1];for(b=[$,null,null,q],y=O.zeros_Xx2x2(o.length),L=0,H=o.length;L<H;L++)(f=y[L])[0]=O.mulItems(g,3*(V=o[L])*((U=1-V)*U)),f[1]=O.mulItems(C,3*U*(V*V));for(t=[[0,0],[0,0]],e=[0,0],L=0,H=F.length;L<H;L++)V=o[L],t[0][0]+=O.dot((f=y[L])[0],f[0]),t[0][1]+=O.dot(f[0],f[1]),t[1][0]+=O.dot(f[0],f[1]),t[1][1]+=O.dot(f[1],f[1]),G=O.subtract(F[L],D.q([$,$,q,q],V)),e[0]+=O.dot(f[0],G),e[1]+=O.dot(f[1],G);return A=0==(u=t[0][0]*t[1][1]-t[1][0]*t[0][1])?0:(e[0]*t[1][1]-e[1]*t[0][1])/u,l=0===u?0:(t[0][0]*e[1]-t[1][0]*e[0])/u,A<(p=1e-6*(R=O.vectorLen(O.subtract($,q))))||l<p?(b[1]=O.addArrays($,O.mulItems(g,R/3)),b[2]=O.addArrays(q,O.mulItems(C,R/3))):(b[1]=O.addArrays($,O.mulItems(g,A)),b[2]=O.addArrays(q,O.mulItems(C,l))),b}(F,g,C,b),[t,e]=function P(F,o,g){var C,b,y,f,t,e,u,_;b=0,y=Math.floor(F.length/2);const m=M(o,10);for(t=0,e=F.length;t<e;t++)u=F[t],_=I(0,g[t],m,10),(C=(f=O.subtract(D.q(o,_),u))[0]*f[0]+f[1]*f[1])>b&&(b=C,y=t);return[b,y]}(F,f,o),y&&y({bez:f,points:F,params:o,maxErr:t,maxPoint:e}),[f,t,e]}function T(F,o,g){return g.map((C,b)=>function N(F,o,g){var C=O.subtract(D.q(F,g),o),b=D.qprime(F,g),y=O.mulMatrix(C,b),f=O.sum(O.squareItems(b))+2*O.mulMatrix(C,D.qprimeprime(F,g));return 0===f?g:g-y/f}(F,o[b],C))}var M=function(F,o){for(var g,C=[0],b=F[0],y=0,f=1;f<=o;f++)g=D.q(F,f/o),y+=O.vectorLen(O.subtract(g,b)),C.push(y),b=g;return C.map(t=>t/y)};function I(F,o,g,C){if(o<0)return 0;if(o>1)return 1;for(var y,t,e,u=1;u<=C;u++)if(o<=g[u]){e=(o-(y=g[u-1]))/(g[u]-y)*(u/C-(t=(u-1)/C))+t;break}return e}function j(F,o){return O.normalize(O.subtract(F,o))}class O{static zeros_Xx2x2(o){for(var g=[];o--;)g.push([0,0]);return g}static mulItems(o,g){return o.map(C=>C*g)}static mulMatrix(o,g){return o.reduce((C,b,y)=>C+b*g[y],0)}static subtract(o,g){return o.map((C,b)=>C-g[b])}static addArrays(o,g){return o.map((C,b)=>C+g[b])}static addItems(o,g){return o.map(C=>C+g)}static sum(o){return o.reduce((g,C)=>g+C)}static dot(o,g){return O.mulMatrix(o,g)}static vectorLen(o){return Math.hypot(...o)}static divItems(o,g){return o.map(C=>C/g)}static squareItems(o){return o.map(g=>g*g)}static normalize(o){return this.divItems(o,this.vectorLen(o))}}class D{static q(o,g){var C=1-g,b=O.mulItems(o[0],C*C*C),y=O.mulItems(o[1],3*C*C*g),f=O.mulItems(o[2],3*C*g*g),t=O.mulItems(o[3],g*g*g);return O.addArrays(O.addArrays(b,y),O.addArrays(f,t))}static qprime(o,g){var C=1-g,b=O.mulItems(O.subtract(o[1],o[0]),3*C*C),y=O.mulItems(O.subtract(o[2],o[1]),6*C*g),f=O.mulItems(O.subtract(o[3],o[2]),3*g*g);return O.addArrays(O.addArrays(b,y),f)}static qprimeprime(o,g){return O.addArrays(O.mulItems(O.addArrays(O.subtract(o[2],O.mulItems(o[1],2)),o[0]),6*(1-g)),O.mulItems(O.addArrays(O.subtract(o[3],O.mulItems(o[2],2)),o[1]),6*g))}}Y.exports=function r(F,o,g){if(!Array.isArray(F))throw new TypeError("First argument should be an array");if(F.forEach(f=>{if(!Array.isArray(f)||f.some(t=>"number"!=typeof t)||f.length!==F[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(F=F.filter((f,t)=>0===t||!f.every((e,u)=>e===F[t-1][u]))).length<2)return[];const C=F.length,b=j(F[1],F[0]),y=j(F[C-2],F[C-1]);return x(F,b,y,o,g)},Y.exports.fitCubic=x,Y.exports.createTangent=j},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var n=x(1),h=x(8),T=x(5),N=x(28),K=x(29);const P=1e3,I=new WeakSet;function j(E){return{width:E[2]-E[0],height:E[3]-E[1]}}class O{static create(i){switch(i.data.annotationType){case n.AnnotationType.LINK:return new F(i);case n.AnnotationType.TEXT:return new o(i);case n.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new C(i);case"Btn":return i.data.radioButton?new y(i):i.data.checkBox?new b(i):new f(i);case"Ch":return new t(i)}return new g(i);case n.AnnotationType.POPUP:return new e(i);case n.AnnotationType.FREETEXT:return new _(i);case n.AnnotationType.LINE:return new m(i);case n.AnnotationType.SQUARE:return new A(i);case n.AnnotationType.CIRCLE:return new l(i);case n.AnnotationType.POLYLINE:return new p(i);case n.AnnotationType.CARET:return new L(i);case n.AnnotationType.INK:return new H(i);case n.AnnotationType.POLYGON:return new R(i);case n.AnnotationType.HIGHLIGHT:return new G(i);case n.AnnotationType.UNDERLINE:return new V(i);case n.AnnotationType.SQUIGGLY:return new U(i);case n.AnnotationType.STRIKEOUT:return new $(i);case n.AnnotationType.STAMP:return new q(i);case n.AnnotationType.FILEATTACHMENT:return new B(i);default:return new D(i)}}}class D{constructor(i,{isRenderable:d=!1,ignoreBorder:c=!1,createQuadrilaterals:S=!1}={}){this.isRenderable=d,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,d&&(this.container=this._createContainer(c)),S&&(this.quadrilaterals=this._createQuadrilaterals(c))}_createContainer(i=!1){const d=this.data,c=this.page,S=this.viewport,k=document.createElement("section"),{width:z,height:Z}=j(d.rect),[re,ie,pe,le]=S.viewBox,ue=pe-re,de=le-ie;k.setAttribute("data-annotation-id",d.id);const _e=n.Util.normalizeRect([d.rect[0],c.view[3]-d.rect[1]+c.view[1],d.rect[2],c.view[3]-d.rect[3]+c.view[1]]);if(!i&&d.borderStyle.width>0){k.style.borderWidth=`${d.borderStyle.width}px`;const ne=d.borderStyle.horizontalCornerRadius,oe=d.borderStyle.verticalCornerRadius;switch(ne>0||oe>0?k.style.borderRadius=`calc(${ne}px * var(--scale-factor)) / calc(${oe}px * var(--scale-factor))`:this instanceof y&&(k.style.borderRadius=`calc(${z}px * var(--scale-factor)) / calc(${Z}px * var(--scale-factor))`),d.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:k.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:k.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:k.style.borderBottomStyle="solid"}const Fe=d.borderColor||null;Fe?k.style.borderColor=n.Util.makeHexColor(0|Fe[0],0|Fe[1],0|Fe[2]):k.style.borderWidth=0}k.style.left=100*(_e[0]-re)/ue+"%",k.style.top=100*(_e[1]-ie)/de+"%";const{rotation:me}=d;return d.hasOwnCanvas||0===me?(k.style.width=100*z/ue+"%",k.style.height=100*Z/de+"%"):this.setRotation(me,k),k}setRotation(i,d=this.container){const[c,S,k,z]=this.viewport.viewBox,Z=k-c,re=z-S,{width:ie,height:pe}=j(this.data.rect);let le,ue;i%180==0?(le=100*ie/Z,ue=100*pe/re):(le=100*pe/Z,ue=100*ie/re),d.style.width=`${le}%`,d.style.height=`${ue}%`,d.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(d,c,S)=>{const k=S.detail[d];S.target.style[c]=N.ColorConverters[`${k[0]}_HTML`](k.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:d=>{const c=d.detail.display%2==1;this.container.style.visibility=c?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:c,print:0===d.detail.display||3===d.detail.display})},print:d=>{this.annotationStorage.setValue(this.data.id,{print:d.detail.print})},hidden:d=>{this.container.style.visibility=d.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:d.detail.hidden})},focus:d=>{setTimeout(()=>d.target.focus({preventScroll:!1}),0)},userName:d=>{d.target.title=d.detail.userName},readonly:d=>{d.detail.readonly?d.target.setAttribute("readonly",""):d.target.removeAttribute("readonly")},required:d=>{this._setRequired(d.target,d.detail.required)},bgColor:d=>{i("bgColor","backgroundColor",d)},fillColor:d=>{i("fillColor","backgroundColor",d)},fgColor:d=>{i("fgColor","color",d)},textColor:d=>{i("textColor","color",d)},borderColor:d=>{i("borderColor","borderColor",d)},strokeColor:d=>{i("strokeColor","borderColor",d)},rotation:d=>{const c=d.detail.rotation;this.setRotation(c),this.annotationStorage.setValue(this.data.id,{rotation:c})}})}_dispatchEventFromSandbox(i,d){const c=this._commonActions;for(const S of Object.keys(d.detail)){const k=i[S]||c[S];k&&k(d)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const d=this.annotationStorage.getRawValue(this.data.id);if(!d)return;const c=this._commonActions;for(const[S,k]of Object.entries(d)){const z=c[S];z&&(z({detail:{[S]:k},target:i}),delete d[S])}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const d=[],c=this.data.rect;for(const S of this.data.quadPoints)this.data.rect=[S[2].x,S[2].y,S[1].x,S[1].y],d.push(this._createContainer(i));return this.data.rect=c,d}_createPopup(i,d){let c=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,c=this.quadrilaterals[0]),i||((i=document.createElement("div")).className="popupTriggerArea",c.append(i));const k=new u({container:c,trigger:i,color:d.color,titleObj:d.titleObj,modificationDate:d.modificationDate,contentsObj:d.contentsObj,richText:d.richText,hideWrapper:!0}).render();k.style.left="100%",c.append(k)}_renderQuadrilaterals(i){for(const d of this.quadrilaterals)d.className=i;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,d=null){const c=[];if(this._fieldObjects){const S=this._fieldObjects[i];if(S)for(const{page:k,id:z,exportValues:Z}of S){if(-1===k||z===d)continue;const re="string"==typeof Z?Z:null,ie=document.querySelector(`[data-element-id="${z}"]`);!ie||I.has(ie)?c.push({id:z,exportValue:re,domElement:ie}):(0,n.warn)(`_getElementsByName - element not allowed: ${z}`)}return c}for(const S of document.getElementsByName(i)){const{id:k,exportValue:z}=S;k!==d&&I.has(S)&&c.push({id:k,exportValue:z,domElement:S})}return c}static get platform(){const i=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class F extends D{constructor(i,d=null){super(i,{isRenderable:!0,ignoreBorder:!(null==d||!d.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:d}=this,c=document.createElement("a");c.setAttribute("data-element-id",i.id);let S=!1;return i.url?(d.addLinkAttributes(c,i.url,i.newWindow),S=!0):i.action?(this._bindNamedAction(c,i.action),S=!0):i.dest?(this._bindLink(c,i.dest),S=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(c,i),S=!0),i.resetForm?(this._bindResetFormAction(c,i.resetForm),S=!0):this.isTooltipOnly&&!S&&(this._bindLink(c,""),S=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((k,z)=>{const Z=0===z?c:c.cloneNode();return k.append(Z),k}):(this.container.className="linkAnnotation",S&&this.container.append(c),this.container)}_bindLink(i,d){i.href=this.linkService.getDestinationHash(d),i.onclick=()=>(d&&this.linkService.goToDestination(d),!1),(d||""===d)&&(i.className="internalLink")}_bindNamedAction(i,d){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(d),!1),i.className="internalLink"}_bindJSAction(i,d){i.href=this.linkService.getAnchorUrl("");const c=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const S of Object.keys(d.actions)){const k=c.get(S);k&&(i[k]=()=>{var z;return null===(z=this.linkService.eventBus)||void 0===z||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d.id,name:S}}),!1})}i.onclick||(i.onclick=()=>!1),i.className="internalLink"}_bindResetFormAction(i,d){const c=i.onclick;if(c||(i.href=this.linkService.getAnchorUrl("")),i.className="internalLink",!this._fieldObjects)return(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(c||(i.onclick=()=>!1));i.onclick=()=>{c&&c();const{fields:S,refs:k,include:z}=d,Z=[];if(0!==S.length||0!==k.length){const le=new Set(k);for(const ue of S){const de=this._fieldObjects[ue]||[];for(const{id:_e}of de)le.add(_e)}for(const ue of Object.values(this._fieldObjects))for(const de of ue)le.has(de.id)===z&&Z.push(de)}else for(const le of Object.values(this._fieldObjects))Z.push(...le);const re=this.annotationStorage,ie=[];for(const le of Z){const{id:ue}=le;switch(ie.push(ue),le.type){case"text":case"combobox":case"listbox":re.setValue(ue,{value:le.defaultValue||""});break;case"checkbox":case"radiobutton":re.setValue(ue,{value:le.defaultValue===le.exportValues});break;default:continue}const de=document.querySelector(`[data-element-id="${ue}"]`);de&&(I.has(de)?de.dispatchEvent(new Event("resetform")):(0,n.warn)(`_bindResetFormAction - element not allowed: ${ue}`))}var pe;return this.enableScripting&&(null===(pe=this.linkService.eventBus)||void 0===pe||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ie,name:"ResetForm"}})),!1}}}class o extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str)})}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class g extends D{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){const{isWin:d,isMac:c}=D.platform;return d&&i.ctrlKey||c&&i.metaKey}_setEventListener(i,d,c,S){d.includes("mouse")?i.addEventListener(d,k=>{var z;null===(z=this.linkService.eventBus)||void 0===z||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:c,value:S(k),shift:k.shiftKey,modifier:this._getKeyModifier(k)}})}):i.addEventListener(d,k=>{var z;null===(z=this.linkService.eventBus)||void 0===z||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:c,value:S(k)}})})}_setEventListeners(i,d,c){for(const[k,z]of d){var S;("Action"===z||null!==(S=this.data.actions)&&void 0!==S&&S[z])&&this._setEventListener(i,k,z,c)}}_setBackgroundColor(i){const d=this.data.backgroundColor||null;i.style.backgroundColor=null===d?"transparent":n.Util.makeHexColor(d[0],d[1],d[2])}_setTextStyle(i){const{fontColor:c}=this.data.defaultAppearanceData,S=this.data.defaultAppearanceData.fontSize||9,k=i.style;let z;if(this.data.multiLine){const Z=Math.abs(this.data.rect[3]-this.data.rect[1]),re=Math.round(Z/(n.LINE_FACTOR*S))||1;z=Math.min(S,Math.round(Z/re/n.LINE_FACTOR))}else{const Z=Math.abs(this.data.rect[3]-this.data.rect[1]);z=Math.min(S,Math.round(Z/n.LINE_FACTOR))}k.fontSize=`calc(${z}px * var(--scale-factor))`,k.color=n.Util.makeHexColor(c[0],c[1],c[2]),null!==this.data.textAlignment&&(k.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(i,d){d?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",d)}}class C extends g{constructor(i){super(i,{isRenderable:i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue})}setPropertyOnSiblings(i,d,c,S){const k=this.annotationStorage;for(const z of this._getElementsByName(i.name,i.id))z.domElement&&(z.domElement[d]=c),k.setValue(z.id,{[S]:c})}render(){const i=this.annotationStorage,d=this.data.id;this.container.className="textWidgetAnnotation";let c=null;if(this.renderForms){const k=i.getValue(d,{value:this.data.fieldValue});let z=k.formattedValue||k.value||"";const Z=i.getValue(d,{charLimit:this.data.maxLen}).charLimit;Z&&z.length>Z&&(z=z.slice(0,Z));const re={userValue:z,formattedValue:null,valueOnFocus:""};this.data.multiLine?(c=document.createElement("textarea"),c.textContent=z,this.data.doNotScroll&&(c.style.overflowY="hidden")):(c=document.createElement("input"),c.type="text",c.setAttribute("value",z),this.data.doNotScroll&&(c.style.overflowX="hidden")),I.add(c),c.setAttribute("data-element-id",d),c.disabled=this.data.readOnly,c.name=this.data.fieldName,c.tabIndex=P,this._setRequired(c,this.data.required),Z&&(c.maxLength=Z),c.addEventListener("input",pe=>{i.setValue(d,{value:pe.target.value}),this.setPropertyOnSiblings(c,"value",pe.target.value,"value")}),c.addEventListener("resetform",pe=>{var le;const ue=null!==(le=this.data.defaultFieldValue)&&void 0!==le?le:"";c.value=re.userValue=ue,re.formattedValue=null});let ie=pe=>{const{formattedValue:le}=re;null!=le&&(pe.target.value=le),pe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var S;c.addEventListener("focus",le=>{re.userValue&&(le.target.value=re.userValue),re.valueOnFocus=le.target.value}),c.addEventListener("updatefromsandbox",le=>{this._dispatchEventFromSandbox({value(de){var _e;re.userValue=null!==(_e=de.detail.value)&&void 0!==_e?_e:"",i.setValue(d,{value:re.userValue.toString()}),de.target.value=re.userValue},formattedValue(de){const{formattedValue:_e}=de.detail;re.formattedValue=_e,null!=_e&&de.target!==document.activeElement&&(de.target.value=_e),i.setValue(d,{formattedValue:_e})},selRange(de){de.target.setSelectionRange(...de.detail.selRange)},charLimit:de=>{var _e;const{charLimit:me}=de.detail,{target:ne}=de;if(0===me)return void ne.removeAttribute("maxLength");ne.setAttribute("maxLength",me);let oe=re.userValue;!oe||oe.length<=me||(oe=oe.slice(0,me),ne.value=re.userValue=oe,i.setValue(d,{value:oe}),null===(_e=this.linkService.eventBus)||void 0===_e||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:oe,willCommit:!0,commitKey:1,selStart:ne.selectionStart,selEnd:ne.selectionEnd}}))}},le)}),c.addEventListener("keydown",le=>{var ue;let de=-1;if("Escape"===le.key?de=0:"Enter"===le.key?de=2:"Tab"===le.key&&(de=3),-1===de)return;const{value:_e}=le.target;re.valueOnFocus!==_e&&(re.userValue=_e,null===(ue=this.linkService.eventBus)||void 0===ue||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:_e,willCommit:!0,commitKey:de,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}}))});const pe=ie;ie=null,c.addEventListener("blur",le=>{const{value:ue}=le.target;var de;re.userValue=ue,this._mouseState.isDown&&re.valueOnFocus!==ue&&(null===(de=this.linkService.eventBus)||void 0===de||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:ue,willCommit:!0,commitKey:1,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}})),pe(le)}),null!==(S=this.data.actions)&&void 0!==S&&S.Keystroke&&c.addEventListener("beforeinput",le=>{var ue;const{data:de,target:_e}=le,{value:me,selectionStart:ne,selectionEnd:oe}=_e;let Fe=ne,Le=oe;switch(le.inputType){case"deleteWordBackward":{const Me=me.substring(0,ne).match(/\w*[^\w]*$/);Me&&(Fe-=Me[0].length);break}case"deleteWordForward":{const Me=me.substring(ne).match(/^[^\w]*\w*/);Me&&(Le+=Me[0].length);break}case"deleteContentBackward":ne===oe&&(Fe-=1);break;case"deleteContentForward":ne===oe&&(Le+=1)}le.preventDefault(),null===(ue=this.linkService.eventBus)||void 0===ue||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:me,change:de||"",willCommit:!1,selStart:Fe,selEnd:Le}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],le=>le.target.value)}if(ie&&c.addEventListener("blur",ie),this.data.comb){const le=(this.data.rect[2]-this.data.rect[0])/Z;c.classList.add("comb"),c.style.letterSpacing=`calc(${le}px * var(--scale-factor) - 1ch)`}}else c=document.createElement("div"),c.textContent=this.data.fieldValue,c.style.verticalAlign="middle",c.style.display="table-cell";return this._setTextStyle(c),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class b extends g{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,d=this.data,c=d.id;let S=i.getValue(c,{value:d.exportValue===d.fieldValue}).value;"string"==typeof S&&(S="Off"!==S,i.setValue(c,{value:S})),this.container.className="buttonWidgetAnnotation checkBox";const k=document.createElement("input");return I.add(k),k.setAttribute("data-element-id",c),k.disabled=d.readOnly,this._setRequired(k,this.data.required),k.type="checkbox",k.name=d.fieldName,S&&k.setAttribute("checked",!0),k.setAttribute("exportValue",d.exportValue),k.tabIndex=P,k.addEventListener("change",z=>{const{name:Z,checked:re}=z.target;for(const ie of this._getElementsByName(Z,c)){const pe=re&&ie.exportValue===d.exportValue;ie.domElement&&(ie.domElement.checked=pe),i.setValue(ie.id,{value:pe})}i.setValue(c,{value:re})}),k.addEventListener("resetform",z=>{z.target.checked=(d.defaultFieldValue||"Off")===d.exportValue}),this.enableScripting&&this.hasJSActions&&(k.addEventListener("updatefromsandbox",z=>{this._dispatchEventFromSandbox({value(re){re.target.checked="Off"!==re.detail.value,i.setValue(c,{value:re.target.checked})}},z)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.checked)),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class y extends g{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=this.annotationStorage,d=this.data,c=d.id;let S=i.getValue(c,{value:d.fieldValue===d.buttonValue}).value;"string"==typeof S&&(S=S!==d.buttonValue,i.setValue(c,{value:S}));const k=document.createElement("input");if(I.add(k),k.setAttribute("data-element-id",c),k.disabled=d.readOnly,this._setRequired(k,this.data.required),k.type="radio",k.name=d.fieldName,S&&k.setAttribute("checked",!0),k.tabIndex=P,k.addEventListener("change",z=>{const{name:Z,checked:re}=z.target;for(const ie of this._getElementsByName(Z,c))i.setValue(ie.id,{value:!1});i.setValue(c,{value:re})}),k.addEventListener("resetform",z=>{const Z=d.defaultFieldValue;z.target.checked=null!=Z&&Z===d.buttonValue}),this.enableScripting&&this.hasJSActions){const z=d.buttonValue;k.addEventListener("updatefromsandbox",Z=>{this._dispatchEventFromSandbox({value:ie=>{const pe=z===ie.detail.value;for(const le of this._getElementsByName(ie.target.name)){const ue=pe&&le.id===c;le.domElement&&(le.domElement.checked=ue),i.setValue(le.id,{value:ue})}}},Z)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Z=>Z.target.checked)}return this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class f extends F{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText);const d=i.lastChild;return this.enableScripting&&this.hasJSActions&&d&&(this._setDefaultPropertiesFromJS(d),d.addEventListener("updatefromsandbox",c=>{this._dispatchEventFromSandbox({},c)})),i}}class t extends g{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const i=this.annotationStorage,d=this.data.id,c=i.getValue(d,{value:this.data.fieldValue}),S=document.createElement("select");I.add(S),S.setAttribute("data-element-id",d),S.disabled=this.data.readOnly,this._setRequired(S,this.data.required),S.name=this.data.fieldName,S.tabIndex=P;let k=this.data.combo&&this.data.options.length>0;this.data.combo||(S.size=this.data.options.length,this.data.multiSelect&&(S.multiple=!0)),S.addEventListener("resetform",ie=>{const pe=this.data.defaultFieldValue;for(const le of S.options)le.selected=le.value===pe});for(const ie of this.data.options){const pe=document.createElement("option");pe.textContent=ie.displayValue,pe.value=ie.exportValue,c.value.includes(ie.exportValue)&&(pe.setAttribute("selected",!0),k=!1),S.append(pe)}let z=null;if(k){const ie=document.createElement("option");ie.value=" ",ie.setAttribute("hidden",!0),ie.setAttribute("selected",!0),S.prepend(ie),z=()=>{ie.remove(),S.removeEventListener("input",z),z=null},S.addEventListener("input",z)}const Z=(ie,pe)=>{const le=pe?"value":"textContent",ue=ie.target.options;return ie.target.multiple?Array.prototype.filter.call(ue,de=>de.selected).map(de=>de[le]):-1===ue.selectedIndex?null:ue[ue.selectedIndex][le]},re=ie=>Array.prototype.map.call(ie.target.options,le=>({displayValue:le.textContent,exportValue:le.value}));return this.enableScripting&&this.hasJSActions?(S.addEventListener("updatefromsandbox",ie=>{this._dispatchEventFromSandbox({value(le){var ue;null===(ue=z)||void 0===ue||ue();const de=le.detail.value,_e=new Set(Array.isArray(de)?de:[de]);for(const me of S.options)me.selected=_e.has(me.value);i.setValue(d,{value:Z(le,!0)})},multipleSelection(le){S.multiple=!0},remove(le){const ue=S.options,de=le.detail.remove;ue[de].selected=!1,S.remove(de),ue.length>0&&-1===Array.prototype.findIndex.call(ue,me=>me.selected)&&(ue[0].selected=!0),i.setValue(d,{value:Z(le,!0),items:re(le)})},clear(le){for(;0!==S.length;)S.remove(0);i.setValue(d,{value:null,items:[]})},insert(le){const{index:ue,displayValue:de,exportValue:_e}=le.detail.insert,me=S.children[ue],ne=document.createElement("option");ne.textContent=de,ne.value=_e,me?me.before(ne):S.append(ne),i.setValue(d,{value:Z(le,!0),items:re(le)})},items(le){const{items:ue}=le.detail;for(;0!==S.length;)S.remove(0);for(const de of ue){const{displayValue:_e,exportValue:me}=de,ne=document.createElement("option");ne.textContent=_e,ne.value=me,S.append(ne)}S.options.length>0&&(S.options[0].selected=!0),i.setValue(d,{value:Z(le,!0),items:re(le)})},indices(le){const ue=new Set(le.detail.indices);for(const de of le.target.options)de.selected=ue.has(de.index);i.setValue(d,{value:Z(le,!0)})},editable(le){le.target.disabled=!le.detail.editable}},ie)}),S.addEventListener("input",ie=>{var pe;const le=Z(ie,!0),ue=Z(ie,!1);i.setValue(d,{value:le}),null===(pe=this.linkService.eventBus)||void 0===pe||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:ue,changeEx:le,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ie=>ie.target.checked)):S.addEventListener("input",function(ie){i.setValue(d,{value:Z(ie,!0)})}),this.data.combo&&this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class e extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const c=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===c.length)return this.container;const S=new u({container:this.container,trigger:Array.from(c),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),k=this.page,z=n.Util.normalizeRect([this.data.parentRect[0],k.view[3]-this.data.parentRect[1]+k.view[1],this.data.parentRect[2],k.view[3]-this.data.parentRect[3]+k.view[1]]),Z=z[0]+this.data.parentRect[2]-this.data.parentRect[0],re=z[1],[ie,pe,le,ue]=this.viewport.viewBox,_e=ue-pe;return this.container.style.left=100*(Z-ie)/(le-ie)+"%",this.container.style.top=100*(re-pe)/_e+"%",this.container.append(S.render()),this.container}}class u{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var i,d;const S=document.createElement("div");S.className="popupWrapper",this.hideElement=this.hideWrapper?S:this.container,this.hideElement.hidden=!0;const k=document.createElement("div");k.className="popup";const z=this.color;z&&(k.style.backgroundColor=n.Util.makeHexColor(0|.7*(255-z[0])+z[0],0|.7*(255-z[1])+z[1],0|.7*(255-z[2])+z[2]));const Z=document.createElement("h1");Z.dir=this.titleObj.dir,Z.textContent=this.titleObj.str,k.append(Z);const re=h.PDFDateString.toDateObject(this.modificationDate);if(re){const ie=document.createElement("span");ie.className="popupDate",ie.textContent="{{date}}, {{time}}",ie.dataset.l10nId="annotation_date_string",ie.dataset.l10nArgs=JSON.stringify({date:re.toLocaleDateString(),time:re.toLocaleTimeString()}),k.append(ie)}if(null===(i=this.richText)||void 0===i||!i.str||null!==(d=this.contentsObj)&&void 0!==d&&d.str&&this.contentsObj.str!==this.richText.str){const ie=this._formatContents(this.contentsObj);k.append(ie)}else K.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:k}),k.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ie of this.trigger)ie.addEventListener("click",this._toggle.bind(this)),ie.addEventListener("mouseover",this._show.bind(this,!1)),ie.addEventListener("mouseout",this._hide.bind(this,!1));return k.addEventListener("click",this._hide.bind(this,!0)),S.append(k),S}_formatContents({str:i,dir:d}){const c=document.createElement("p");c.className="popupContent",c.dir=d;const S=i.split(/(?:\r\n?|\n)/);for(let k=0,z=S.length;k<z;++k)c.append(document.createTextNode(S[k])),k<z-1&&c.append(document.createElement("br"));return c}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class _ extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const i=document.createElement("div");i.className="annotationTextContent",i.setAttribute("role","comment");for(const d of this.textContent){const c=document.createElement("span");c.textContent=d,i.append(c)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class m extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const i=this.data,{width:d,height:c}=j(i.rect),S=this.svgFactory.create(d,c,!0),k=this.svgFactory.createElement("svg:line");return k.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),k.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),k.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),k.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),k.setAttribute("stroke-width",i.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","transparent"),S.append(k),this.container.append(S),this._createPopup(k,i),this.container}}class A extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const i=this.data,{width:d,height:c}=j(i.rect),S=this.svgFactory.create(d,c,!0),k=i.borderStyle.width,z=this.svgFactory.createElement("svg:rect");return z.setAttribute("x",k/2),z.setAttribute("y",k/2),z.setAttribute("width",d-k),z.setAttribute("height",c-k),z.setAttribute("stroke-width",k||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),S.append(z),this.container.append(S),this._createPopup(z,i),this.container}}class l extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const i=this.data,{width:d,height:c}=j(i.rect),S=this.svgFactory.create(d,c,!0),k=i.borderStyle.width,z=this.svgFactory.createElement("svg:ellipse");return z.setAttribute("cx",d/2),z.setAttribute("cy",c/2),z.setAttribute("rx",d/2-k/2),z.setAttribute("ry",c/2-k/2),z.setAttribute("stroke-width",k||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),S.append(z),this.container.append(S),this._createPopup(z,i),this.container}}class p extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:d,height:c}=j(i.rect),S=this.svgFactory.create(d,c,!0);let k=[];for(const Z of i.vertices)k.push(Z.x-i.rect[0]+","+(i.rect[3]-Z.y));k=k.join(" ");const z=this.svgFactory.createElement(this.svgElementName);return z.setAttribute("points",k),z.setAttribute("stroke-width",i.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),S.append(z),this.container.append(S),this._createPopup(z,i),this.container}}class R extends p{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class L extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class H extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:d,height:c}=j(i.rect),S=this.svgFactory.create(d,c,!0);for(const k of i.inkLists){let z=[];for(const re of k)z.push(`${re.x-i.rect[0]},${i.rect[3]-re.y}`);z=z.join(" ");const Z=this.svgFactory.createElement(this.svgElementName);Z.setAttribute("points",z),Z.setAttribute("stroke-width",i.borderStyle.width||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),this._createPopup(Z,i),S.append(Z)}return this.container.append(S),this.container}}class G extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class V extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class U extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class $ extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class q extends D{constructor(i){var d,c,S;super(i,{isRenderable:!!(i.data.hasPopup||null!==(d=i.data.titleObj)&&void 0!==d&&d.str||null!==(c=i.data.contentsObj)&&void 0!==c&&c.str||null!==(S=i.data.richText)&&void 0!==S&&S.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class B extends D{constructor(i){var d;super(i,{isRenderable:!0});const{filename:c,content:S}=this.data.file;this.filename=(0,h.getFilenameFromUrl)(c),this.content=S,null===(d=this.linkService.eventBus)||void 0===d||d.dispatch("fileattachmentannotation",{source:this,filename:c,content:S})}render(){var i,d;this.container.className="fileAttachmentAnnotation";const c=document.createElement("div");return c.className="popupTriggerArea",c.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!==(i=this.data.titleObj)&&void 0!==i&&i.str||null!==(d=this.data.contentsObj)&&void 0!==d&&d.str||this.data.richText)&&this._createPopup(c,this.data),this.container.append(c),this.container}_download(){var i;null===(i=this.downloadManager)||void 0===i||i.openOrDownloadData(this.container,this.content,this.filename)}}class a{static render(i){const{annotations:d,div:c,viewport:S,accessibilityManager:k}=i;_classStaticPrivateMethodGet(this,a,v).call(this,c,S);let z=0;for(const Z of d){if(Z.annotationType!==n.AnnotationType.POPUP){const{width:ie,height:pe}=j(Z.rect);if(ie<=0||pe<=0)continue}const re=O.create({data:Z,layer:c,page:i.page,viewport:S,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:!1!==i.renderForms,svgFactory:new h.DOMSVGFactory,annotationStorage:i.annotationStorage||new T.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(re.isRenderable){const ie=re.render();if(Z.hidden&&(ie.style.visibility="hidden"),Array.isArray(ie))for(const pe of ie)pe.style.zIndex=z++,_classStaticPrivateMethodGet(a,a,s).call(a,pe,Z.id,c,k);else ie.style.zIndex=z++,re instanceof e?c.prepend(ie):_classStaticPrivateMethodGet(a,a,s).call(a,ie,Z.id,c,k)}}_classStaticPrivateMethodGet(this,a,w).call(this,c,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:d,div:c,viewport:S}=i;_classStaticPrivateMethodGet(this,a,v).call(this,c,S),_classStaticPrivateMethodGet(this,a,w).call(this,c,d),c.hidden=!1}}function s(E,i,d,c){const S=E.firstChild||E;S.id=`${h.AnnotationPrefix}${i}`,d.append(E),null==c||c.moveElementInDOM(d,E,S,!1)}function v(E,{width:i,height:d,rotation:c}){const{style:S}=E,k=c%180!=0,z=Math.floor(i)+"px",Z=Math.floor(d)+"px";S.width=k?Z:z,S.height=k?z:Z,E.setAttribute("data-main-rotation",c)}function w(E,i){if(i){for(const[d,c]of i){const S=E.querySelector(`[data-annotation-id="${d}"]`);if(!S)continue;const{firstChild:k}=S;k?"CANVAS"===k.nodeName?k.replaceWith(c):k.before(c):S.append(c)}i.clear()}}r.AnnotationLayer=a},(Y,r)=>{function x(h){return Math.floor(255*Math.max(0,Math.min(1,h))).toString(16).padStart(2,"0")}Object.defineProperty(r,"__esModule",{value:!0}),r.ColorConverters=void 0,r.ColorConverters=class n{static CMYK_G([T,N,K,P]){return["G",1-Math.min(1,.3*T+.59*K+.11*N+P)]}static G_CMYK([T]){return["CMYK",0,0,0,1-T]}static G_RGB([T]){return["RGB",T,T,T]}static G_HTML([T]){const N=x(T);return`#${N}${N}${N}`}static RGB_G([T,N,K]){return["G",.3*T+.59*N+.11*K]}static RGB_HTML([T,N,K]){return`#${x(T)}${x(N)}${x(K)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([T,N,K,P]){return["RGB",1-Math.min(1,T+P),1-Math.min(1,K+P),1-Math.min(1,N+P)]}static CMYK_HTML(T){const N=this.CMYK_RGB(T).slice(1);return this.RGB_HTML(N)}static RGB_CMYK([T,N,K]){const P=1-T,M=1-N,I=1-K;return["CMYK",P,M,I,Math.min(P,M,I)]}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayer=void 0;var n=x(20);r.XfaLayer=class h{static setupStorage(N,K,P,M,I){const j=M.getValue(K,{value:null});switch(P.name){case"textarea":if(null!==j.value&&(N.textContent=j.value),"print"===I)break;N.addEventListener("input",O=>{M.setValue(K,{value:O.target.value})});break;case"input":if("radio"===P.attributes.type||"checkbox"===P.attributes.type){if(j.value===P.attributes.xfaOn?N.setAttribute("checked",!0):j.value===P.attributes.xfaOff&&N.removeAttribute("checked"),"print"===I)break;N.addEventListener("change",O=>{M.setValue(K,{value:O.target.getAttribute(O.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==j.value&&N.setAttribute("value",j.value),"print"===I)break;N.addEventListener("input",O=>{M.setValue(K,{value:O.target.value})})}break;case"select":if(null!==j.value)for(const O of P.children)O.attributes.value===j.value&&(O.attributes.selected=!0);N.addEventListener("input",O=>{const D=O.target.options;M.setValue(K,{value:-1===D.selectedIndex?"":D[D.selectedIndex].value})})}}static setAttributes({html:N,element:K,storage:P=null,intent:M,linkService:I}){const{attributes:j}=K,O=N instanceof HTMLAnchorElement;"radio"===j.type&&(j.name=`${j.name}-${M}`);for(const[D,F]of Object.entries(j))if(null!=F)switch(D){case"class":F.length&&N.setAttribute(D,F.join(" "));break;case"dataId":break;case"id":N.setAttribute("data-element-id",F);break;case"style":Object.assign(N.style,F);break;case"textContent":N.textContent=F;break;default:(!O||"href"!==D&&"newWindow"!==D)&&N.setAttribute(D,F)}O&&I.addLinkAttributes(N,j.href,j.newWindow),P&&j.dataId&&this.setupStorage(N,j.dataId,K,P)}static render(N){const K=N.annotationStorage,P=N.linkService,M=N.xfaHtml,I=N.intent||"display",j=document.createElement(M.name);M.attributes&&this.setAttributes({html:j,element:M,intent:I,linkService:P});const O=[[M,-1,j]],D=N.div;if(D.append(j),N.viewport){const g=`matrix(${N.viewport.transform.join(",")})`;D.style.transform=g}"richText"!==I&&D.setAttribute("class","xfaLayer xfaFont");const F=[];for(;O.length>0;){var o;const[g,C,b]=O.at(-1);if(C+1===g.children.length){O.pop();continue}const y=g.children[++O.at(-1)[1]];if(null===y)continue;const{name:f}=y;if("#text"===f){const e=document.createTextNode(y.value);F.push(e),b.append(e);continue}let t;if(t=null!=y&&null!==(o=y.attributes)&&void 0!==o&&o.xmlns?document.createElementNS(y.attributes.xmlns,f):document.createElement(f),b.append(t),y.attributes&&this.setAttributes({html:t,element:y,storage:K,intent:I,linkService:P}),y.children&&y.children.length>0)O.push([y,-1,t]);else if(y.value){const e=document.createTextNode(y.value);n.XfaText.shouldBuildText(f)&&F.push(e),t.append(e)}}for(const g of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:F}}static update(N){const K=`matrix(${N.viewport.transform.join(",")})`;N.div.style.transform=K,N.div.hidden=!1}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerRenderTask=void 0,r.renderTextLayer=function b(y){const f=new C({textContent:y.textContent,textContentStream:y.textContentStream,container:y.container,viewport:y.viewport,textDivs:y.textDivs,textContentItemsStr:y.textContentItemsStr,enhanceTextSelection:y.enhanceTextSelection});return f._render(y.timeout),f};var n=x(1),h=x(8);const N=30,P=new Map,M=/^\s+$/g;function j(y,f,t,e){const u=document.createElement("span"),_=y._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==f.str,hasEOL:f.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==f.str,hasEOL:f.hasEOL,fontSize:0};y._textDivs.push(u);const m=n.Util.transform(y._viewport.transform,f.transform);let A=Math.atan2(m[1],m[0]);const l=t[f.fontName];l.vertical&&(A+=Math.PI/2);const p=Math.hypot(m[2],m[3]),R=p*function I(y,f){const t=P.get(y);if(t)return t;f.save(),f.font=`30px ${y}`;const e=f.measureText("");let u=e.fontBoundingBoxAscent,_=Math.abs(e.fontBoundingBoxDescent);if(u){f.restore();const A=u/(u+_);return P.set(y,A),A}f.strokeStyle="red",f.clearRect(0,0,N,N),f.strokeText("g",0,0);let m=f.getImageData(0,0,N,N).data;_=0;for(let A=m.length-1-3;A>=0;A-=4)if(m[A]>0){_=Math.ceil(A/4/N);break}f.clearRect(0,0,N,N),f.strokeText("A",0,N),m=f.getImageData(0,0,N,N).data,u=0;for(let A=0,l=m.length;A<l;A+=4)if(m[A]>0){u=N-Math.floor(A/4/N);break}if(f.restore(),u){const A=u/(u+_);return P.set(y,A),A}return P.set(y,.8),.8}(l.fontFamily,e);let L,H;0===A?(L=m[4],H=m[5]-R):(L=m[4]+R*Math.sin(A),H=m[5]-R*Math.cos(A)),u.style.left=`${L}px`,u.style.top=`${H}px`,u.style.fontSize=`${p}px`,u.style.fontFamily=l.fontFamily,_.fontSize=p,u.setAttribute("role","presentation"),u.textContent=f.str,u.dir=f.dir,y._fontInspectorEnabled&&(u.dataset.fontName=f.fontName),0!==A&&(_.angle=A*(180/Math.PI));let G=!1;if(f.str.length>1||y._enhanceTextSelection&&M.test(f.str))G=!0;else if(" "!==f.str&&f.transform[0]!==f.transform[3]){const V=Math.abs(f.transform[0]),U=Math.abs(f.transform[3]);V!==U&&Math.max(V,U)/Math.min(V,U)>1.5&&(G=!0)}if(G&&(_.canvasWidth=l.vertical?f.height*y._viewport.scale:f.width*y._viewport.scale),y._textDivProperties.set(u,_),y._textContentStream&&y._layoutText(u),y._enhanceTextSelection&&_.hasText){let V=1,U=0;0!==A&&(V=Math.cos(A),U=Math.sin(A));const $=(l.vertical?f.height:f.width)*y._viewport.scale,q=p;let B,a;0!==A?(B=[V,U,-U,V,L,H],a=n.Util.getAxialAlignedBoundingBox([0,0,$,q],B)):a=[L,H,L+$,H+q],y._bounds.push({left:a[0],top:a[1],right:a[2],bottom:a[3],div:u,size:[$,q],m:B})}}function O(y){if(y._canceled)return;const f=y._textDivs,t=y._capability,e=f.length;if(e>1e5)return y._renderingDone=!0,void t.resolve();if(!y._textContentStream)for(let u=0;u<e;u++)y._layoutText(f[u]);y._renderingDone=!0,t.resolve()}function D(y,f,t){let e=0;for(let u=0;u<t;u++){const _=y[f++];_>0&&(e=e?Math.min(_,e):_)}return e}function g(y,f){f.sort(function(u,_){return u.x1-_.x1||u.index-_.index});const e=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const u of f){let _=0;for(;_<e.length&&e[_].end<=u.y1;)_++;let m=e.length-1;for(;m>=0&&e[m].start>=u.y2;)m--;let A,l,p,R,L=-1/0;for(p=_;p<=m;p++){let V;A=e[p],l=A.boundary,V=l.x2>u.x1?l.index>u.index?l.x1New:u.x1:void 0===l.x2New?(l.x2+u.x1)/2:l.x2New,V>L&&(L=V)}for(u.x1New=L,p=_;p<=m;p++)A=e[p],l=A.boundary,void 0===l.x2New?l.x2>u.x1?l.index>u.index&&(l.x2New=l.x2):l.x2New=L:l.x2New>L&&(l.x2New=Math.max(L,l.x2));const H=[];let G=null;for(p=_;p<=m;p++){A=e[p],l=A.boundary;const V=l.x2>u.x2?l:u;G===V?H.at(-1).end=A.end:(H.push({start:A.start,end:A.end,boundary:V}),G=V)}for(e[_].start<u.y1&&(H[0].start=u.y1,H.unshift({start:e[_].start,end:u.y1,boundary:e[_].boundary})),u.y2<e[m].end&&(H.at(-1).end=u.y2,H.push({start:u.y2,end:e[m].end,boundary:e[m].boundary})),p=_;p<=m;p++){if(A=e[p],l=A.boundary,void 0!==l.x2New)continue;let V=!1;for(R=_-1;!V&&R>=0&&e[R].start>=l.y1;R--)V=e[R].boundary===l;for(R=m+1;!V&&R<e.length&&e[R].end<=l.y2;R++)V=e[R].boundary===l;for(R=0;!V&&R<H.length;R++)V=H[R].boundary===l;V||(l.x2New=L)}Array.prototype.splice.apply(e,[_,m-_+1,...H])}for(const u of e){const _=u.boundary;void 0===_.x2New&&(_.x2New=Math.max(y,_.x2))}}class C{constructor({textContent:f,textContentStream:t,container:e,viewport:u,textDivs:_,textContentItemsStr:m,enhanceTextSelection:A}){var l;A&&(0,h.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=f,this._textContentStream=t,this._container=e,this._document=e.ownerDocument,this._viewport=u,this._textDivs=_||[],this._textContentItemsStr=m||[],this._enhanceTextSelection=!!A,this._fontInspectorEnabled=!(null===(l=globalThis.FontInspector)||void 0===l||!l.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(f,t){for(let e=0,u=f.length;e<u;e++)if(void 0!==f[e].str)this._textContentItemsStr.push(f[e].str),j(this,f[e],t,this._layoutTextCtx);else if("beginMarkedContentProps"===f[e].type||"beginMarkedContent"===f[e].type){const _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==f[e].id&&this._container.setAttribute("id",`${f[e].id}`),_.append(this._container)}else"endMarkedContent"===f[e].type&&(this._container=this._container.parentNode)}_layoutText(f){const t=this._textDivProperties.get(f);let e="";if(0!==t.canvasWidth&&t.hasText){const{fontFamily:u}=f.style,{fontSize:_}=t;(_!==this._layoutTextLastFontSize||u!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${_*this._devicePixelRatio}px ${u}`,this._layoutTextLastFontSize=_,this._layoutTextLastFontFamily=u);const{width:m}=this._layoutTextCtx.measureText(f.textContent);if(m>0){const A=this._devicePixelRatio*t.canvasWidth/m;this._enhanceTextSelection&&(t.scale=A),e=`scaleX(${A})`}}if(0!==t.angle&&(e=`rotate(${t.angle}deg) ${e}`),e.length>0&&(this._enhanceTextSelection&&(t.originalTransform=e),f.style.transform=e),t.hasText&&this._container.append(f),t.hasEOL){const u=document.createElement("br");u.setAttribute("role","presentation"),this._container.append(u)}}_render(f=0){const t=(0,n.createPromiseCapability)();let e=Object.create(null);const u=this._document.createElement("canvas");if(u.height=u.width=N,this._layoutTextCtx=u.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),t.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const _=()=>{this._reader.read().then(({value:m,done:A})=>{A?t.resolve():(Object.assign(e,m.styles),this._processItems(m.items,e),_())},t.reject)};this._reader=this._textContentStream.getReader(),_()}}t.promise.then(()=>{e=null,f?this._renderTimer=setTimeout(()=>{O(this),this._renderTimer=null},f):O(this)},this._capability.reject)}expandTextDivs(f=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function F(y){const f=y._bounds,t=y._viewport,e=function o(y,f,t){const e=t.map(function(_,m){return{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom,index:m,x1New:void 0,x2New:void 0}});g(y,e);const u=new Array(t.length);for(const _ of e)u[_.index]={left:_.x1New,top:0,right:_.x2New,bottom:0};t.map(function(_,m){const A=u[m],l=e[m];l.x1=_.top,l.y1=y-A.right,l.x2=_.bottom,l.y2=y-A.left,l.index=m,l.x1New=void 0,l.x2New=void 0}),g(f,e);for(const _ of e){const m=_.index;u[m].top=_.x1New,u[m].bottom=_.x2New}return u}(t.width,t.height,f);for(let u=0;u<e.length;u++){const _=f[u].div,m=y._textDivProperties.get(_);if(0===m.angle){m.paddingLeft=f[u].left-e[u].left,m.paddingTop=f[u].top-e[u].top,m.paddingRight=e[u].right-f[u].right,m.paddingBottom=e[u].bottom-f[u].bottom,y._textDivProperties.set(_,m);continue}const A=e[u],l=f[u],p=l.m,R=p[0],L=p[1],H=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],G=new Float64Array(64);for(let U=0,$=H.length;U<$;U++){const q=n.Util.applyTransform(H[U],p);G[U+0]=R&&(A.left-q[0])/R,G[U+4]=L&&(A.top-q[1])/L,G[U+8]=R&&(A.right-q[0])/R,G[U+12]=L&&(A.bottom-q[1])/L,G[U+16]=L&&(A.left-q[0])/-L,G[U+20]=R&&(A.top-q[1])/R,G[U+24]=L&&(A.right-q[0])/-L,G[U+28]=R&&(A.bottom-q[1])/R,G[U+32]=R&&(A.left-q[0])/-R,G[U+36]=L&&(A.top-q[1])/-L,G[U+40]=R&&(A.right-q[0])/-R,G[U+44]=L&&(A.bottom-q[1])/-L,G[U+48]=L&&(A.left-q[0])/L,G[U+52]=R&&(A.top-q[1])/-R,G[U+56]=L&&(A.right-q[0])/L,G[U+60]=R&&(A.bottom-q[1])/-R}const V=1+Math.min(Math.abs(R),Math.abs(L));m.paddingLeft=D(G,32,16)/V,m.paddingTop=D(G,48,16)/V,m.paddingRight=D(G,0,16)/V,m.paddingBottom=D(G,16,16)/V,y._textDivProperties.set(_,m)}}(this),this._bounds=null);const t=[],e=[];for(let u=0,_=this._textDivs.length;u<_;u++){const m=this._textDivs[u],A=this._textDivProperties.get(m);A.hasText&&(f?(t.length=0,e.length=0,A.originalTransform&&t.push(A.originalTransform),A.paddingTop>0?(e.push(`${A.paddingTop}px`),t.push(`translateY(${-A.paddingTop}px)`)):e.push(0),e.push(A.paddingRight>0?A.paddingRight/A.scale+"px":0),e.push(A.paddingBottom>0?`${A.paddingBottom}px`:0),A.paddingLeft>0?(e.push(A.paddingLeft/A.scale+"px"),t.push(`translateX(${-A.paddingLeft/A.scale}px)`)):e.push(0),m.style.padding=e.join(" "),t.length&&(m.style.transform=t.join(" "))):(m.style.padding=null,m.style.transform=A.originalTransform))}}}r.TextLayerRenderTask=C},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var n=x(8),h=x(1),T=x(3);let N=class{constructor(){(0,h.unreachable)("Not implemented: SVGGraphics")}};r.SVGGraphics=N;{let o=function(t){let e=[];const u=[];for(const _ of t)"save"!==_.fn?"restore"===_.fn?e=u.pop():e.push(_):(e.push({fnId:92,fn:"group",items:[]}),u.push(e),e=e.at(-1).items);return e},g=function(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let u=e.length-1;if("0"!==e[u])return e;do{u--}while("0"===e[u]);return e.substring(0,"."===e[u]?u:u+1)},C=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${g(t[0])} ${g(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const e=180*Math.acos(t[0])/Math.PI;return`rotate(${g(e)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${g(t[4])} ${g(t[5])})`;return`matrix(${g(t[0])} ${g(t[1])} ${g(t[2])} ${g(t[3])} ${g(t[4])} ${g(t[5])})`};const K={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},P="http://www.w3.org/XML/1998/namespace",M="http://www.w3.org/1999/xlink",I=["butt","round","square"],j=["miter","round","bevel"],O=function(t,e="",u=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!u)return URL.createObjectURL(new Blob([t],{type:e}));const _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let m=`data:${e};base64,`;for(let A=0,l=t.length;A<l;A+=3){const p=255&t[A],R=255&t[A+1],L=255&t[A+2];m+=_[p>>2]+_[(3&p)<<4|R>>4]+_[A+1<l?(15&R)<<2|L>>6:64]+_[A+2<l?63&L:64]}return m},D=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),u=new Int32Array(256);for(let L=0;L<256;L++){let H=L;for(let G=0;G<8;G++)H=1&H?3988292384^H>>1&2147483647:H>>1&2147483647;u[L]=H}function m(L,H,G,V){let U=V;const $=H.length;G[U]=$>>24&255,G[U+1]=$>>16&255,G[U+2]=$>>8&255,G[U+3]=255&$,U+=4,G[U]=255&L.charCodeAt(0),G[U+1]=255&L.charCodeAt(1),G[U+2]=255&L.charCodeAt(2),G[U+3]=255&L.charCodeAt(3),U+=4,G.set(H,U),U+=H.length;const q=function _(L,H,G){let V=-1;for(let U=H;U<G;U++)V=V>>>8^u[255&(V^L[U])];return-1^V}(G,V+4,U);G[U]=q>>24&255,G[U+1]=q>>16&255,G[U+2]=q>>8&255,G[U+3]=255&q}function p(L){let H=L.length;const G=65535,V=Math.ceil(H/G),U=new Uint8Array(2+H+5*V+4);let $=0;U[$++]=120,U[$++]=156;let q=0;for(;H>G;)U[$++]=0,U[$++]=255,U[$++]=255,U[$++]=0,U[$++]=0,U.set(L.subarray(q,q+G),$),$+=G,q+=G,H-=G;U[$++]=1,U[$++]=255&H,U[$++]=H>>8&255,U[$++]=255&~H,U[$++]=(65535&~H)>>8&255,U.set(L.subarray(q),$),$+=L.length-q;const B=function A(L,H,G){let V=1,U=0;for(let $=H;$<G;++$)V=(V+(255&L[$]))%65521,U=(U+V)%65521;return U<<16|V}(L,0,L.length);return U[$++]=B>>24&255,U[$++]=B>>16&255,U[$++]=B>>8&255,U[$++]=255&B,U}return function(H,G,V){return function R(L,H,G,V){const U=L.width,$=L.height;let q,B,a;const s=L.data;switch(H){case h.ImageKind.GRAYSCALE_1BPP:B=0,q=1,a=U+7>>3;break;case h.ImageKind.RGB_24BPP:B=2,q=8,a=3*U;break;case h.ImageKind.RGBA_32BPP:B=6,q=8,a=4*U;break;default:throw new Error("invalid format")}const v=new Uint8Array((1+a)*$);let w=0,E=0;for(let z=0;z<$;++z)v[w++]=0,v.set(s.subarray(E,E+a),w),E+=a,w+=a;if(H===h.ImageKind.GRAYSCALE_1BPP&&V){w=0;for(let z=0;z<$;z++){w++;for(let Z=0;Z<a;Z++)v[w++]^=255}}const i=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,255&U,$>>24&255,$>>16&255,$>>8&255,255&$,q,B,0,0,0]),d=function l(L){if(!T.isNodeJS)return p(L);try{let H;H=parseInt(process.versions.node)>=8?L:Buffer.from(L);const G=__webpack_require__(2258).deflateSync(H,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(H){(0,h.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+H)}return p(L)}(v),S=new Uint8Array(t.length+36+i.length+d.length);let k=0;return S.set(t,k),k+=t.length,m("IHDR",i,S,k),k+=12+i.length,m("IDATA",d,S,k),k+=12+d.length,m("IEND",new Uint8Array(0),S,k),O(S,"image/png",G)}(H,void 0===H.kind?h.ImageKind.GRAYSCALE_1BPP:H.kind,G,V)}}();class F{constructor(){this.fontSizeScale=1,this.fontWeight=K.fontWeight,this.fontSize=0,this.textMatrix=h.IDENTITY_MATRIX,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=h.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=K.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,u){this.x=e,this.y=u}}let b=0,y=0,f=0;r.SVGGraphics=N=class{constructor(t,e,u=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new F,this.transformMatrix=h.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!u,this._operatorIdMapping=[];for(const _ in h.OPS)this._operatorIdMapping[h.OPS[_]]=_}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,u=t.argsArray;for(let _=0,m=e.length;_<m;_++)if(e[_]===h.OPS.dependency)for(const A of u[_]){const l=A.startsWith("g_")?this.commonObjs:this.objs,p=new Promise(R=>{l.get(A,R)});this.current.dependencies.push(p)}return Promise.all(this.current.dependencies)}transform(t,e,u,_,m,A){this.transformMatrix=h.Util.transform(this.transformMatrix,[t,e,u,_,m,A]),this.tgrp=null}getSVG(t,e){this.viewport=e;const u=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=h.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),u))}convertOpList(t){const e=this._operatorIdMapping,u=t.argsArray,_=t.fnArray,m=[];for(let A=0,l=_.length;A<l;A++){const p=_[A];m.push({fnId:p,fn:e[p],args:u[A]})}return o(m)}executeOpTree(t){for(const e of t){const u=e.fn,m=e.args;switch(0|e.fnId){case h.OPS.beginText:this.beginText();break;case h.OPS.dependency:break;case h.OPS.setLeading:this.setLeading(m);break;case h.OPS.setLeadingMoveText:this.setLeadingMoveText(m[0],m[1]);break;case h.OPS.setFont:this.setFont(m);break;case h.OPS.showText:case h.OPS.showSpacedText:this.showText(m[0]);break;case h.OPS.endText:this.endText();break;case h.OPS.moveText:this.moveText(m[0],m[1]);break;case h.OPS.setCharSpacing:this.setCharSpacing(m[0]);break;case h.OPS.setWordSpacing:this.setWordSpacing(m[0]);break;case h.OPS.setHScale:this.setHScale(m[0]);break;case h.OPS.setTextMatrix:this.setTextMatrix(m[0],m[1],m[2],m[3],m[4],m[5]);break;case h.OPS.setTextRise:this.setTextRise(m[0]);break;case h.OPS.setTextRenderingMode:this.setTextRenderingMode(m[0]);break;case h.OPS.setLineWidth:this.setLineWidth(m[0]);break;case h.OPS.setLineJoin:this.setLineJoin(m[0]);break;case h.OPS.setLineCap:this.setLineCap(m[0]);break;case h.OPS.setMiterLimit:this.setMiterLimit(m[0]);break;case h.OPS.setFillRGBColor:this.setFillRGBColor(m[0],m[1],m[2]);break;case h.OPS.setStrokeRGBColor:this.setStrokeRGBColor(m[0],m[1],m[2]);break;case h.OPS.setStrokeColorN:this.setStrokeColorN(m);break;case h.OPS.setFillColorN:this.setFillColorN(m);break;case h.OPS.shadingFill:this.shadingFill(m[0]);break;case h.OPS.setDash:this.setDash(m[0],m[1]);break;case h.OPS.setRenderingIntent:this.setRenderingIntent(m[0]);break;case h.OPS.setFlatness:this.setFlatness(m[0]);break;case h.OPS.setGState:this.setGState(m[0]);break;case h.OPS.fill:this.fill();break;case h.OPS.eoFill:this.eoFill();break;case h.OPS.stroke:this.stroke();break;case h.OPS.fillStroke:this.fillStroke();break;case h.OPS.eoFillStroke:this.eoFillStroke();break;case h.OPS.clip:this.clip("nonzero");break;case h.OPS.eoClip:this.clip("evenodd");break;case h.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case h.OPS.paintImageXObject:this.paintImageXObject(m[0]);break;case h.OPS.paintInlineImageXObject:this.paintInlineImageXObject(m[0]);break;case h.OPS.paintImageMaskXObject:this.paintImageMaskXObject(m[0]);break;case h.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(m[0],m[1]);break;case h.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case h.OPS.closePath:this.closePath();break;case h.OPS.closeStroke:this.closeStroke();break;case h.OPS.closeFillStroke:this.closeFillStroke();break;case h.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case h.OPS.nextLine:this.nextLine();break;case h.OPS.transform:this.transform(m[0],m[1],m[2],m[3],m[4],m[5]);break;case h.OPS.constructPath:this.constructPath(m[0],m[1]);break;case h.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,h.warn)(`Unimplemented operator ${u}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,u,_,m,A){const l=this.current;l.textMatrix=l.lineMatrix=[t,e,u,_,m,A],l.textMatrixScale=Math.hypot(t,e),l.x=l.lineX=0,l.y=l.lineY=0,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${g(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",g(-l.y)),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtElement.append(l.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=h.IDENTITY_MATRIX,t.lineMatrix=h.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const u=this.current;u.x=u.lineX+=t,u.y=u.lineY+=e,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${g(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",g(-u.y))}showText(t){const e=this.current,u=e.font,_=e.fontSize;if(0===_)return;const m=e.fontSizeScale,A=e.charSpacing,l=e.wordSpacing,p=e.fontDirection,R=e.textHScale*p,L=u.vertical,H=L?1:-1,G=u.defaultVMetrics,V=_*e.fontMatrix[0];let U=0;for(const B of t){if(null===B){U+=p*l;continue}if("number"==typeof B){U+=H*B*_/1e3;continue}const a=(B.isSpace?l:0)+A,s=B.fontChar;let v,w,i,E=B.width;if(L){let d;const c=B.vmetric||G;d=B.vmetric?c[1]:.5*E,d=-d*V,E=c?-c[0]:E,v=d/m,w=(U+c[2]*V)/m}else v=U/m,w=0;(B.isInFont||u.missingFile)&&(e.xcoords.push(e.x+v),L&&e.ycoords.push(-e.y+w),e.tspan.textContent+=s),i=L?E*V-a*p:E*V+a*p,U+=i}e.tspan.setAttributeNS(null,"x",e.xcoords.map(g).join(" ")),e.tspan.setAttributeNS(null,"y",L?e.ycoords.map(g).join(" "):g(-e.y)),L?e.y-=U:e.x+=U*R,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${g(e.fontSize)}px`),e.fontStyle!==K.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==K.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const $=e.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;$===h.TextRenderingMode.FILL||$===h.TextRenderingMode.FILL_STROKE?(e.fillColor!==K.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.tspan.setAttributeNS(null,"fill",e.textRenderingMode===h.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),($===h.TextRenderingMode.STROKE||$===h.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(e.tspan,1/(e.textMatrixScale||1));let q=e.textMatrix;0!==e.textRise&&(q=q.slice(),q[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${C(q)} scale(${g(R)}, -1)`),e.txtElement.setAttributeNS(P,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=O(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,u=this.commonObjs.get(t[0]);let _=t[1];e.font=u,this.embedFonts&&!u.missingFile&&!this.embeddedFonts[u.loadedName]&&(this.addFontStyle(u),this.embeddedFonts[u.loadedName]=u),e.fontMatrix=u.fontMatrix||h.FONT_IDENTITY_MATRIX;let m="normal";u.black?m="900":u.bold&&(m="bold");const A=u.italic?"italic":"normal";_<0?(_=-_,e.fontDirection=-1):e.fontDirection=1,e.fontSize=_,e.fontFamily=u.loadedName,e.fontWeight=m,e.fontStyle=A,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",g(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var t;const e=this.current;e.textRenderingMode&h.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=e.txtElement)&&void 0!==t&&t.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=I[t]}setLineJoin(t){this.current.lineJoin=j[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,u){this.current.strokeColor=h.Util.makeHexColor(t,e,u)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,u){this.current.fillColor=h.Util.makeHexColor(t,e,u),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,u=this.viewport.height,_=h.Util.inverseTransform(this.transformMatrix),m=h.Util.applyTransform([0,0],_),A=h.Util.applyTransform([0,u],_),l=h.Util.applyTransform([e,0],_),p=h.Util.applyTransform([e,u],_),R=Math.min(m[0],A[0],l[0],p[0]),L=Math.min(m[1],A[1],l[1],p[1]),H=Math.max(m[0],A[0],l[0],p[0]),G=Math.max(m[1],A[1],l[1],p[1]),V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",R),V.setAttributeNS(null,"y",L),V.setAttributeNS(null,"width",H-R),V.setAttributeNS(null,"height",G-L),V.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&V.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(V)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],u=t[2],_=t[3]||h.IDENTITY_MATRIX,[m,A,l,p]=t[4],R=t[5],L=t[6],H=t[7],G="shading"+f++,[V,U,$,q]=h.Util.normalizeRect([...h.Util.applyTransform([m,A],_),...h.Util.applyTransform([l,p],_)]),[B,a]=h.Util.singularValueDecompose2dScale(_),s=R*B,v=L*a,w=this.svgFactory.createElement("svg:pattern");w.setAttributeNS(null,"id",G),w.setAttributeNS(null,"patternUnits","userSpaceOnUse"),w.setAttributeNS(null,"width",s),w.setAttributeNS(null,"height",v),w.setAttributeNS(null,"x",`${V}`),w.setAttributeNS(null,"y",`${U}`);const E=this.svg,i=this.transformMatrix,d=this.current.fillColor,c=this.current.strokeColor,S=this.svgFactory.create($-V,q-U);if(this.svg=S,this.transformMatrix=_,2===H){const k=h.Util.makeHexColor(...e);this.current.fillColor=k,this.current.strokeColor=k}return this.executeOpTree(this.convertOpList(u)),this.svg=E,this.transformMatrix=i,this.current.fillColor=d,this.current.strokeColor=c,w.append(S.childNodes[0]),this.defs.append(w),`url(#${G})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e="shading"+f++,u=t[3];let _;switch(t[1]){case"axial":const m=t[4],A=t[5];_=this.svgFactory.createElement("svg:linearGradient"),_.setAttributeNS(null,"id",e),_.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_.setAttributeNS(null,"x1",m[0]),_.setAttributeNS(null,"y1",m[1]),_.setAttributeNS(null,"x2",A[0]),_.setAttributeNS(null,"y2",A[1]);break;case"radial":const l=t[4],p=t[5],R=t[6],L=t[7];_=this.svgFactory.createElement("svg:radialGradient"),_.setAttributeNS(null,"id",e),_.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_.setAttributeNS(null,"cx",p[0]),_.setAttributeNS(null,"cy",p[1]),_.setAttributeNS(null,"r",L),_.setAttributeNS(null,"fx",l[0]),_.setAttributeNS(null,"fy",l[1]),_.setAttributeNS(null,"fr",R);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const m of u){const A=this.svgFactory.createElement("svg:stop");A.setAttributeNS(null,"offset",m[0]),A.setAttributeNS(null,"stop-color",m[1]),_.append(A)}return this.defs.append(_),`url(#${e})`;case"Mesh":return(0,h.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const u=this.current;let _=u.x,m=u.y,A=[],l=0;for(const p of t)switch(0|p){case h.OPS.rectangle:_=e[l++],m=e[l++];const H=_+e[l++],G=m+e[l++];A.push("M",g(_),g(m),"L",g(H),g(m),"L",g(H),g(G),"L",g(_),g(G),"Z");break;case h.OPS.moveTo:_=e[l++],m=e[l++],A.push("M",g(_),g(m));break;case h.OPS.lineTo:_=e[l++],m=e[l++],A.push("L",g(_),g(m));break;case h.OPS.curveTo:_=e[l+4],m=e[l+5],A.push("C",g(e[l]),g(e[l+1]),g(e[l+2]),g(e[l+3]),g(_),g(m)),l+=6;break;case h.OPS.curveTo2:A.push("C",g(_),g(m),g(e[l]),g(e[l+1]),g(e[l+2]),g(e[l+3])),_=e[l+2],m=e[l+3],l+=4;break;case h.OPS.curveTo3:_=e[l+2],m=e[l+3],A.push("C",g(e[l]),g(e[l+1]),g(_),g(m),g(_),g(m)),l+=4;break;case h.OPS.closePath:A.push("Z")}A=A.join(" "),u.path&&t.length>0&&t[0]!==h.OPS.rectangle&&t[0]!==h.OPS.moveTo?A=u.path.getAttributeNS(null,"d")+A:(u.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(u.path)),u.path.setAttributeNS(null,"d",A),u.path.setAttributeNS(null,"fill","none"),u.element=u.path,u.setCurrentPoint(_,m)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+b++,u=this.svgFactory.createElement("svg:clipPath");u.setAttributeNS(null,"id",e),u.setAttributeNS(null,"transform",C(this.transformMatrix));const _=t.element.cloneNode(!0);if(_.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,u.append(_),this.defs.append(u),t.activeClipUrl){t.clipGroup=null;for(const m of this.extraStack)m.clipGroup=null;u.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,u]of t)switch(e){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,h.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const u=this.current;let _=u.dashArray;1!==e&&_.length>0&&(_=_.map(function(m){return e*m})),t.setAttributeNS(null,"stroke",u.strokeColor),t.setAttributeNS(null,"stroke-opacity",u.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",g(u.miterLimit)),t.setAttributeNS(null,"stroke-linecap",u.lineCap),t.setAttributeNS(null,"stroke-linejoin",u.lineJoin),t.setAttributeNS(null,"stroke-width",g(e*u.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",_.map(g).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",g(e*u.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,h.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const u=t.width,_=t.height,m=D(t,this.forceDataSchema,!!e),A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x","0"),A.setAttributeNS(null,"y","0"),A.setAttributeNS(null,"width",g(u)),A.setAttributeNS(null,"height",g(_)),this.current.element=A,this.clip("nonzero");const l=this.svgFactory.createElement("svg:image");l.setAttributeNS(M,"xlink:href",m),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",g(-_)),l.setAttributeNS(null,"width",g(u)+"px"),l.setAttributeNS(null,"height",g(_)+"px"),l.setAttributeNS(null,"transform",`scale(${g(1/u)} ${g(-1/_)})`),e?e.append(l):this._ensureTransformGroup().append(l)}paintImageMaskXObject(t){const e=this.current,u=t.width,_=t.height,m=e.fillColor;e.maskId="mask"+y++;const A=this.svgFactory.createElement("svg:mask");A.setAttributeNS(null,"id",e.maskId);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",g(u)),l.setAttributeNS(null,"height",g(_)),l.setAttributeNS(null,"fill",m),l.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.append(A),this._ensureTransformGroup().append(l),this.paintInlineImageXObject(t,A)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const u=e[2]-e[0],_=e[3]-e[1],m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x",e[0]),m.setAttributeNS(null,"y",e[1]),m.setAttributeNS(null,"width",g(u)),m.setAttributeNS(null,"height",g(_)),this.current.element=m,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),u=this.svgFactory.createElement("svg:defs");e.append(u),this.defs=u;const _=this.svgFactory.createElement("svg:g");return _.setAttributeNS(null,"transform",C(t.transform)),e.append(_),this.svg=_,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",C(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var n=x(1),h=x(33);const T=__webpack_require__(172),N=__webpack_require__(2001),K=__webpack_require__(3779),P=__webpack_require__(6558),M=/^file:\/\/\/[a-zA-Z]:\//;r.PDFNodeStream=class j{constructor(f){this.source=f,this.url=function I(y){const f=P.parse(y);return"file:"===f.protocol||f.host?f:/^[a-z]:[/\\]/i.test(y)?P.parse(`file:///${y}`):(f.host||(f.protocol="file:"),f)}(f.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f,t;return null!==(f=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==f?f:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new o(this),this._fullRequestReader}getRangeReader(f,t){if(t<=this._progressiveDataLength)return null;const e=this.isFsUrl?new b(this,f,t):new g(this,f,t);return this._rangeRequestReaders.push(e),e}cancelAllRequests(f){this._fullRequestReader&&this._fullRequestReader.cancel(f);for(const t of this._rangeRequestReaders.slice(0))t.cancel(f)}};class O{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=f.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var f=this;return _asyncToGenerator(function*(){if(yield f._readCapability.promise,f._done)return{value:void 0,done:!0};if(f._storedError)throw f._storedError;const t=f._readableStream.read();return null===t?(f._readCapability=(0,n.createPromiseCapability)(),f.read()):(f._loaded+=t.length,f.onProgress&&f.onProgress({loaded:f._loaded,total:f._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(f){this._readableStream?this._readableStream.destroy(f):this._error(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class D{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!f.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var f=this;return _asyncToGenerator(function*(){if(yield f._readCapability.promise,f._done)return{value:void 0,done:!0};if(f._storedError)throw f._storedError;const t=f._readableStream.read();return null===t?(f._readCapability=(0,n.createPromiseCapability)(),f.read()):(f._loaded+=t.length,f.onProgress&&f.onProgress({loaded:f._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(f){this._readableStream?this._readableStream.destroy(f):this._error(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function F(y,f){return{protocol:y.protocol,auth:y.auth,host:y.hostname,port:y.port,path:y.path,method:"GET",headers:f}}class o extends O{constructor(f){super(f);const t=e=>{if(404===e.statusCode){const A=new n.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=A,void this._headersCapability.reject(A)}this._headersCapability.resolve(),this._setReadableStream(e);const u=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:_,suggestedLength:m}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=m||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(u)};this._request=null,this._request="http:"===this._url.protocol?N.request(F(this._url,f.httpHeaders),t):K.request(F(this._url,f.httpHeaders),t),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class g extends D{constructor(f,t,e){super(f),this._httpHeaders={};for(const _ in f.httpHeaders){const m=f.httpHeaders[_];typeof m>"u"||(this._httpHeaders[_]=m)}this._httpHeaders.Range=`bytes=${t}-${e-1}`;const u=_=>{if(404!==_.statusCode)this._setReadableStream(_);else{const m=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m}};this._request=null,this._request="http:"===this._url.protocol?N.request(F(this._url,this._httpHeaders),u):K.request(F(this._url,this._httpHeaders),u),this._request.on("error",_=>{this._storedError=_}),this._request.end()}}class C extends O{constructor(f){super(f);let t=decodeURIComponent(this._url.path);M.test(this._url.href)&&(t=t.replace(/^\//,"")),T.lstat(t,(e,u)=>{if(e)return"ENOENT"===e.code&&(e=new n.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=u.size,this._setReadableStream(T.createReadStream(t)),this._headersCapability.resolve()})}}class b extends D{constructor(f,t,e){super(f);let u=decodeURIComponent(this._url.path);M.test(this._url.href)&&(u=u.replace(/^\//,"")),this._setReadableStream(T.createReadStream(u,{start:t,end:e-1}))}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=function P(I,j){return 404===I||0===I&&j.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+j+'".'):new n.UnexpectedResponseException(`Unexpected server response (${I}) while retrieving PDF "${j}".`,I)},r.extractFilenameFromHeader=function K(I){const j=I("Content-Disposition");if(j){let O=(0,h.getFilenameFromContentDispositionHeader)(j);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,T.isPdfFile)(O))return O}return null},r.validateRangeRequestCapabilities=function N({getResponseHeader:I,isHttp:j,rangeChunkSize:O,disableRange:D}){const F={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(I("Content-Length"),10);return!Number.isInteger(o)||(F.suggestedLength=o,o<=2*O)||D||!j||"bytes"!==I("Accept-Ranges")||"identity"!==(I("Content-Encoding")||"identity")||(F.allowRangeRequests=!0),F},r.validateResponseStatus=function M(I){return 200===I||206===I};var n=x(1),h=x(34),T=x(8)},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=function h(T){let N=!0,K=P("filename\\*","i").exec(T);if(K){K=K[1];let o=O(K);return o=unescape(o),o=D(o),o=F(o),I(o)}if(K=function j(o){const g=[];let C;const b=P("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(C=b.exec(o));){let[,f,t,e]=C;if(f=parseInt(f,10),f in g){if(0===f)break}else g[f]=[t,e]}const y=[];for(let f=0;f<g.length&&f in g;++f){let[t,e]=g[f];e=O(e),t&&(e=unescape(e),0===f&&(e=D(e))),y.push(e)}return y.join("")}(T),K)return I(F(K));if(K=P("filename","i").exec(T),K){K=K[1];let o=O(K);return o=F(o),I(o)}function P(o,g){return new RegExp("(?:^|;)\\s*"+o+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function M(o,g){if(o){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const C=new TextDecoder(o,{fatal:!0}),b=(0,n.stringToBytes)(g);g=C.decode(b),N=!1}catch{}}return g}function I(o){return N&&/[\x80-\xff]/.test(o)&&(o=M("utf-8",o),N&&(o=M("iso-8859-1",o))),o}function O(o){if(o.startsWith('"')){const g=o.slice(1).split('\\"');for(let C=0;C<g.length;++C){const b=g[C].indexOf('"');-1!==b&&(g[C]=g[C].slice(0,b),g.length=C+1),g[C]=g[C].replace(/\\(.)/g,"$1")}o=g.join('"')}return o}function D(o){const g=o.indexOf("'");return-1===g?o:M(o.slice(0,g),o.slice(g+1).replace(/^[^']*'/,""))}function F(o){return!o.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(o)?o:o.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,C,b,y){if("q"===b||"Q"===b)return M(C,y=(y=y.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(f,t){return String.fromCharCode(parseInt(t,16))}));try{y=atob(y)}catch{}return M(C,y)})}return""};var n=x(1)},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var n=x(1),h=x(33);class P{constructor(D,F={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&F.httpHeaders||Object.create(null),this.withCredentials=F.withCredentials||!1,this.getXhr=F.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,F,o){const g={begin:D,end:F};for(const C in o)g[C]=o[C];return this.request(g)}requestFull(D){return this.request(D)}request(D){const F=this.getXhr(),o=this.currXhrId++,g=this.pendingRequests[o]={xhr:F};F.open("GET",this.url),F.withCredentials=this.withCredentials;for(const C in this.httpHeaders){const b=this.httpHeaders[C];typeof b>"u"||F.setRequestHeader(C,b)}return this.isHttp&&"begin"in D&&"end"in D?(F.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),g.expectedStatus=206):g.expectedStatus=200,F.responseType="arraybuffer",D.onError&&(F.onerror=function(C){D.onError(F.status)}),F.onreadystatechange=this.onStateChange.bind(this,o),F.onprogress=this.onProgress.bind(this,o),g.onHeadersReceived=D.onHeadersReceived,g.onDone=D.onDone,g.onError=D.onError,g.onProgress=D.onProgress,F.send(null),o}onProgress(D,F){var o;const g=this.pendingRequests[D];g&&(null===(o=g.onProgress)||void 0===o||o.call(g,F))}onStateChange(D,F){const o=this.pendingRequests[D];if(!o)return;const g=o.xhr;if(g.readyState>=2&&o.onHeadersReceived&&(o.onHeadersReceived(),delete o.onHeadersReceived),4!==g.readyState||!(D in this.pendingRequests))return;var C;if(delete this.pendingRequests[D],0===g.status&&this.isHttp)return void(null===(C=o.onError)||void 0===C||C.call(o,g.status));const b=g.status||200;var f;if((200!==b||206!==o.expectedStatus)&&b!==o.expectedStatus)return void(null===(f=o.onError)||void 0===f||f.call(o,g.status));const t=function K(O){const D=O.response;return"string"!=typeof D?D:(0,n.stringToBytes)(D).buffer}(g);if(206===b){const u=g.getResponseHeader("Content-Range"),_=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);o.onDone({begin:parseInt(_[1],10),chunk:t})}else if(t)o.onDone({begin:0,chunk:t});else{var e;null===(e=o.onError)||void 0===e||e.call(o,g.status)}}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const F=this.pendingRequests[D].xhr;delete this.pendingRequests[D],F.abort()}}r.PDFNetworkStream=class M{constructor(D){this._source=D,this._manager=new P(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const F=this._rangeRequestReaders.indexOf(D);F>=0&&this._rangeRequestReaders.splice(F,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new I(this._manager,this._source),this._fullRequestReader}getRangeReader(D,F){const o=new j(this._manager,D,F);return o.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(o),o}cancelAllRequests(D){var F;null===(F=this._fullRequestReader)||void 0===F||F.cancel(D);for(const o of this._rangeRequestReaders.slice(0))o.cancel(D)}};class I{constructor(D,F){this._manager=D;const o={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=F.url,this._fullRequestId=D.requestFull(o),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=F.disableRange||!1,this._contentLength=F.length,this._rangeChunkSize=F.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,F=this._manager.getRequestXhr(D),o=b=>F.getResponseHeader(b),{allowRangeRequests:g,suggestedLength:C}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});g&&(this._isRangeSupported=!0),this._contentLength=C||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(o),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,h.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){var F;null===(F=this.onProgress)||void 0===F||F.call(this,{loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(D._cachedChunks.length>0)return{value:D._cachedChunks.shift(),done:!1};if(D._done)return{value:void 0,done:!0};const F=(0,n.createPromiseCapability)();return D._requests.push(F),F.promise})()}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class j{constructor(D,F,o){this._manager=D;const g={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(F,o,g),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var D;null===(D=this.onClosed)||void 0===D||D.call(this,this)}_onDone(D){const F=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunk=F,this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,h.createResponseStatusError)(D,this._url);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){var F;this.isStreamingSupported||null===(F=this.onProgress)||void 0===F||F.call(this,{loaded:D.loaded})}get isStreamingSupported(){return!1}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(null!==D._queuedChunk){const o=D._queuedChunk;return D._queuedChunk=null,{value:o,done:!1}}if(D._done)return{value:void 0,done:!0};const F=(0,n.createPromiseCapability)();return D._requests.push(F),F.promise})()}cancel(D){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Y,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var n=x(1),h=x(33);function T(I,j,O){return{method:"GET",headers:I,signal:O.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function N(I){const j=new Headers;for(const O in I){const D=I[O];typeof D>"u"||j.append(O,D)}return j}r.PDFFetchStream=class K{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j,O;return null!==(j=null===(O=this._fullRequestReader)||void 0===O?void 0:O._loaded)&&void 0!==j?j:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P(this),this._fullRequestReader}getRangeReader(j,O){if(O<=this._progressiveDataLength)return null;const D=new M(this,j,O);return this._rangeRequestReaders.push(D),D}cancelAllRequests(j){this._fullRequestReader&&this._fullRequestReader.cancel(j);for(const O of this._rangeRequestReaders.slice(0))O.cancel(j)}};class P{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const O=j.source;this._withCredentials=O.withCredentials||!1,this._contentLength=O.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._headers=N(this._stream.httpHeaders);const D=O.url;fetch(D,T(this._headers,this._withCredentials,this._abortController)).then(F=>{if(!(0,h.validateResponseStatus)(F.status))throw(0,h.createResponseStatusError)(F.status,D);this._reader=F.body.getReader(),this._headersCapability.resolve();const o=b=>F.headers.get(b),{allowRangeRequests:g,suggestedLength:C}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=C||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var j=this;return _asyncToGenerator(function*(){yield j._headersCapability.promise;const{value:O,done:D}=yield j._reader.read();return D?{value:O,done:D}:(j._loaded+=O.byteLength,j.onProgress&&j.onProgress({loaded:j._loaded,total:j._contentLength}),{value:new Uint8Array(O).buffer,done:!1})})()}cancel(j){this._reader&&this._reader.cancel(j),this._abortController.abort()}}class M{constructor(j,O,D){this._stream=j,this._reader=null,this._loaded=0;const F=j.source;this._withCredentials=F.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!F.disableStream,this._abortController=new AbortController,this._headers=N(this._stream.httpHeaders),this._headers.append("Range",`bytes=${O}-${D-1}`);const o=F.url;fetch(o,T(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,h.validateResponseStatus)(g.status))throw(0,h.createResponseStatusError)(g.status,o);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var j=this;return _asyncToGenerator(function*(){yield j._readCapability.promise;const{value:O,done:D}=yield j._reader.read();return D?{value:O,done:D}:(j._loaded+=O.byteLength,j.onProgress&&j.onProgress({loaded:j._loaded}),{value:new Uint8Array(O).buffer,done:!1})})()}cancel(j){this._reader&&this._reader.cancel(j),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Y){var r=__webpack_module_cache__[Y];if(void 0!==r)return r.exports;var x=__webpack_module_cache__[Y]={exports:{}};return __webpack_modules__[Y](x,x.exports,__w_pdfjs_require__),x.exports}var __nested_webpack_exports__={};return(()=>{var Y=__nested_webpack_exports__;Object.defineProperty(Y,"__esModule",{value:!0}),Object.defineProperty(Y,"AnnotationEditorLayer",{enumerable:!0,get:function(){return h.AnnotationEditorLayer}}),Object.defineProperty(Y,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return r.AnnotationEditorParamsType}}),Object.defineProperty(Y,"AnnotationEditorType",{enumerable:!0,get:function(){return r.AnnotationEditorType}}),Object.defineProperty(Y,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return T.AnnotationEditorUIManager}}),Object.defineProperty(Y,"AnnotationLayer",{enumerable:!0,get:function(){return N.AnnotationLayer}}),Object.defineProperty(Y,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(Y,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(Y,"GlobalWorkerOptions",{enumerable:!0,get:function(){return K.GlobalWorkerOptions}}),Object.defineProperty(Y,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(Y,"LoopbackPort",{enumerable:!0,get:function(){return x.LoopbackPort}}),Object.defineProperty(Y,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(Y,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(Y,"PDFDataRangeTransport",{enumerable:!0,get:function(){return x.PDFDataRangeTransport}}),Object.defineProperty(Y,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(Y,"PDFWorker",{enumerable:!0,get:function(){return x.PDFWorker}}),Object.defineProperty(Y,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(Y,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(Y,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(Y,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(Y,"SVGGraphics",{enumerable:!0,get:function(){return I.SVGGraphics}}),Object.defineProperty(Y,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return r.UNSUPPORTED_FEATURES}}),Object.defineProperty(Y,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(Y,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(Y,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(Y,"XfaLayer",{enumerable:!0,get:function(){return j.XfaLayer}}),Object.defineProperty(Y,"build",{enumerable:!0,get:function(){return x.build}}),Object.defineProperty(Y,"createPromiseCapability",{enumerable:!0,get:function(){return r.createPromiseCapability}}),Object.defineProperty(Y,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(Y,"getDocument",{enumerable:!0,get:function(){return x.getDocument}}),Object.defineProperty(Y,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(Y,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(Y,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(Y,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(Y,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(Y,"renderTextLayer",{enumerable:!0,get:function(){return M.renderTextLayer}}),Object.defineProperty(Y,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(Y,"version",{enumerable:!0,get:function(){return x.version}});var r=__w_pdfjs_require__(1),x=__w_pdfjs_require__(4),n=__w_pdfjs_require__(8),h=__w_pdfjs_require__(22),T=__w_pdfjs_require__(7),N=__w_pdfjs_require__(27),K=__w_pdfjs_require__(15),P=__w_pdfjs_require__(3),M=__w_pdfjs_require__(30),I=__w_pdfjs_require__(31),j=__w_pdfjs_require__(29);if(P.isNodeJS){const{PDFNodeStream:F}=__w_pdfjs_require__(32);(0,x.setPDFNetworkStreamFactory)(o=>new F(o))}else{const{PDFNetworkStream:F}=__w_pdfjs_require__(35),{PDFFetchStream:o}=__w_pdfjs_require__(36);(0,x.setPDFNetworkStreamFactory)(g=>(0,n.isValidFetchUrl)(g.url)?new o(g):new F(g))}})(),__nested_webpack_exports__})(),module.exports=x()},1016:(Y,r,x)=>{var n=x(1860).default,h=x(5764).default,T=x(4467).default,N=x(7156).default,K=x(9159).default,P=x(468).default,M=x(5661).default;globalThis,Y.exports=(()=>{"use strict";var I=[,(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DefaultXfaLayerFactory=o.DefaultTextLayerFactory=o.DefaultStructTreeLayerFactory=o.DefaultAnnotationLayerFactory=o.DefaultAnnotationEditorLayerFactory=void 0;var C=g(2),b=g(5),y=g(4),f=g(6),t=g(8),e=g(9),u=g(10);o.DefaultAnnotationLayerFactory=class _{createAnnotationLayerBuilder({pageDiv:L,pdfPage:H,annotationStorage:G=null,imageResourcesPath:V="",renderForms:U=!0,l10n:$=y.NullL10n,enableScripting:q=!1,hasJSActionsPromise:B=null,mouseState:a=null,fieldObjectsPromise:s=null,annotationCanvasMap:v=null,accessibilityManager:w=null}){return new b.AnnotationLayerBuilder({pageDiv:L,pdfPage:H,imageResourcesPath:V,renderForms:U,linkService:new f.SimpleLinkService,l10n:$,annotationStorage:G,enableScripting:q,hasJSActionsPromise:B,fieldObjectsPromise:s,mouseState:a,annotationCanvasMap:v,accessibilityManager:w})}},o.DefaultAnnotationEditorLayerFactory=class m{createAnnotationEditorLayerBuilder({uiManager:L=null,pageDiv:H,pdfPage:G,accessibilityManager:V=null,l10n:U,annotationStorage:$=null}){return new C.AnnotationEditorLayerBuilder({uiManager:L,pageDiv:H,pdfPage:G,accessibilityManager:V,l10n:U,annotationStorage:$})}},o.DefaultStructTreeLayerFactory=class A{createStructTreeLayerBuilder({pdfPage:L}){return new t.StructTreeLayerBuilder({pdfPage:L})}},o.DefaultTextLayerFactory=class l{createTextLayerBuilder({textLayerDiv:L,pageIndex:H,viewport:G,enhanceTextSelection:V=!1,eventBus:U,highlighter:$,accessibilityManager:q=null}){return new e.TextLayerBuilder({textLayerDiv:L,pageIndex:H,viewport:G,enhanceTextSelection:V,eventBus:U,highlighter:$,accessibilityManager:q})}},o.DefaultXfaLayerFactory=class p{createXfaLayerBuilder({pageDiv:L,pdfPage:H,annotationStorage:G=null}){return new u.XfaLayerBuilder({pageDiv:L,pdfPage:H,annotationStorage:G,linkService:new f.SimpleLinkService})}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayerBuilder=void 0;var C=g(3),b=g(4),y=new WeakMap;o.AnnotationEditorLayerBuilder=class f{constructor(e){K(this,y,{writable:!0,value:void 0}),this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.annotationStorage=e.annotationStorage||null,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n||b.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,M(this,y,e.uiManager)}render(e,u="display"){var _=this;return N(function*(){if("display"!==u||_._cancelled)return;const m=e.clone({dontFlip:!0});if(_.div)return _.annotationEditorLayer.update({viewport:m}),void _.show();_.div=document.createElement("div"),_.div.className="annotationEditorLayer",_.div.tabIndex=0,_.pageDiv.append(_.div),_.annotationEditorLayer=new C.AnnotationEditorLayer({uiManager:P(_,y),div:_.div,annotationStorage:_.annotationStorage,accessibilityManager:_.accessibilityManager,pageIndex:_.pdfPage._pageIndex,l10n:_.l10n,viewport:m}),_.annotationEditorLayer.render({viewport:m,div:_.div,annotations:null,intent:u})})()}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},F=>{let o;o=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:x(9627),F.exports=o},(F,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NullL10n=void 0,o.fixupLangCode=function y(e){return b[null==e?void 0:e.toLowerCase()]||e},o.getL10nFallback=C;const g={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text\u2026",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function C(e,u){switch(e){case"find_match_count":e=`find_match_count[${1===u.total?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${1===u.limit?"one":"other"}]`}return g[e]||""}const b={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};o.NullL10n={getLanguage:()=>N(function*(){return"en-us"})(),getDirection:()=>N(function*(){return"ltr"})(),get:(e,u=null,_=C(e,u))=>N(function*(){return function f(e,u){return u?e.replace(/\{\{\s*(\w+)\s*\}\}/g,(_,m)=>m in u?u[m]:"{{"+m+"}}"):e}(_,u)})(),translate:e=>N(function*(){})()}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationLayerBuilder=void 0;var C=g(3),b=g(4);o.AnnotationLayerBuilder=class y{constructor({pageDiv:t,pdfPage:e,linkService:u,downloadManager:_,annotationStorage:m=null,imageResourcesPath:A="",renderForms:l=!0,l10n:p=b.NullL10n,enableScripting:R=!1,hasJSActionsPromise:L=null,fieldObjectsPromise:H=null,mouseState:G=null,annotationCanvasMap:V=null,accessibilityManager:U=null}){this.pageDiv=t,this.pdfPage=e,this.linkService=u,this.downloadManager=_,this.imageResourcesPath=A,this.renderForms=l,this.l10n=p,this.annotationStorage=m,this.enableScripting=R,this._hasJSActionsPromise=L,this._fieldObjectsPromise=H,this._mouseState=G,this._annotationCanvasMap=V,this._accessibilityManager=U,this.div=null,this._cancelled=!1}render(t,e="display"){var u=this;return N(function*(){const[_,m=!1,A=null]=yield Promise.all([u.pdfPage.getAnnotations({intent:e}),u._hasJSActionsPromise,u._fieldObjectsPromise]);if(u._cancelled||0===_.length)return;const l={viewport:t.clone({dontFlip:!0}),div:u.div,annotations:_,page:u.pdfPage,imageResourcesPath:u.imageResourcesPath,renderForms:u.renderForms,linkService:u.linkService,downloadManager:u.downloadManager,annotationStorage:u.annotationStorage,enableScripting:u.enableScripting,hasJSActions:m,fieldObjects:A,mouseState:u._mouseState,annotationCanvasMap:u._annotationCanvasMap,accessibilityManager:u._accessibilityManager};u.div?C.AnnotationLayer.update(l):(u.div=document.createElement("div"),u.div.className="annotationLayer",u.pageDiv.append(u.div),l.div=u.div,C.AnnotationLayer.render(l),u.l10n.translate(u.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SimpleLinkService=o.PDFLinkService=o.LinkTarget=void 0;var C=g(7);const y={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function f(l,{url:p,target:R,rel:L,enabled:H=!0}={}){if(!p||"string"!=typeof p)throw new Error('A valid "url" parameter must provided.');const G=(0,C.removeNullCharacters)(p);H?l.href=l.title=G:(l.href="",l.title=`Disabled: ${G}`,l.onclick=()=>!1);let V="";switch(R){case y.NONE:break;case y.SELF:V="_self";break;case y.BLANK:V="_blank";break;case y.PARENT:V="_parent";break;case y.TOP:V="_top"}l.target=V,l.rel="string"==typeof L?L:"noopener noreferrer nofollow"}o.LinkTarget=y;var t=new WeakMap,e=new WeakSet;class u{constructor({eventBus:p,externalLinkTarget:R=null,externalLinkRel:L=null,ignoreDestinationZoom:H=!1}={}){n(this,e),K(this,t,{writable:!0,value:new Map}),this.eventBus=p,this.externalLinkTarget=R,this.externalLinkRel=L,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=H,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(p,R=null){this.baseUrl=R,this.pdfDocument=p,P(this,t).clear()}setViewer(p){this.pdfViewer=p}setHistory(p){this.pdfHistory=p}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(p){this.pdfViewer.currentPageNumber=p}get rotation(){return this.pdfViewer.pagesRotation}set rotation(p){this.pdfViewer.pagesRotation=p}goToDestination(p){var R=this;return N(function*(){if(!R.pdfDocument)return;let L,H;"string"==typeof p?(L=p,H=yield R.pdfDocument.getDestination(p)):(L=null,H=yield p),Array.isArray(H)?T(R,e,_).call(R,p,L,H):console.error(`PDFLinkService.goToDestination: "${H}" is not a valid destination array, for dest="${p}".`)})()}goToPage(p){if(!this.pdfDocument)return;const R="string"==typeof p&&this.pdfViewer.pageLabelToPageNumber(p)||0|p;Number.isInteger(R)&&R>0&&R<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(R)),this.pdfViewer.scrollPageIntoView({pageNumber:R})):console.error(`PDFLinkService.goToPage: "${p}" is not a valid page.`)}addLinkAttributes(p,R,L=!1){f(p,{url:R,target:L?y.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(p){if("string"==typeof p){if(p.length>0)return this.getAnchorUrl("#"+escape(p))}else if(Array.isArray(p)){const R=JSON.stringify(p);if(R.length>0)return this.getAnchorUrl("#"+escape(R))}return this.getAnchorUrl("")}getAnchorUrl(p){return(this.baseUrl||"")+p}setHash(p){if(!this.pdfDocument)return;let R,L;if(p.includes("=")){const H=(0,C.parseQueryString)(p);if(H.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:H.get("search").replace(/"/g,""),phraseSearch:"true"===H.get("phrase")}),H.has("page")&&(R=0|H.get("page")||1),H.has("zoom")){const G=H.get("zoom").split(","),V=G[0],U=parseFloat(V);V.includes("Fit")?"Fit"===V||"FitB"===V?L=[null,{name:V}]:"FitH"===V||"FitBH"===V||"FitV"===V||"FitBV"===V?L=[null,{name:V},G.length>1?0|G[1]:null]:"FitR"===V?5!==G.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):L=[null,{name:V},0|G[1],0|G[2],0|G[3],0|G[4]]:console.error(`PDFLinkService.setHash: "${V}" is not a valid zoom value.`):L=[null,{name:"XYZ"},G.length>1?0|G[1]:null,G.length>2?0|G[2]:null,U?U/100:V]}L?this.pdfViewer.scrollPageIntoView({pageNumber:R||this.page,destArray:L,allowNegativeOffset:!0}):R&&(this.page=R),H.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:H.get("pagemode")}),H.has("nameddest")&&this.goToDestination(H.get("nameddest"))}else{L=unescape(p);try{L=JSON.parse(L),Array.isArray(L)||(L=L.toString())}catch{}if("string"==typeof L||h(u,u,m).call(u,L))return void this.goToDestination(L);console.error(`PDFLinkService.setHash: "${unescape(p)}" is not a valid destination.`)}}executeNamedAction(p){var R,L;switch(p){case"GoBack":null===(R=this.pdfHistory)||void 0===R||R.back();break;case"GoForward":null===(L=this.pdfHistory)||void 0===L||L.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:p})}cachePageRef(p,R){if(!R)return;const L=0===R.gen?`${R.num}R`:`${R.num}R${R.gen}`;P(this,t).set(L,p)}_cachedPageNumber(p){if(!p)return null;const R=0===p.gen?`${p.num}R`:`${p.num}R${p.gen}`;return P(this,t).get(R)||null}isPageVisible(p){return this.pdfViewer.isPageVisible(p)}isPageCached(p){return this.pdfViewer.isPageCached(p)}}function _(l,p=null,R){const L=R[0];let H;if("object"==typeof L&&null!==L){if(H=this._cachedPageNumber(L),!H)return void this.pdfDocument.getPageIndex(L).then(G=>{this.cachePageRef(G+1,L),T(this,e,_).call(this,l,p,R)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${L}" is not a valid page reference, for dest="${l}".`)})}else{if(!Number.isInteger(L))return void console.error(`PDFLinkService.#goToDestinationHelper: "${L}" is not a valid destination reference, for dest="${l}".`);H=L+1}!H||H<1||H>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${H}" is not a valid page number, for dest="${l}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:p,explicitDest:R,pageNumber:H})),this.pdfViewer.scrollPageIntoView({pageNumber:H,destArray:R,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function m(l){if(!Array.isArray(l))return!1;const p=l.length;if(p<2)return!1;const R=l[0];if(!("object"==typeof R&&Number.isInteger(R.num)&&Number.isInteger(R.gen)||Number.isInteger(R)&&R>=0))return!1;const L=l[1];if("object"!=typeof L||"string"!=typeof L.name)return!1;let H=!0;switch(L.name){case"XYZ":if(5!==p)return!1;break;case"Fit":case"FitB":return 2===p;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==p)return!1;break;case"FitR":if(6!==p)return!1;H=!1;break;default:return!1}for(let G=2;G<p;G++){const V=l[G];if(!("number"==typeof V||H&&null===V))return!1}return!0}o.PDFLinkService=u,o.SimpleLinkService=class A{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(p){}get rotation(){return 0}set rotation(p){}goToDestination(p){return N(function*(){})()}goToPage(p){}addLinkAttributes(p,R,L=!1){f(p,{url:R,enabled:this.externalLinkEnabled})}getDestinationHash(p){return"#"}getAnchorUrl(p){return"#"}setHash(p){}executeNamedAction(p){}cachePageRef(p,R){}isPageVisible(p){return!0}isPageCached(p){return!0}}},(F,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.animationStarted=o.VERTICAL_PADDING=o.UNKNOWN_SCALE=o.TextLayerMode=o.SpreadMode=o.SidebarView=o.ScrollMode=o.SCROLLBAR_PADDING=o.RenderingStates=o.RendererType=o.ProgressBar=o.PresentationModeState=o.OutputScale=o.MIN_SCALE=o.MAX_SCALE=o.MAX_AUTO_SCALE=o.DEFAULT_SCALE_VALUE=o.DEFAULT_SCALE_DELTA=o.DEFAULT_SCALE=o.AutoPrintRegExp=void 0,o.apiPageLayoutToViewerModes=function Le(fe){let Ce=L.VERTICAL,xe=H.NONE;switch(fe){case"SinglePage":Ce=L.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Ce=L.PAGE;case"TwoColumnLeft":xe=H.ODD;break;case"TwoPageRight":Ce=L.PAGE;case"TwoColumnRight":xe=H.EVEN}return{scrollMode:Ce,spreadMode:xe}},o.apiPageModeToSidebarView=function Me(fe){switch(fe){case"UseNone":return l.NONE;case"UseThumbs":return l.THUMBS;case"UseOutlines":return l.OUTLINE;case"UseAttachments":return l.ATTACHMENTS;case"UseOC":return l.LAYERS}return l.NONE},o.approximateFraction=function w(fe){if(Math.floor(fe)===fe)return[fe,1];const Ce=1/fe;if(Ce>8)return[1,8];if(Math.floor(Ce)===Ce)return[1,Ce];const Pe=fe>1?Ce:fe;let J,ye=0,W=1,te=1,se=1;for(;;){const ae=ye+te,ge=W+se;if(ge>8)break;Pe<=ae/ge?(te=ae,se=ge):(ye=ae,W=ge)}return J=Pe-ye/W<te/se-Pe?Pe===fe?[ye,W]:[W,ye]:Pe===fe?[te,se]:[se,te],J},o.backtrackBeforeAllVisibleElements=d,o.binarySearchFirstItem=v,o.docStyle=void 0,o.getActiveOrFocusedElement=function Fe(){let fe=document,Ce=fe.activeElement||fe.querySelector(":focus");for(;null!==(xe=Ce)&&void 0!==xe&&xe.shadowRoot;){var xe;fe=Ce.shadowRoot,Ce=fe.activeElement||fe.querySelector(":focus")}return Ce},o.getPageSizeInches=function i({view:fe,userUnit:Ce,rotate:xe}){const[Pe,ye,W,te]=fe,se=xe%180!=0,J=(W-Pe)/72*Ce,ae=(te-ye)/72*Ce;return{width:se?ae:J,height:se?J:ae}},o.getVisibleElements=function c({scrollEl:fe,views:Ce,sortByVisibility:xe=!1,horizontal:Pe=!1,rtl:ye=!1}){const W=fe.scrollTop,te=W+fe.clientHeight,se=fe.scrollLeft,J=se+fe.clientWidth,ee=[],X=new Set,Q=Ce.length;let Ae=v(Ce,Pe?function ge(ve){const Ee=ve.div,Se=Ee.offsetLeft+Ee.clientLeft;return ye?Se<J:Se+Ee.clientWidth>se}:function ae(ve){const Ee=ve.div;return Ee.offsetTop+Ee.clientTop+Ee.clientHeight>W});Ae>0&&Ae<Q&&!Pe&&(Ae=d(Ae,Ce,W));let be=Pe?J:-1;for(let ve=Ae;ve<Q;ve++){const Ee=Ce[ve],Se=Ee.div,we=Se.offsetLeft+Se.clientLeft,ke=Se.offsetTop+Se.clientTop,Te=Se.clientWidth,Re=Se.clientHeight,De=we+Te,Be=ke+Re;if(-1===be)Be>=te&&(be=Be);else if((Pe?we:ke)>be)break;if(Be<=W||ke>=te||De<=se||we>=J)continue;const Ne=Math.max(0,W-ke)+Math.max(0,Be-te),Oe=(Te-(Math.max(0,se-we)+Math.max(0,De-J)))/Te;ee.push({id:Ee.id,x:we,y:ke,view:Ee,percent:(Re-Ne)/Re*Oe*100|0,widthPercent:100*Oe|0}),X.add(Ee.id)}const he=ee[0],ce=ee.at(-1);return xe&&ee.sort(function(ve,Ee){const Se=ve.percent-Ee.percent;return Math.abs(Se)>.001?-Se:ve.id-Ee.id}),{first:he,last:ce,views:ee,ids:X}},o.isPortraitOrientation=function pe(fe){return fe.width<=fe.height},o.isValidRotation=function Z(fe){return Number.isInteger(fe)&&fe%90==0},o.isValidScrollMode=function re(fe){return Number.isInteger(fe)&&Object.values(L).includes(fe)&&fe!==L.UNKNOWN},o.isValidSpreadMode=function ie(fe){return Number.isInteger(fe)&&Object.values(H).includes(fe)&&fe!==H.UNKNOWN},o.noContextMenuHandler=function S(fe){fe.preventDefault()},o.normalizeWheelEventDelta=function z(fe){let Ce=k(fe);return 0===fe.deltaMode?Ce/=900:1===fe.deltaMode&&(Ce/=30),Ce},o.normalizeWheelEventDirection=k,o.parseQueryString=function q(fe){const Ce=new Map;for(const[xe,Pe]of new URLSearchParams(fe))Ce.set(xe.toLowerCase(),Pe);return Ce},o.removeNullCharacters=function s(fe,Ce=!1){return"string"!=typeof fe?(console.error("The argument must be a string."),fe):(Ce&&(fe=fe.replace(a," ")),fe.replace(B,""))},o.roundToDivide=function E(fe,Ce){const xe=fe%Ce;return 0===xe?fe:Math.round(fe-xe+Ce)},o.scrollIntoView=function U(fe,Ce,xe=!1){let Pe=fe.offsetParent;if(!Pe)return void console.error("offsetParent is not set -- cannot scroll");let ye=fe.offsetTop+fe.clientTop,W=fe.offsetLeft+fe.clientLeft;for(;Pe.clientHeight===Pe.scrollHeight&&Pe.clientWidth===Pe.scrollWidth||xe&&(Pe.classList.contains("markedContent")||"hidden"===getComputedStyle(Pe).overflow);)if(ye+=Pe.offsetTop,W+=Pe.offsetLeft,Pe=Pe.offsetParent,!Pe)return;Ce&&(void 0!==Ce.top&&(ye+=Ce.top),void 0!==Ce.left&&(W+=Ce.left,Pe.scrollLeft=W)),Pe.scrollTop=ye},o.watchScroll=function $(fe,Ce){const xe=function(W){ye||(ye=window.requestAnimationFrame(function(){ye=null;const se=fe.scrollLeft,J=Pe.lastX;se!==J&&(Pe.right=se>J),Pe.lastX=se;const ae=fe.scrollTop,ge=Pe.lastY;ae!==ge&&(Pe.down=ae>ge),Pe.lastY=ae,Ce(Pe)}))},Pe={right:!0,down:!0,lastX:fe.scrollLeft,lastY:fe.scrollTop,_eventHandler:xe};let ye=null;return fe.addEventListener("scroll",xe,!0),Pe},o.DEFAULT_SCALE_VALUE="auto",o.DEFAULT_SCALE=1,o.DEFAULT_SCALE_DELTA=1.1,o.MIN_SCALE=.1,o.MAX_SCALE=10,o.UNKNOWN_SCALE=0,o.MAX_AUTO_SCALE=1.25,o.SCROLLBAR_PADDING=40,o.VERTICAL_PADDING=5,o.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},o.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const l={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};o.SidebarView=l,o.RendererType={CANVAS:"canvas",SVG:"svg"},o.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const L={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};o.ScrollMode=L;const H={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};o.SpreadMode=H,o.AutoPrintRegExp=/\bprint\s*\(/,o.OutputScale=class V{constructor(){const Ce=window.devicePixelRatio||1;this.sx=Ce,this.sy=Ce}get scaled(){return 1!==this.sx||1!==this.sy}};const B=/\x00/g,a=/[\x01-\x1F]/g;function v(fe,Ce,xe=0){let Pe=xe,ye=fe.length-1;if(ye<0||!Ce(fe[ye]))return fe.length;if(Ce(fe[Pe]))return Pe;for(;Pe<ye;){const W=Pe+ye>>1;Ce(fe[W])?ye=W:Pe=W+1}return Pe}function d(fe,Ce,xe){if(fe<2)return fe;let Pe=Ce[fe].div,ye=Pe.offsetTop+Pe.clientTop;ye>=xe&&(Pe=Ce[fe-1].div,ye=Pe.offsetTop+Pe.clientTop);for(let W=fe-2;W>=0&&(Pe=Ce[W].div,!(Pe.offsetTop+Pe.clientTop+Pe.clientHeight<=ye));--W)fe=W;return fe}function k(fe){let Ce=Math.hypot(fe.deltaX,fe.deltaY);const xe=Math.atan2(fe.deltaY,fe.deltaX);return-.25*Math.PI<xe&&xe<.75*Math.PI&&(Ce=-Ce),Ce}const le=new Promise(function(fe){window.requestAnimationFrame(fe)});o.animationStarted=le;const ue=document.documentElement.style;o.docStyle=ue;var _e=new WeakMap,me=new WeakMap,ne=new WeakMap;o.ProgressBar=class oe{constructor(Ce){if(K(this,_e,{writable:!0,value:null}),K(this,me,{writable:!0,value:0}),K(this,ne,{writable:!0,value:!0}),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const xe=document.getElementById(Ce);M(this,_e,xe.classList)}get percent(){return P(this,me)}set percent(Ce){M(this,me,function de(fe,Ce,xe){return Math.min(Math.max(fe,Ce),xe)}(Ce,0,100)),isNaN(Ce)?P(this,_e).add("indeterminate"):(P(this,_e).remove("indeterminate"),ue.setProperty("--progressBar-percent",`${P(this,me)}%`))}setWidth(Ce){if(!Ce)return;const Pe=Ce.parentNode.offsetWidth-Ce.offsetWidth;Pe>0&&ue.setProperty("--progressBar-end-offset",`${Pe}px`)}hide(){P(this,ne)&&(M(this,ne,!1),P(this,_e).add("hidden"))}show(){P(this,ne)||(M(this,ne,!0),P(this,_e).remove("hidden"))}}},(F,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StructTreeLayerBuilder=void 0;const g={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},C=/^H(\d+)$/;o.StructTreeLayerBuilder=class b{constructor({pdfPage:f}){this.pdfPage=f}render(f){return this._walk(f)}_setAttributes(f,t){void 0!==f.alt&&t.setAttribute("aria-label",f.alt),void 0!==f.id&&t.setAttribute("aria-owns",f.id),void 0!==f.lang&&t.setAttribute("lang",f.lang)}_walk(f){if(!f)return null;const t=document.createElement("span");if("role"in f){const{role:e}=f,u=e.match(C);u?(t.setAttribute("role","heading"),t.setAttribute("aria-level",u[1])):g[e]&&t.setAttribute("role",g[e])}if(this._setAttributes(f,t),f.children)if(1===f.children.length&&"id"in f.children[0])this._setAttributes(f.children[0],t);else for(const e of f.children)t.append(this._walk(e));return t}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerBuilder=void 0;var C=g(3);o.TextLayerBuilder=class y{constructor({textLayerDiv:t,eventBus:e,pageIndex:u,viewport:_,highlighter:m=null,enhanceTextSelection:A=!1,accessibilityManager:l=null}){this.textLayerDiv=t,this.eventBus=e,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=u+1,this.viewport=_,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=m,this.enhanceTextSelection=A,this.accessibilityManager=l,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.append(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(t=0){var e,u;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null===(e=this.highlighter)||void 0===e||e.setTextMapping(this.textDivs,this.textContentItemsStr),null===(u=this.accessibilityManager)||void 0===u||u.setTextMapping(this.textDivs);const _=document.createDocumentFragment();this.textLayerRenderTask=(0,C.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:_,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var m,A;this.textLayerDiv.append(_),this._finishRendering(),null===(m=this.highlighter)||void 0===m||m.enable(),null===(A=this.accessibilityManager)||void 0===A||A.enable()},function(m){})}cancel(){var t,e;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null===(t=this.highlighter)||void 0===t||t.disable(),null===(e=this.accessibilityManager)||void 0===e||e.disable()}setTextContentStream(t){this.cancel(),this.textContentStream=t}setTextContent(t){this.cancel(),this.textContent=t}_bindMouse(){const t=this.textLayerDiv;let e=null;t.addEventListener("mousedown",u=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(e&&(clearTimeout(e),e=null));const _=t.querySelector(".endOfContent");if(!_)return;let m=u.target!==t;if(m=m&&"none"!==window.getComputedStyle(_).getPropertyValue("-moz-user-select"),m){const A=t.getBoundingClientRect(),l=Math.max(0,(u.pageY-A.top)/A.height);_.style.top=(100*l).toFixed(2)+"%"}_.classList.add("active")}),t.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(e=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),e=null},300));const u=t.querySelector(".endOfContent");u&&(u.style.top="",u.classList.remove("active"))})}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayerBuilder=void 0;var C=g(3);o.XfaLayerBuilder=class b{constructor({pageDiv:f,pdfPage:t,annotationStorage:e=null,linkService:u,xfaHtml:_=null}){this.pageDiv=f,this.pdfPage=t,this.annotationStorage=e,this.linkService=u,this.xfaHtml=_,this.div=null,this._cancelled=!1}render(f,t="display"){if("print"===t){const e={viewport:f.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t},u=document.createElement("div");this.pageDiv.append(u),e.div=u;const _=C.XfaLayer.render(e);return Promise.resolve(_)}return this.pdfPage.getXfa().then(e=>{if(this._cancelled||!e)return{textDivs:[]};const u={viewport:f.clone({dontFlip:!0}),div:this.div,xfaHtml:e,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?C.XfaLayer.update(u):(this.div=document.createElement("div"),this.pageDiv.append(this.div),u.div=this.div,C.XfaLayer.render(u))}).catch(e=>{console.error(e)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFViewer=o.PDFSinglePageViewer=void 0;var C=g(7),b=g(12);o.PDFViewer=class y extends b.BaseViewer{},o.PDFSinglePageViewer=class f extends b.BaseViewer{_resetView(){super._resetView(),this._scrollMode=C.ScrollMode.PAGE,this._spreadMode=C.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}},(F,o,g)=>{let C;Object.defineProperty(o,"__esModule",{value:!0}),o.PagesCountLimit=o.PDFPageViewBuffer=o.BaseViewer=void 0;var b=g(3),y=g(7),f=g(2),t=g(5),e=g(4),u=g(13),_=g(16),m=g(6),A=g(8),l=g(17),p=g(9),R=g(10);const H="enablePermissions",G={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function V(ye){return Object.values(b.AnnotationEditorType).includes(ye)&&ye!==b.AnnotationEditorType.DISABLE}o.PagesCountLimit=G;var U=new WeakMap,$=new WeakMap,q=new WeakSet;C=Symbol.iterator;class B{constructor(W){n(this,q),K(this,U,{writable:!0,value:new Set}),K(this,$,{writable:!0,value:0}),M(this,$,W)}push(W){const te=P(this,U);te.has(W)&&te.delete(W),te.add(W),te.size>P(this,$)&&T(this,q,a).call(this)}resize(W,te=null){M(this,$,W);const se=P(this,U);if(te){const J=se.size;let ae=1;for(const ge of se)if(te.has(ge.id)&&(se.delete(ge),se.add(ge)),++ae>J)break}for(;se.size>P(this,$);)T(this,q,a).call(this)}has(W){return P(this,U).has(W)}[C](){return P(this,U).keys()}}function a(){const ye=P(this,U).keys().next().value;null==ye||ye.destroy(),P(this,U).delete(ye)}o.PDFPageViewBuffer=B;var s=new WeakMap,v=new WeakMap,w=new WeakMap,E=new WeakMap,i=new WeakMap,d=new WeakMap,c=new WeakMap,S=new WeakMap,k=new WeakSet,z=new WeakSet,Z=new WeakSet,re=new WeakSet,ie=new WeakSet,pe=new WeakSet,le=new WeakSet,ue=new WeakSet,de=new WeakSet;class _e{constructor(W){var te,se,J,ae,ge;if(n(this,de),n(this,ue),n(this,le),n(this,pe),n(this,ie),n(this,re),n(this,Z),n(this,z),n(this,k),K(this,s,{writable:!0,value:null}),K(this,v,{writable:!0,value:b.AnnotationEditorType.DISABLE}),K(this,w,{writable:!0,value:null}),K(this,E,{writable:!0,value:b.AnnotationMode.ENABLE_FORMS}),K(this,i,{writable:!0,value:!1}),K(this,d,{writable:!0,value:0}),K(this,c,{writable:!0,value:null}),K(this,S,{writable:!0,value:null}),this.constructor===_e)throw new Error("Cannot initialize BaseViewer.");const ee="2.16.105";if(b.version!==ee)throw new Error(`The API version "${b.version}" does not match the Viewer version "${ee}".`);if(this.container=W.container,this.viewer=W.viewer||W.container.firstElementChild,"DIV"!==(null===(te=this.container)||void 0===te?void 0:te.tagName.toUpperCase())||"DIV"!==(null===(se=this.viewer)||void 0===se?void 0:se.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=W.eventBus,this.linkService=W.linkService||new m.SimpleLinkService,this.downloadManager=W.downloadManager||null,this.findController=W.findController||null,this._scriptingManager=W.scriptingManager||null,this.removePageBorders=W.removePageBorders||!1,this.textLayerMode=null!==(J=W.textLayerMode)&&void 0!==J?J:y.TextLayerMode.ENABLE,M(this,E,null!==(ae=W.annotationMode)&&void 0!==ae?ae:b.AnnotationMode.ENABLE_FORMS),M(this,v,null!==(ge=W.annotationEditorMode)&&void 0!==ge?ge:b.AnnotationEditorType.DISABLE),this.imageResourcesPath=W.imageResourcesPath||"",this.enablePrintAutoRotate=W.enablePrintAutoRotate||!1,this.renderer=W.renderer||y.RendererType.CANVAS,this.useOnlyCssZoom=W.useOnlyCssZoom||!1,this.maxCanvasPixels=W.maxCanvasPixels,this.l10n=W.l10n||e.NullL10n,M(this,i,W.enablePermissions||!1),this.pageColors=W.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!W.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new _.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=W.renderingQueue,this.scroll=(0,y.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=y.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(W){return this._pages[W]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(W){return null==W?void 0:W.pdfPage})}get renderForms(){return P(this,E)===b.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(W){if(!Number.isInteger(W))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(W,!0)||console.error(`currentPageNumber: "${W}" is not a valid page.`))}_setCurrentPageNumber(W,te=!1){var se,J;if(this._currentPageNumber===W)return te&&T(this,pe,Me).call(this),!0;if(!(0<W&&W<=this.pagesCount))return!1;const ae=this._currentPageNumber;return this._currentPageNumber=W,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:W,pageLabel:null!==(se=null===(J=this._pageLabels)||void 0===J?void 0:J[W-1])&&void 0!==se?se:null,previous:ae}),te&&T(this,pe,Me).call(this),!0}get currentPageLabel(){var W,te;return null!==(W=null===(te=this._pageLabels)||void 0===te?void 0:te[this._currentPageNumber-1])&&void 0!==W?W:null}set currentPageLabel(W){if(!this.pdfDocument)return;let te=0|W;if(this._pageLabels){const se=this._pageLabels.indexOf(W);se>=0&&(te=se+1)}this._setCurrentPageNumber(te,!0)||console.error(`currentPageLabel: "${W}" is not a valid page.`)}get currentScale(){return this._currentScale!==y.UNKNOWN_SCALE?this._currentScale:y.DEFAULT_SCALE}set currentScale(W){if(isNaN(W))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(W,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(W){this.pdfDocument&&this._setScale(W,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(W){if(!(0,y.isValidRotation)(W))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((W%=360)<0&&(W+=360),this._pagesRotation===W))return;this._pagesRotation=W;const te=this._currentPageNumber,se={rotation:W};for(const J of this._pages)J.update(se);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:W,pageNumber:te}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(W){var te=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),P(this,w)&&(P(this,w).destroy(),M(this,w,null))),this.pdfDocument=W,!W)return;const se=W.isPureXfa,J=W.numPages,ae=W.getPage(1),ge=W.getOptionalContentConfig(),ee=P(this,i)?W.getPermissions():Promise.resolve();if(J>G.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const X=this._scrollMode=y.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:X})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:J})},()=>{}),this._onBeforeDraw=X=>{const Q=this._pages[X.pageNumber-1];Q&&P(this,s).push(Q)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=X=>{X.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:X.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,P(this,S)&&(document.removeEventListener("visibilitychange",P(this,S)),M(this,S,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([ae,ee]).then(([X,Q])=>{if(W!==this.pdfDocument)return;this._firstPageCapability.resolve(X),this._optionalContentConfigPromise=ge;const{annotationEditorMode:Ae,annotationMode:be,textLayerMode:he}=T(this,k,me).call(this,Q);if(Ae!==b.AnnotationEditorType.DISABLE){const De=Ae;se?console.warn("Warning: XFA-editing is not implemented."):V(De)?(M(this,w,new b.AnnotationEditorUIManager(this.container,this.eventBus)),De!==b.AnnotationEditorType.NONE&&P(this,w).updateMode(De)):console.error(`Invalid AnnotationEditor mode: ${De}`)}const ce=this._scrollMode===y.ScrollMode.PAGE?null:this.viewer,ve=this.currentScale,Ee=X.getViewport({scale:ve*b.PixelsPerInch.PDF_TO_CSS_UNITS}),Se=he===y.TextLayerMode.DISABLE||se?null:this,we=be!==b.AnnotationMode.DISABLE?this:null,ke=se?this:null,Te=P(this,w)?this:null;for(let De=1;De<=J;++De){const Be=new u.PDFPageView({container:ce,eventBus:this.eventBus,id:De,scale:ve,defaultViewport:Ee.clone(),optionalContentConfigPromise:ge,renderingQueue:this.renderingQueue,textLayerFactory:Se,textLayerMode:he,annotationLayerFactory:we,annotationMode:be,xfaLayerFactory:ke,annotationEditorLayerFactory:Te,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Be)}const Re=this._pages[0];Re&&(Re.setPdfPage(X),this.linkService.cachePageRef(1,X.ref)),this._scrollMode===y.ScrollMode.PAGE?T(this,Z,oe).call(this):this._spreadMode!==y.SpreadMode.NONE&&this._updateSpreadMode(),T(this,z,ne).call(this).then(N(function*(){if(te.findController&&te.findController.setDocument(W),te._scriptingManager&&te._scriptingManager.setDocument(W),P(te,w)&&te.eventBus.dispatch("annotationeditormodechanged",{source:te,mode:P(te,v)}),W.loadingParams.disableAutoFetch||J>G.FORCE_LAZY_PAGE_INIT)return void te._pagesCapability.resolve();let De=J-1;if(De<=0)te._pagesCapability.resolve();else for(let Be=2;Be<=J;++Be){const Ne=W.getPage(Be).then(We=>{const Ge=te._pages[Be-1];Ge.pdfPage||Ge.setPdfPage(We),te.linkService.cachePageRef(Be,We.ref),0==--De&&te._pagesCapability.resolve()},We=>{console.error(`Unable to get page ${Be} to initialize viewer`,We),0==--De&&te._pagesCapability.resolve()});Be%G.PAUSE_EAGER_PAGE_INIT==0&&(yield Ne)}})),this.eventBus.dispatch("pagesinit",{source:this}),W.getMetadata().then(({info:De})=>{W===this.pdfDocument&&De.Language&&(this.viewer.lang=De.Language)}),this.defaultRenderingQueue&&this.update()}).catch(X=>{console.error("Unable to initialize viewer",X),this._pagesCapability.reject(X)})}setPageLabels(W){if(this.pdfDocument){W?Array.isArray(W)&&this.pdfDocument.numPages===W.length?this._pageLabels=W:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let J=0,ae=this._pages.length;J<ae;J++){var te,se;this._pages[J].setPageLabel(null!==(te=null===(se=this._pageLabels)||void 0===se?void 0:se[J])&&void 0!==te?te:null)}}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=y.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,M(this,s,new B(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,b.createPromiseCapability)(),this._onePageRenderedCapability=(0,b.createPromiseCapability)(),this._pagesCapability=(0,b.createPromiseCapability)(),this._scrollMode=y.ScrollMode.VERTICAL,this._previousScrollMode=y.ScrollMode.UNKNOWN,this._spreadMode=y.SpreadMode.NONE,M(this,c,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),P(this,S)&&(document.removeEventListener("visibilitychange",P(this,S)),M(this,S,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(H)}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(W,te,se=!1,J=!1){if(this._currentScaleValue=te.toString(),T(this,ie,Le).call(this,W))return void(J&&this.eventBus.dispatch("scalechanging",{source:this,scale:W,presetValue:te}));y.docStyle.setProperty("--scale-factor",W*b.PixelsPerInch.PDF_TO_CSS_UNITS);const ae={scale:W};for(const ge of this._pages)ge.update(ae);if(this._currentScale=W,!se){let ee,ge=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(ge=this._location.pageNumber,ee=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:ge,destArray:ee,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:W,presetValue:J?te:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL?2:1}_setScale(W,te=!1){let se=parseFloat(W);if(se>0)this._setScaleUpdatePages(se,W,te,!1);else{const J=this._pages[this._currentPageNumber-1];if(!J)return;let ae=y.SCROLLBAR_PADDING,ge=y.VERTICAL_PADDING;this.isInPresentationMode?ae=ge=4:this.removePageBorders?ae=ge=0:this._scrollMode===y.ScrollMode.HORIZONTAL&&([ae,ge]=[ge,ae]);const ee=(this.container.clientWidth-ae)/J.width*J.scale/this._pageWidthScaleFactor,X=(this.container.clientHeight-ge)/J.height*J.scale;switch(W){case"page-actual":se=1;break;case"page-width":se=ee;break;case"page-height":se=X;break;case"page-fit":se=Math.min(ee,X);break;case"auto":const Q=(0,y.isPortraitOrientation)(J)?ee:Math.min(X,ee);se=Math.min(y.MAX_AUTO_SCALE,Q);break;default:return void console.error(`_setScale: "${W}" is an unknown zoom value.`)}this._setScaleUpdatePages(se,W,te,!0)}}pageLabelToPageNumber(W){if(!this._pageLabels)return null;const te=this._pageLabels.indexOf(W);return te<0?null:te+1}scrollPageIntoView({pageNumber:W,destArray:te=null,allowNegativeOffset:se=!1,ignoreDestinationZoom:J=!1}){if(!this.pdfDocument)return;const ae=Number.isInteger(W)&&this._pages[W-1];if(!ae)return void console.error(`scrollPageIntoView: "${W}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!te)return void this._setCurrentPageNumber(W,!0);let Ae,be,ge=0,ee=0,X=0,Q=0;const he=ae.rotation%180!=0,ce=(he?ae.height:ae.width)/ae.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS,ve=(he?ae.width:ae.height)/ae.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;let Ee=0;switch(te[1].name){case"XYZ":ge=te[2],ee=te[3],Ee=te[4],ge=null!==ge?ge:0,ee=null!==ee?ee:ve;break;case"Fit":case"FitB":Ee="page-fit";break;case"FitH":case"FitBH":ee=te[2],Ee="page-width",null===ee&&this._location?(ge=this._location.left,ee=this._location.top):("number"!=typeof ee||ee<0)&&(ee=ve);break;case"FitV":case"FitBV":ge=te[2],X=ce,Q=ve,Ee="page-height";break;case"FitR":ge=te[2],ee=te[3],X=te[4]-ge,Q=te[5]-ee,Ae=(this.container.clientWidth-(this.removePageBorders?0:y.SCROLLBAR_PADDING))/X/b.PixelsPerInch.PDF_TO_CSS_UNITS,be=(this.container.clientHeight-(this.removePageBorders?0:y.VERTICAL_PADDING))/Q/b.PixelsPerInch.PDF_TO_CSS_UNITS,Ee=Math.min(Math.abs(Ae),Math.abs(be));break;default:return void console.error(`scrollPageIntoView: "${te[1].name}" is not a valid destination type.`)}if(J||(Ee&&Ee!==this._currentScale?this.currentScaleValue=Ee:this._currentScale===y.UNKNOWN_SCALE&&(this.currentScaleValue=y.DEFAULT_SCALE_VALUE)),"page-fit"===Ee&&!te[4])return void T(this,re,Fe).call(this,ae);const Se=[ae.viewport.convertToViewportPoint(ge,ee),ae.viewport.convertToViewportPoint(ge+X,ee+Q)];let we=Math.min(Se[0][0],Se[1][0]),ke=Math.min(Se[0][1],Se[1][1]);se||(we=Math.max(we,0),ke=Math.max(ke,0)),T(this,re,Fe).call(this,ae,{left:we,top:ke})}_updateLocation(W){const te=this._currentScale,se=this._currentScaleValue,J=parseFloat(se)===te?Math.round(1e4*te)/100:se,ae=W.id,ee=this.container,X=this._pages[ae-1].getPagePoint(ee.scrollLeft-W.x,ee.scrollTop-W.y),Q=Math.round(X[0]),Ae=Math.round(X[1]);let be=`#page=${ae}`;this.isInPresentationMode||(be+=`&zoom=${J},${Q},${Ae}`),this._location={pageNumber:ae,scale:J,top:Ae,left:Q,rotation:this._pagesRotation,pdfOpenParams:be}}update(){const W=this._getVisiblePages(),te=W.views,se=te.length;if(0===se)return;const J=Math.max(10,2*se+1);P(this,s).resize(J,W.ids),this.renderingQueue.renderHighestPriority(W);const ae=this._spreadMode===y.SpreadMode.NONE&&(this._scrollMode===y.ScrollMode.PAGE||this._scrollMode===y.ScrollMode.VERTICAL),ge=this._currentPageNumber;let ee=!1;for(const X of te){if(X.percent<100)break;if(X.id===ge&&ae){ee=!0;break}}this._setCurrentPageNumber(ee?ge:te[0].id),this._updateLocation(W.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(W){return this.container.contains(W)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===y.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===y.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const W=this._scrollMode===y.ScrollMode.PAGE?P(this,c).pages:this._pages,te=this._scrollMode===y.ScrollMode.HORIZONTAL;return(0,y.getVisibleElements)({scrollEl:this.container,views:W,sortByVisibility:!0,horizontal:te,rtl:te&&this._isContainerRtl})}isPageVisible(W){return!!this.pdfDocument&&(Number.isInteger(W)&&W>0&&W<=this.pagesCount?this._getVisiblePages().ids.has(W):(console.error(`isPageVisible: "${W}" is not a valid page.`),!1))}isPageCached(W){if(!this.pdfDocument)return!1;if(!(Number.isInteger(W)&&W>0&&W<=this.pagesCount))return console.error(`isPageCached: "${W}" is not a valid page.`),!1;const te=this._pages[W-1];return P(this,s).has(te)}cleanup(){for(const W of this._pages)W.renderingState!==y.RenderingStates.FINISHED&&W.reset()}_cancelRendering(){for(const W of this._pages)W.cancelRendering()}forceRendering(W){const te=W||this._getVisiblePages(),se=T(this,ue,xe).call(this,te),ae=this.renderingQueue.getHighestPriority(te,this._pages,se,this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL);return T(this,de,Pe).call(this,te.ids),!!ae&&(T(this,le,fe).call(this,ae).then(()=>{this.renderingQueue.renderView(ae)}),!0)}createTextLayerBuilder({textLayerDiv:W,pageIndex:te,viewport:se,enhanceTextSelection:J=!1,eventBus:ae,highlighter:ge,accessibilityManager:ee=null}){return new p.TextLayerBuilder({textLayerDiv:W,eventBus:ae,pageIndex:te,viewport:se,enhanceTextSelection:!this.isInPresentationMode&&J,highlighter:ge,accessibilityManager:ee})}createTextHighlighter({pageIndex:W,eventBus:te}){return new l.TextHighlighter({eventBus:te,pageIndex:W,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:W,pdfPage:te,annotationStorage:se=(ce=>null===(ce=this.pdfDocument)||void 0===ce?void 0:ce.annotationStorage)(),imageResourcesPath:J="",renderForms:ae=!0,l10n:ge=e.NullL10n,enableScripting:ee=this.enableScripting,hasJSActionsPromise:X=(ce=>null===(ce=this.pdfDocument)||void 0===ce?void 0:ce.hasJSActions())(),mouseState:Q=(ce=>null===(ce=this._scriptingManager)||void 0===ce?void 0:ce.mouseState)(),fieldObjectsPromise:Ae=(ce=>null===(ce=this.pdfDocument)||void 0===ce?void 0:ce.getFieldObjects())(),annotationCanvasMap:be=null,accessibilityManager:he=null}){return new t.AnnotationLayerBuilder({pageDiv:W,pdfPage:te,annotationStorage:se,imageResourcesPath:J,renderForms:ae,linkService:this.linkService,downloadManager:this.downloadManager,l10n:ge,enableScripting:ee,hasJSActionsPromise:X,mouseState:Q,fieldObjectsPromise:Ae,annotationCanvasMap:be,accessibilityManager:he})}createAnnotationEditorLayerBuilder({uiManager:W=P(this,w),pageDiv:te,pdfPage:se,accessibilityManager:J=null,l10n:ae,annotationStorage:ge=(ee=>null===(ee=this.pdfDocument)||void 0===ee?void 0:ee.annotationStorage)()}){return new f.AnnotationEditorLayerBuilder({uiManager:W,pageDiv:te,pdfPage:se,annotationStorage:ge,accessibilityManager:J,l10n:ae})}createXfaLayerBuilder({pageDiv:W,pdfPage:te,annotationStorage:se=(J=>null===(J=this.pdfDocument)||void 0===J?void 0:J.annotationStorage)()}){return new R.XfaLayerBuilder({pageDiv:W,pdfPage:te,annotationStorage:se,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:W}){return new A.StructTreeLayerBuilder({pdfPage:W})}get hasEqualPageSizes(){const W=this._pages[0];for(let te=1,se=this._pages.length;te<se;++te){const J=this._pages[te];if(J.width!==W.width||J.height!==W.height)return!1}return!0}getPagesOverview(){return this._pages.map(W=>{const te=W.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,y.isPortraitOrientation)(te)?{width:te.width,height:te.height,rotation:te.rotation}:{width:te.height,height:te.width,rotation:(te.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(W){if(!(W instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${W}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=W;const te={optionalContentConfigPromise:W};for(const se of this._pages)se.update(te);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:W})}get scrollMode(){return this._scrollMode}set scrollMode(W){if(this._scrollMode!==W){if(!(0,y.isValidScrollMode)(W))throw new Error(`Invalid scroll mode: ${W}`);this.pagesCount>G.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=W,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:W}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(W=null){const te=this._scrollMode,se=this.viewer;se.classList.toggle("scrollHorizontal",te===y.ScrollMode.HORIZONTAL),se.classList.toggle("scrollWrapped",te===y.ScrollMode.WRAPPED),this.pdfDocument&&W&&(te===y.ScrollMode.PAGE?T(this,Z,oe).call(this):this._previousScrollMode===y.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(W,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(W){if(this._spreadMode!==W){if(!(0,y.isValidSpreadMode)(W))throw new Error(`Invalid spread mode: ${W}`);this._spreadMode=W,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:W}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(W=null){if(!this.pdfDocument)return;const te=this.viewer,se=this._pages;if(this._scrollMode===y.ScrollMode.PAGE)T(this,Z,oe).call(this);else if(te.textContent="",this._spreadMode===y.SpreadMode.NONE)for(const J of this._pages)te.append(J.div);else{const J=this._spreadMode-1;let ae=null;for(let ge=0,ee=se.length;ge<ee;++ge)null===ae?(ae=document.createElement("div"),ae.className="spread",te.append(ae)):ge%2===J&&(ae=ae.cloneNode(!1),te.append(ae)),ae.append(se[ge].div)}W&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(W,!0),this.update())}_getPageAdvance(W,te=!1){switch(this._scrollMode){case y.ScrollMode.WRAPPED:{const{views:se}=this._getVisiblePages(),J=new Map;for(const{id:ae,y:ge,percent:ee,widthPercent:X}of se){if(0===ee||X<100)continue;let Q=J.get(ge);Q||J.set(ge,Q||(Q=[])),Q.push(ae)}for(const ae of J.values()){const ge=ae.indexOf(W);if(-1===ge)continue;const ee=ae.length;if(1===ee)break;if(te)for(let X=ge-1,Q=0;X>=Q;X--){const be=ae[X+1]-1;if(ae[X]<be)return W-be}else for(let X=ge+1,Q=ee;X<Q;X++){const be=ae[X-1]+1;if(ae[X]>be)return be-W}if(te){const X=ae[0];if(X<W)return W-X+1}else{const X=ae[ee-1];if(X>W)return X-W+1}break}break}case y.ScrollMode.HORIZONTAL:break;case y.ScrollMode.PAGE:case y.ScrollMode.VERTICAL:{if(this._spreadMode===y.SpreadMode.NONE)break;const se=this._spreadMode-1;if(te&&W%2!==se)break;if(!te&&W%2===se)break;const{views:J}=this._getVisiblePages(),ae=te?W-1:W+1;for(const{id:ge,percent:ee,widthPercent:X}of J)if(ge===ae){if(ee>0&&100===X)return 2;break}break}}return 1}nextPage(){const W=this._currentPageNumber,te=this.pagesCount;if(W>=te)return!1;const se=this._getPageAdvance(W,!1)||1;return this.currentPageNumber=Math.min(W+se,te),!0}previousPage(){const W=this._currentPageNumber;if(W<=1)return!1;const te=this._getPageAdvance(W,!0)||1;return this.currentPageNumber=Math.max(W-te,1),!0}increaseScale(W=1){let te=this._currentScale;do{te=(te*y.DEFAULT_SCALE_DELTA).toFixed(2),te=Math.ceil(10*te)/10,te=Math.min(y.MAX_SCALE,te)}while(--W>0&&te<y.MAX_SCALE);this.currentScaleValue=te}decreaseScale(W=1){let te=this._currentScale;do{te=(te/y.DEFAULT_SCALE_DELTA).toFixed(2),te=Math.floor(10*te)/10,te=Math.max(y.MIN_SCALE,te)}while(--W>0&&te>y.MIN_SCALE);this.currentScaleValue=te}updateContainerHeightCss(){const W=this.container.clientHeight;W!==P(this,d)&&(M(this,d,W),y.docStyle.setProperty("--viewer-container-height",`${W}px`))}get annotationEditorMode(){return P(this,w)?P(this,v):b.AnnotationEditorType.DISABLE}set annotationEditorMode(W){if(!P(this,w))throw new Error("The AnnotationEditor is not enabled.");if(P(this,v)!==W){if(!V(W))throw new Error(`Invalid AnnotationEditor mode: ${W}`);this.pdfDocument&&(M(this,v,W),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:W}),P(this,w).updateMode(W))}}set annotationEditorParams({type:W,value:te}){if(!P(this,w))throw new Error("The AnnotationEditor is not enabled.");P(this,w).updateParams(W,te)}refresh(){if(!this.pdfDocument)return;const W={};for(const te of this._pages)te.update(W);this.update()}}function me(ye){const W={annotationEditorMode:P(this,v),annotationMode:P(this,E),textLayerMode:this.textLayerMode};return ye&&(ye.includes(b.PermissionFlag.COPY)||this.viewer.classList.add(H),ye.includes(b.PermissionFlag.MODIFY_CONTENTS)||(W.annotationEditorMode=b.AnnotationEditorType.DISABLE),!ye.includes(b.PermissionFlag.MODIFY_ANNOTATIONS)&&!ye.includes(b.PermissionFlag.FILL_INTERACTIVE_FORMS)&&P(this,E)===b.AnnotationMode.ENABLE_FORMS&&(W.annotationMode=b.AnnotationMode.ENABLE)),W}function ne(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const ye=new Promise(W=>{M(this,S,()=>{"hidden"===document.visibilityState&&(W(),document.removeEventListener("visibilitychange",P(this,S)),M(this,S,null))}),document.addEventListener("visibilitychange",P(this,S))});return Promise.race([this._onePageRenderedCapability.promise,ye])}function oe(){if(this._scrollMode!==y.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const ye=this._currentPageNumber,W=P(this,c),te=this.viewer;if(te.textContent="",W.pages.length=0,this._spreadMode!==y.SpreadMode.NONE||this.isInPresentationMode){const se=new Set,J=this._spreadMode-1;-1===J?se.add(ye-1):ye%2!==J?(se.add(ye-1),se.add(ye)):(se.add(ye-2),se.add(ye-1));const ae=document.createElement("div");if(ae.className="spread",this.isInPresentationMode){const ge=document.createElement("div");ge.className="dummyPage",ae.append(ge)}for(const ge of se){const ee=this._pages[ge];ee&&(ae.append(ee.div),W.pages.push(ee))}te.append(ae)}else{const se=this._pages[ye-1];te.append(se.div),W.pages.push(se)}W.scrollDown=ye>=W.previousPageNumber,W.previousPageNumber=ye}function Fe(ye,W=null){const{div:te,id:se}=ye;if(this._scrollMode===y.ScrollMode.PAGE&&(this._setCurrentPageNumber(se),T(this,Z,oe).call(this),this.update()),!W&&!this.isInPresentationMode){const J=te.offsetLeft+te.clientLeft,ae=J+te.clientWidth,{scrollLeft:ge,clientWidth:ee}=this.container;(this._scrollMode===y.ScrollMode.HORIZONTAL||J<ge||ae>ge+ee)&&(W={left:0,top:0})}(0,y.scrollIntoView)(te,W)}function Le(ye){return ye===this._currentScale||Math.abs(ye-this._currentScale)<1e-15}function Me(){const ye=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),T(this,re,Fe).call(this,ye)}function fe(ye){return Ce.apply(this,arguments)}function Ce(){return(Ce=N(function*(ye){if(ye.pdfPage)return ye.pdfPage;try{var W,te;const se=yield this.pdfDocument.getPage(ye.id);return ye.pdfPage||ye.setPdfPage(se),null!==(W=(te=this.linkService)._cachedPageNumber)&&void 0!==W&&W.call(te,se.ref)||this.linkService.cachePageRef(ye.id,se.ref),se}catch(se){return console.error("Unable to get page for page view",se),null}})).apply(this,arguments)}function xe(ye){var W,te;if(1===(null===(W=ye.first)||void 0===W?void 0:W.id))return!0;if((null===(te=ye.last)||void 0===te?void 0:te.id)===this.pagesCount)return!1;switch(this._scrollMode){case y.ScrollMode.PAGE:return P(this,c).scrollDown;case y.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function Pe(ye){for(const W of ye){const te=this._pages[W-1];null==te||te.toggleLoadingIconSpinner(!0)}for(const W of P(this,s))ye.has(W.id)||W.toggleLoadingIconSpinner(!1)}o.BaseViewer=_e},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFPageView=void 0;var C=g(3),b=g(7),y=g(14),f=g(4),t=g(15);const e=y.compatibilityParams.maxCanvasPixels||16777216;var u=new WeakMap,_=new WeakMap;o.PDFPageView=class m{constructor(l){var p,R,L,H;K(this,u,{writable:!0,value:C.AnnotationMode.ENABLE_FORMS}),K(this,_,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});const G=l.container,V=l.defaultViewport;this.id=l.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=l.scale||b.DEFAULT_SCALE,this.viewport=V,this.pdfPageRotate=V.rotation,this._optionalContentConfigPromise=l.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!==(p=l.textLayerMode)&&void 0!==p?p:b.TextLayerMode.ENABLE,M(this,u,null!==(R=l.annotationMode)&&void 0!==R?R:C.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=l.imageResourcesPath||"",this.useOnlyCssZoom=l.useOnlyCssZoom||!1,this.maxCanvasPixels=l.maxCanvasPixels||e,this.pageColors=l.pageColors||null,this.eventBus=l.eventBus,this.renderingQueue=l.renderingQueue,this.textLayerFactory=l.textLayerFactory,this.annotationLayerFactory=l.annotationLayerFactory,this.annotationEditorLayerFactory=l.annotationEditorLayerFactory,this.xfaLayerFactory=l.xfaLayerFactory,this.textHighlighter=null===(L=l.textHighlighterFactory)||void 0===L?void 0:L.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=l.structTreeLayerFactory,this.renderer=l.renderer||b.RendererType.CANVAS,this.l10n=l.l10n||f.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=b.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null!==(H=this.renderingQueue)&&void 0!==H&&H.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const U=document.createElement("div");if(U.className="page",U.style.width=Math.floor(this.viewport.width)+"px",U.style.height=Math.floor(this.viewport.height)+"px",U.setAttribute("data-page-number",this.id),U.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then($=>{U.setAttribute("aria-label",$)}),this.div=U,null==G||G.append(U),this._isStandalone){const{optionalContentConfigPromise:$}=l;$&&$.then(q=>{$===this._optionalContentConfigPromise&&(P(this,_).initialOptionalContent=q.hasInitialVisibility)})}}setPdfPage(l){this.pdfPage=l,this.pdfPageRotate=l.rotate,this.viewport=l.getViewport({scale:this.scale*C.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var l=this;return N(function*(){let p=null;try{yield l.annotationLayer.render(l.viewport,"display")}catch(R){console.error(`_renderAnnotationLayer: "${R}".`),p=R}finally{l.eventBus.dispatch("annotationlayerrendered",{source:l,pageNumber:l.id,error:p})}})()}_renderAnnotationEditorLayer(){var l=this;return N(function*(){let p=null;try{yield l.annotationEditorLayer.render(l.viewport,"display")}catch(R){console.error(`_renderAnnotationEditorLayer: "${R}".`),p=R}finally{l.eventBus.dispatch("annotationeditorlayerrendered",{source:l,pageNumber:l.id,error:p})}})()}_renderXfaLayer(){var l=this;return N(function*(){let p=null;try{const R=yield l.xfaLayer.render(l.viewport,"display");l.textHighlighter&&l._buildXfaTextContentItems(R.textDivs)}catch(R){console.error(`_renderXfaLayer: "${R}".`),p=R}finally{l.eventBus.dispatch("xfalayerrendered",{source:l,pageNumber:l.id,error:p})}})()}_buildXfaTextContentItems(l){var p=this;return N(function*(){const R=yield p.pdfPage.getTextContent(),L=[];for(const H of R.items)L.push(H.str);p.textHighlighter.setTextMapping(l,L),p.textHighlighter.enable()})()}_resetZoomLayer(l=!1){if(!this.zoomLayer)return;const p=this.zoomLayer.firstChild;this.paintedViewportMap.delete(p),p.width=0,p.height=0,l&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:l=!1,keepAnnotationLayer:p=!1,keepAnnotationEditorLayer:R=!1,keepXfaLayer:L=!1}={}){var H,G,V;this.cancelRendering({keepAnnotationLayer:p,keepAnnotationEditorLayer:R,keepXfaLayer:L}),this.renderingState=b.RenderingStates.INITIAL;const U=this.div;U.style.width=Math.floor(this.viewport.width)+"px",U.style.height=Math.floor(this.viewport.height)+"px";const $=U.childNodes,q=l&&this.zoomLayer||null,B=p&&(null===(H=this.annotationLayer)||void 0===H?void 0:H.div)||null,a=R&&(null===(G=this.annotationEditorLayer)||void 0===G?void 0:G.div)||null,s=L&&(null===(V=this.xfaLayer)||void 0===V?void 0:V.div)||null;for(let w=$.length-1;w>=0;w--){const E=$[w];switch(E){case q:case B:case a:case s:continue}E.remove()}var v;U.removeAttribute("data-loaded"),B&&this.annotationLayer.hide(),a?this.annotationEditorLayer.hide():null===(v=this.annotationEditorLayer)||void 0===v||v.destroy(),s&&this.xfaLayer.hide(),q||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(w=>{var E;null===(E=this.loadingIconDiv)||void 0===E||E.setAttribute("aria-label",w)}),U.append(this.loadingIconDiv)}update({scale:l=0,rotation:p=null,optionalContentConfigPromise:R=null}){if(this.scale=l||this.scale,"number"==typeof p&&(this.rotation=p),R instanceof Promise&&(this._optionalContentConfigPromise=R,R.then(G=>{R===this._optionalContentConfigPromise&&(P(this,_).initialOptionalContent=G.hasInitialVisibility)})),this.viewport=this.viewport.clone({scale:this.scale*C.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone&&b.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let H=!1;if(this.canvas&&this.maxCanvasPixels>0){const G=this.outputScale;(Math.floor(this.viewport.width)*G.sx|0)*(Math.floor(this.viewport.height)*G.sy|0)>this.maxCanvasPixels&&(H=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&H)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:l=!1,keepAnnotationEditorLayer:p=!1,keepXfaLayer:R=!1}={}){var L;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!l||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!p||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||R&&this.xfaLayer.div||(this.xfaLayer.cancel(),this.xfaLayer=null,null===(L=this.textHighlighter)||void 0===L||L.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:l,redrawAnnotationLayer:p=!1,redrawAnnotationEditorLayer:R=!1,redrawXfaLayer:L=!1}){const H=this.viewport.width,G=this.viewport.height,V=this.div;l.style.width=l.parentNode.style.width=V.style.width=Math.floor(H)+"px",l.style.height=l.parentNode.style.height=V.style.height=Math.floor(G)+"px";const U=this.viewport.rotation-this.paintedViewportMap.get(l).rotation,$=Math.abs(U);let q=1,B=1;if((90===$||270===$)&&(q=G/H,B=H/G),l.style.transform=`rotate(${U}deg) scale(${q}, ${B})`,this.textLayer){const a=this.textLayer.viewport,v=Math.abs(this.viewport.rotation-a.rotation);let w=H/a.width;(90===v||270===v)&&(w=H/a.height);const E=this.textLayer.textLayerDiv;let i,d;switch(v){case 0:i=d=0;break;case 90:i=0,d="-"+E.style.height;break;case 180:i="-"+E.style.width,d="-"+E.style.height;break;case 270:i="-"+E.style.width,d=0;break;default:console.error("Bad rotation value.")}E.style.transform=`rotate(${v}deg) scale(${w}) translate(${i}, ${d})`,E.style.transformOrigin="0% 0%"}p&&this.annotationLayer&&this._renderAnnotationLayer(),R&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),L&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(l,p){return this.viewport.convertToPdfPoint(l,p)}toggleLoadingIconSpinner(l=!1){var p;null===(p=this.loadingIconDiv)||void 0===p||p.classList.toggle("notVisible",!l)}draw(){var l,p,R,L=this;this.renderingState!==b.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:H,pdfPage:G}=this;if(!G)return this.renderingState=b.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=b.RenderingStates.RUNNING;const V=document.createElement("div");V.style.width=H.style.width,V.style.height=H.style.height,V.classList.add("canvasWrapper");const U=(null===(l=this.annotationLayer)||void 0===l?void 0:l.div)||(null===(p=this.annotationEditorLayer)||void 0===p?void 0:p.div);U?U.before(V):H.append(V);let $=null;if(this.textLayerMode!==b.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||(this._accessibilityManager=new t.TextAccessibilityManager);const v=document.createElement("div");v.className="textLayer",v.style.width=V.style.width,v.style.height=V.style.height,U?U.before(v):H.append(v),$=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:v,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===b.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=$,P(this,u)!==C.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:H,pdfPage:G,imageResourcesPath:this.imageResourcesPath,renderForms:P(this,u)===C.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}))),null!==(R=this.xfaLayer)&&void 0!==R&&R.div&&H.append(this.xfaLayer.div);let q=null;this.renderingQueue&&(q=v=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=b.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=b.RenderingStates.RUNNING,v()});v()});const B=function(){var v=N(function*(w=null){if(a===L.paintTask&&(L.paintTask=null),w instanceof C.RenderingCancelledException)L._renderError=null;else if(L._renderError=w,L.renderingState=b.RenderingStates.FINISHED,L.loadingIconDiv&&(L.loadingIconDiv.remove(),delete L.loadingIconDiv),L._resetZoomLayer(!0),P(L,_).regularAnnotations=!a.separateAnnots,L.eventBus.dispatch("pagerendered",{source:L,pageNumber:L.id,cssTransform:!1,timestamp:performance.now(),error:L._renderError}),w)throw w});return function(){return v.apply(this,arguments)}}(),a=this.renderer===b.RendererType.SVG?this.paintOnSvg(V):this.paintOnCanvas(V);a.onRenderContinue=q,this.paintTask=a;const s=a.promise.then(()=>B(null).then(()=>{if($){const v=G.streamTextContent({includeMarkedContent:!0});$.setTextContentStream(v),$.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||(this.annotationEditorLayer=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:H,pdfPage:G,l10n:this.l10n,accessibilityManager:this._accessibilityManager})),this._renderAnnotationEditorLayer())})}),function(v){return B(v)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:H,pdfPage:G})),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=v=>{v.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(w=>{if(!w||!this.canvas)return;const E=this.structTreeLayer.render(w);E.classList.add("structTree"),this.canvas.append(E)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:G})),H.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),s}paintOnCanvas(l){const p=(0,C.createPromiseCapability)(),R={promise:p.promise,onRenderContinue(w){w()},cancel(){v.cancel()},get separateAnnots(){return v.separateAnnots}},L=this.viewport,H=document.createElement("canvas");H.setAttribute("role","presentation"),H.hidden=!0;let G=!0;const V=function(){G&&(H.hidden=!1,G=!1)};l.append(H),this.canvas=H;const U=H.getContext("2d",{alpha:!1}),$=this.outputScale=new b.OutputScale;if(this.useOnlyCssZoom){const w=L.clone({scale:C.PixelsPerInch.PDF_TO_CSS_UNITS});$.sx*=w.width/L.width,$.sy*=w.height/L.height}if(this.maxCanvasPixels>0){const E=Math.sqrt(this.maxCanvasPixels/(L.width*L.height));$.sx>E||$.sy>E?($.sx=E,$.sy=E,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const q=(0,b.approximateFraction)($.sx),B=(0,b.approximateFraction)($.sy);H.width=(0,b.roundToDivide)(L.width*$.sx,q[0]),H.height=(0,b.roundToDivide)(L.height*$.sy,B[0]),H.style.width=(0,b.roundToDivide)(L.width,q[1])+"px",H.style.height=(0,b.roundToDivide)(L.height,B[1])+"px",this.paintedViewportMap.set(H,L);const s={canvasContext:U,transform:$.scaled?[$.sx,0,0,$.sy,0,0]:null,viewport:this.viewport,annotationMode:P(this,u),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},v=this.pdfPage.render(s);return v.onContinue=function(w){V(),R.onRenderContinue?R.onRenderContinue(w):w()},v.promise.then(function(){V(),p.resolve()},function(w){V(),p.reject(w)}),R}paintOnSvg(l){let p=!1;const R=()=>{if(p)throw new C.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},L=this.pdfPage,H=this.viewport.clone({scale:C.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:L.getOperatorList({annotationMode:P(this,u)}).then(V=>(R(),new C.SVGGraphics(L.commonObjs,L.objs).getSVG(V,H).then($=>{R(),this.svg=$,this.paintedViewportMap.set($,H),$.style.width=l.style.width,$.style.height=l.style.height,this.renderingState=b.RenderingStates.FINISHED,l.append($)}))),onRenderContinue(V){V()},cancel(){p=!0},get separateAnnots(){return!1}}}setPageLabel(l){this.pageLabel="string"==typeof l?l:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:l,regularAnnotations:p}=P(this,_);return l&&p?this.canvas:null}}},(F,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.compatibilityParams=o.OptionKind=o.AppOptions=void 0;const g=Object.create(null);o.compatibilityParams=g;{const t=navigator.userAgent||"",e=navigator.platform||"",u=navigator.maxTouchPoints||1,_=/Android/.test(t);(/\b(iPad|iPhone|iPod)(?=;)/.test(t)||"MacIntel"===e&&u>1||_)&&(g.maxCanvasPixels=5242880)}const C={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};o.OptionKind=C;const b={annotationEditorMode:{value:-1,kind:C.VIEWER+C.PREFERENCE},annotationMode:{value:2,kind:C.VIEWER+C.PREFERENCE},cursorToolOnLoad:{value:0,kind:C.VIEWER+C.PREFERENCE},defaultZoomValue:{value:"",kind:C.VIEWER+C.PREFERENCE},disableHistory:{value:!1,kind:C.VIEWER},disablePageLabels:{value:!1,kind:C.VIEWER+C.PREFERENCE},enablePermissions:{value:!1,kind:C.VIEWER+C.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:C.VIEWER+C.PREFERENCE},enableScripting:{value:!0,kind:C.VIEWER+C.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:C.VIEWER},externalLinkTarget:{value:0,kind:C.VIEWER+C.PREFERENCE},historyUpdateUrl:{value:!1,kind:C.VIEWER+C.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:C.VIEWER+C.PREFERENCE},imageResourcesPath:{value:"./images/",kind:C.VIEWER},maxCanvasPixels:{value:16777216,kind:C.VIEWER},forcePageColors:{value:!1,kind:C.VIEWER+C.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:C.VIEWER+C.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:C.VIEWER+C.PREFERENCE},pdfBugEnabled:{value:!1,kind:C.VIEWER+C.PREFERENCE},printResolution:{value:150,kind:C.VIEWER},sidebarViewOnLoad:{value:-1,kind:C.VIEWER+C.PREFERENCE},scrollModeOnLoad:{value:-1,kind:C.VIEWER+C.PREFERENCE},spreadModeOnLoad:{value:-1,kind:C.VIEWER+C.PREFERENCE},textLayerMode:{value:1,kind:C.VIEWER+C.PREFERENCE},useOnlyCssZoom:{value:!1,kind:C.VIEWER+C.PREFERENCE},viewerCssTheme:{value:0,kind:C.VIEWER+C.PREFERENCE},viewOnLoad:{value:0,kind:C.VIEWER+C.PREFERENCE},cMapPacked:{value:!0,kind:C.API},cMapUrl:{value:"../web/cmaps/",kind:C.API},disableAutoFetch:{value:!1,kind:C.API+C.PREFERENCE},disableFontFace:{value:!1,kind:C.API+C.PREFERENCE},disableRange:{value:!1,kind:C.API+C.PREFERENCE},disableStream:{value:!1,kind:C.API+C.PREFERENCE},docBaseUrl:{value:"",kind:C.API},enableXfa:{value:!0,kind:C.API+C.PREFERENCE},fontExtraProperties:{value:!1,kind:C.API},isEvalSupported:{value:!0,kind:C.API},maxImageSize:{value:-1,kind:C.API},pdfBug:{value:!1,kind:C.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:C.API},verbosity:{value:1,kind:C.API},workerPort:{value:null,kind:C.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:C.WORKER}};b.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:C.VIEWER},b.disablePreferences={value:!1,kind:C.VIEWER},b.locale={value:navigator.language||"en-US",kind:C.VIEWER},b.renderer={value:"canvas",kind:C.VIEWER+C.PREFERENCE},b.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:C.VIEWER};const y=Object.create(null);o.AppOptions=class f{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const u=y[e];if(void 0!==u)return u;const _=b[e];var m;return void 0!==_?null!==(m=g[e])&&void 0!==m?m:_.value:void 0}static getAll(e=null){const u=Object.create(null);for(const m in b){var _;const A=b[m];if(e){if(!(e&A.kind))continue;if(e===C.PREFERENCE){const p=A.value,R=typeof p;if("boolean"===R||"string"===R||"number"===R&&Number.isInteger(p)){u[m]=p;continue}throw new Error(`Invalid type for preference: ${m}`)}}const l=y[m];u[m]=void 0!==l?l:null!==(_=g[m])&&void 0!==_?_:A.value}return u}static set(e,u){y[e]=u}static setAll(e){for(const u in e)y[u]=e[u]}static remove(e){delete y[e]}static _hasUserOptions(){return Object.keys(y).length>0}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextAccessibilityManager=void 0;var C=g(7),b=new WeakMap,y=new WeakMap,f=new WeakMap,t=new WeakMap,e=new WeakSet;class u{constructor(){n(this,e),K(this,b,{writable:!0,value:!1}),K(this,y,{writable:!0,value:null}),K(this,f,{writable:!0,value:new Map}),K(this,t,{writable:!0,value:new Map})}setTextMapping(l){M(this,y,l)}enable(){if(P(this,b))throw new Error("TextAccessibilityManager is already enabled.");if(!P(this,y))throw new Error("Text divs and strings have not been set.");if(M(this,b,!0),M(this,y,P(this,y).slice()),P(this,y).sort(h(u,u,_)),P(this,f).size>0){const l=P(this,y);for(const[p,R]of P(this,f))document.getElementById(p)?T(this,e,m).call(this,p,l[R]):P(this,f).delete(p)}for(const[l,p]of P(this,t))this.addPointerInTextLayer(l,p);P(this,t).clear()}disable(){P(this,b)&&(P(this,t).clear(),M(this,y,null),M(this,b,!1))}removePointerInTextLayer(l){var p;if(!P(this,b))return void P(this,t).delete(l);const R=P(this,y);if(!R||0===R.length)return;const{id:L}=l,H=P(this,f).get(L);if(void 0===H)return;const G=R[H];P(this,f).delete(L);let V=G.getAttribute("aria-owns");null!==(p=V)&&void 0!==p&&p.includes(L)&&(V=V.split(" ").filter(U=>U!==L).join(" "),V?G.setAttribute("aria-owns",V):(G.removeAttribute("aria-owns"),G.setAttribute("role","presentation")))}addPointerInTextLayer(l,p){const{id:R}=l;if(!R)return;if(!P(this,b))return void P(this,t).set(l,p);p&&this.removePointerInTextLayer(l);const L=P(this,y);if(!L||0===L.length)return;const H=(0,C.binarySearchFirstItem)(L,V=>h(u,u,_).call(u,l,V)<0),G=Math.max(0,H-1);T(this,e,m).call(this,R,L[G]),P(this,f).set(R,G)}moveElementInDOM(l,p,R,L){if(this.addPointerInTextLayer(R,L),!l.hasChildNodes())return void l.append(p);const H=Array.from(l.childNodes).filter(U=>U!==p);if(0===H.length)return;const G=R||p,V=(0,C.binarySearchFirstItem)(H,U=>h(u,u,_).call(u,G,U)<0);0===V?H[0].before(p):H[V-1].after(p)}}function _(A,l){const p=A.getBoundingClientRect(),R=l.getBoundingClientRect();if(0===p.width&&0===p.height)return 1;if(0===R.width&&0===R.height)return-1;const G=p.y+p.height/2,$=R.y+R.height/2;return G<=R.y&&$>=p.y+p.height?-1:$<=p.y&&G>=R.y+R.height?1:p.x+p.width/2-(R.x+R.width/2)}function m(A,l){const p=l.getAttribute("aria-owns");null!=p&&p.includes(A)||l.setAttribute("aria-owns",p?`${p} ${A}`:A),l.removeAttribute("role")}o.TextAccessibilityManager=u},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFRenderingQueue=void 0;var C=g(3),b=g(7);o.PDFRenderingQueue=class f{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){var u;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&null!==(u=this.pdfThumbnailViewer)&&void 0!==u&&u.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,u,_,m=!1){const A=e.views,l=A.length;if(0===l)return null;for(let G=0;G<l;G++){const V=A[G].view;if(!this.isViewFinished(V))return V}const p=e.first.id,R=e.last.id;if(R-p+1>l){const G=e.ids;for(let V=1,U=R-p;V<U;V++){const $=_?p+V:R-V;if(G.has($))continue;const q=u[$-1];if(!this.isViewFinished(q))return q}}let L=_?R:p-2,H=u[L];return H&&!this.isViewFinished(H)||m&&(L+=_?1:-1,H=u[L],H&&!this.isViewFinished(H))?H:null}isViewFinished(e){return e.renderingState===b.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case b.RenderingStates.FINISHED:return!1;case b.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case b.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case b.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(u=>{u instanceof C.RenderingCancelledException||console.error(`renderView: "${u}"`)})}return!0}}},(F,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextHighlighter=void 0,o.TextHighlighter=class g{constructor({findController:b,eventBus:y,pageIndex:f}){this.findController=b,this.matches=[],this.eventBus=y,this.pageIdx=f,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(b,y){this.textDivs=b,this.textContentItemsStr=y}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=b=>{(b.pageIndex===this.pageIdx||-1===b.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(b,y){if(!b)return[];const{textContentItemsStr:f}=this;let t=0,e=0;const u=f.length-1,_=[];for(let m=0,A=b.length;m<A;m++){let l=b[m];for(;t!==u&&l>=e+f[t].length;)e+=f[t].length,t++;t===f.length&&console.error("Could not find a matching mapping");const p={begin:{divIdx:t,offset:l-e}};for(l+=y[m];t!==u&&l>e+f[t].length;)e+=f[t].length,t++;p.end={divIdx:t,offset:l-e},_.push(p)}return _}_renderMatches(b){if(0===b.length)return;const{findController:y,pageIdx:f}=this,{textContentItemsStr:t,textDivs:e}=this,u=f===y.selected.pageIdx,_=y.selected.matchIdx;let A=null;function p(G,V){const U=G.divIdx;return e[U].textContent="",R(U,0,G.offset,V)}function R(G,V,U,$){let q=e[G];if(q.nodeType===Node.TEXT_NODE){const s=document.createElement("span");q.before(s),s.append(q),e[G]=s,q=s}const B=t[G].substring(V,U),a=document.createTextNode(B);if($){const s=document.createElement("span");return s.className=`${$} appended`,s.append(a),q.append(s),$.includes("selected")?s.offsetLeft:0}return q.append(a),0}let L=_,H=L+1;if(y.state.highlightAll)L=0,H=b.length;else if(!u)return;for(let G=L;G<H;G++){const V=b[G],U=V.begin,$=V.end,q=u&&G===_,B=q?" selected":"";let a=0;if(A&&U.divIdx===A.divIdx?R(A.divIdx,A.offset,U.offset):(null!==A&&R(A.divIdx,A.offset,void 0),p(U)),U.divIdx===$.divIdx)a=R(U.divIdx,U.offset,$.offset,"highlight"+B);else{a=R(U.divIdx,U.offset,void 0,"highlight begin"+B);for(let s=U.divIdx+1,v=$.divIdx;s<v;s++)e[s].className="highlight middle"+B;p($,"highlight end"+B)}A=$,q&&y.scrollMatchIntoView({element:e[U.divIdx],selectedLeft:a,pageIndex:f,matchIndex:_})}A&&R(A.divIdx,A.offset,void 0)}_updateMatches(){if(!this.enabled)return;const{findController:b,matches:y,pageIdx:f}=this,{textContentItemsStr:t,textDivs:e}=this;let u=-1;for(let A=0,l=y.length;A<l;A++){const p=y[A];for(let L=Math.max(u,p.begin.divIdx),H=p.end.divIdx;L<=H;L++){const G=e[L];G.textContent=t[L],G.className=""}u=p.end.divIdx+1}null!=b&&b.highlightMatches&&(this.matches=this._convertMatches(b.pageMatches[f]||null,b.pageMatchesLength[f]||null),this._renderMatches(this.matches))}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DownloadManager=void 0;var C=g(3);function b(f,t){const e=document.createElement("a");if(!e.click)throw new Error('DownloadManager: "a.click()" is not supported.');e.href=f,e.target="_parent","download"in e&&(e.download=t),(document.body||document.documentElement).append(e),e.click(),e.remove()}o.DownloadManager=class y{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(t,e){(0,C.createValidAbsoluteUrl)(t,"http://example.com")?b(t+"#pdfjs.action=download",e):console.error(`downloadUrl - not a valid URL: ${t}`)}downloadData(t,e,u){b(URL.createObjectURL(new Blob([t],{type:u})),e)}openOrDownloadData(t,e,u){const _=(0,C.isPdfFile)(u),m=_?"application/pdf":"";if(_){let l,A=this._openBlobUrls.get(t);A||(A=URL.createObjectURL(new Blob([e],{type:m})),this._openBlobUrls.set(t,A)),l="?file="+encodeURIComponent(A+"#"+u);try{return window.open(l),!0}catch(p){console.error(`openOrDownloadData: ${p}`),URL.revokeObjectURL(A),this._openBlobUrls.delete(t)}}return this.downloadData(e,u,m),!1}download(t,e,u){b(URL.createObjectURL(t),u)}}},(F,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WaitOnType=o.EventBus=o.AutomationEventBus=void 0,o.waitOnEventOrTimeout=function C({target:f,name:t,delay:e=0}){return new Promise(function(u,_){if("object"!=typeof f||!t||"string"!=typeof t||!(Number.isInteger(e)&&e>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function m(R){f instanceof b?f._off(t,A):f.removeEventListener(t,A),p&&clearTimeout(p),u(R)}const A=m.bind(null,g.EVENT);f instanceof b?f._on(t,A):f.addEventListener(t,A);const l=m.bind(null,g.TIMEOUT),p=setTimeout(l,e)})};const g={EVENT:"event",TIMEOUT:"timeout"};o.WaitOnType=g;class b{constructor(){this._listeners=Object.create(null)}on(t,e,u=null){this._on(t,e,{external:!0,once:null==u?void 0:u.once})}off(t,e,u=null){this._off(t,e,{external:!0,once:null==u?void 0:u.once})}dispatch(t,e){const u=this._listeners[t];if(!u||0===u.length)return;let _;for(const{listener:m,external:A,once:l}of u.slice(0))l&&this._off(t,m),A?(_||(_=[])).push(m):m(e);if(_){for(const m of _)m(e);_=null}}_on(t,e,u=null){var _;((_=this._listeners)[t]||(_[t]=[])).push({listener:e,external:!0===(null==u?void 0:u.external),once:!0===(null==u?void 0:u.once)})}_off(t,e,u=null){const _=this._listeners[t];if(_)for(let m=0,A=_.length;m<A;m++)if(_[m].listener===e)return void _.splice(m,1)}}o.EventBus=b,o.AutomationEventBus=class y extends b{dispatch(t,e){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GenericL10n=void 0,g(21);var C=g(4);const b=document.webL10n;o.GenericL10n=class y{constructor(t){this._lang=t,this._ready=new Promise((e,u)=>{b.setLanguage((0,C.fixupLangCode)(t),()=>{e(b)})})}getLanguage(){var t=this;return N(function*(){return(yield t._ready).getLanguage()})()}getDirection(){var t=this;return N(function*(){return(yield t._ready).getDirection()})()}get(t,e=null,u=(0,C.getL10nFallback)(t,e)){var _=this;return N(function*(){return(yield _._ready).get(t,e,u)})()}translate(t){var e=this;return N(function*(){return(yield e._ready).translate(t)})()}}},()=>{document.webL10n=function(F,o,g){var C={},b="",y="textContent",f="",t={},e="loading",u=!0;function p(s,v,w){v=v||function(d){},w=w||function(){};var E=new XMLHttpRequest;E.open("GET",s,u),E.overrideMimeType&&E.overrideMimeType("text/plain; charset=utf-8"),E.onreadystatechange=function(){4==E.readyState&&(200==E.status||0===E.status?v(E.responseText):w())},E.onerror=w,E.ontimeout=w;try{E.send(null)}catch{w()}}function L(s,v){s&&(s=s.toLowerCase()),v=v||function(){},function H(){C={},b="",f=""}(),f=s;var w=function _(){return o.querySelectorAll('link[type="application/l10n"]')}(),E=w.length;if(0!==E){var S,k=0;S=function(){++k>=E&&(v(),e="complete")};for(var Z=0;Z<E;Z++)new z(w[Z]).load(s,S)}else{var i=function m(){var s=o.querySelector('script[type="application/l10n"]');return s?JSON.parse(s.innerHTML):null}();if(i&&i.locales&&i.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(C=i.locales[s])){var d=i.default_locale.toLowerCase();for(var c in i.locales){if((c=c.toLowerCase())===s){C=i.locales[s];break}c===d&&(C=i.locales[d])}}v()}else console.log("no resource to load, early way out");e="complete"}function z(ie){var pe=ie.href;this.load=function(le,ue){!function R(s,v,w,E){var i=s.replace(/[^\/]*$/,"")||"./";function d(S){return S.lastIndexOf("\\")<0?S:S.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}p(s,function(S){b+=S,function c(S,k){var z={},Z=/^\s*|\s*$/,re=/^\s*#|^\s*$/,ie=/^\s*\[(.*)\]\s*$/,pe=/^\s*@import\s+url\((.*)\)\s*$/i,le=/^([^=\s]*)\s*=\s*(.+)$/;function ue(_e,me,ne){var oe=_e.replace(Z,"").split(/[\r\n]+/),Fe="*",Le=v.split("-",1)[0],Me=!1,fe="";!function Ce(){for(;;){if(!oe.length)return void ne();var xe=oe.shift();if(!re.test(xe)){if(me){if(fe=ie.exec(xe)){Fe=fe[1].toLowerCase(),Me="*"!==Fe&&Fe!==v&&Fe!==Le;continue}if(Me)continue;if(fe=pe.exec(xe))return void de(i+fe[1],Ce)}var Pe=xe.match(le);Pe&&3==Pe.length&&(z[Pe[1]]=d(Pe[2]))}}}()}function de(_e,me){p(_e,function(ne){ue(ne,!1,me)},function(){console.warn(_e+" not found."),me()})}ue(S,!0,function(){k(z)})}(S,function(k){for(var z in k){var Z,re,ie=z.lastIndexOf(".");ie>0?(Z=z.substring(0,ie),re=z.substring(ie+1)):(Z=z,re=y),C[Z]||(C[Z]={}),C[Z][re]=k[z]}w&&w()})},E)}(pe,le,ue,function(){console.warn(pe+" not found."),console.warn('"'+le+'" resource not found'),f="",ue()})}}}function V(s,v,w){var E=C[s];if(!E){if(console.warn("#"+s+" is undefined."),!w)return null;E=w}var i={};for(var d in E){var c=E[d];c=$(c=U(c,v,s,d),v,s),i[d]=c}return i}function U(s,v,w,E){var d=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(s);if(!d||!d.length)return s;var k,c=d[1],S=d[2];return v&&S in v?k=v[S]:S in C&&(k=C[S]),c in t&&(s=(0,t[c])(s,k,w,E)),s}function $(s,v,w){return s.replace(/\{\{\s*(.+?)\s*\}\}/g,function(i,d){return v&&d in v?v[d]:d in C?C[d]:(console.log("argument {{"+d+"}} for #"+w+" is undefined."),i)})}function q(s){var v=function l(s){if(!s)return{};var v=s.getAttribute("data-l10n-id"),w=s.getAttribute("data-l10n-args"),E={};if(w)try{E=JSON.parse(w)}catch{console.warn("could not parse arguments for #"+v)}return{id:v,args:E}}(s);if(v.id){var w=V(v.id,v.args);if(!w)return void console.warn("#"+v.id+" is undefined.");if(w[y]){if(0===function B(s){if(s.children)return s.children.length;if(typeof s.childElementCount<"u")return s.childElementCount;for(var v=0,w=0;w<s.childNodes.length;w++)v+=1===s.nodeType?1:0;return v}(s))s[y]=w[y];else{for(var E=s.childNodes,i=!1,d=0,c=E.length;d<c;d++)3===E[d].nodeType&&/\S/.test(E[d].nodeValue)&&(i?E[d].nodeValue="":(E[d].nodeValue=w[y],i=!0));if(!i){var S=o.createTextNode(w[y]);s.prepend(S)}}delete w[y]}for(var k in w)s[k]=w[k]}}return t.plural=function(s,v,w,E){var i=parseFloat(v);if(isNaN(i)||E!=y)return s;t._pluralRules||(t._pluralRules=function G(s){function w(c,S){return-1!==S.indexOf(c)}function E(c,S,k){return S<=c&&c<=k}var i={0:function(c){return"other"},1:function(c){return E(c%100,3,10)?"few":0===c?"zero":E(c%100,11,99)?"many":2==c?"two":1==c?"one":"other"},2:function(c){return 0!==c&&c%10==0?"many":2==c?"two":1==c?"one":"other"},3:function(c){return 1==c?"one":"other"},4:function(c){return E(c,0,1)?"one":"other"},5:function(c){return E(c,0,2)&&2!=c?"one":"other"},6:function(c){return 0===c?"zero":c%10==1&&c%100!=11?"one":"other"},7:function(c){return 2==c?"two":1==c?"one":"other"},8:function(c){return E(c,3,6)?"few":E(c,7,10)?"many":2==c?"two":1==c?"one":"other"},9:function(c){return 0===c||1!=c&&E(c%100,1,19)?"few":1==c?"one":"other"},10:function(c){return E(c%10,2,9)&&!E(c%100,11,19)?"few":c%10!=1||E(c%100,11,19)?"other":"one"},11:function(c){return E(c%10,2,4)&&!E(c%100,12,14)?"few":c%10==0||E(c%10,5,9)||E(c%100,11,14)?"many":c%10==1&&c%100!=11?"one":"other"},12:function(c){return E(c,2,4)?"few":1==c?"one":"other"},13:function(c){return E(c%10,2,4)&&!E(c%100,12,14)?"few":1!=c&&E(c%10,0,1)||E(c%10,5,9)||E(c%100,12,14)?"many":1==c?"one":"other"},14:function(c){return E(c%100,3,4)?"few":c%100==2?"two":c%100==1?"one":"other"},15:function(c){return 0===c||E(c%100,2,10)?"few":E(c%100,11,19)?"many":1==c?"one":"other"},16:function(c){return c%10==1&&11!=c?"one":"other"},17:function(c){return 3==c?"few":0===c?"zero":6==c?"many":2==c?"two":1==c?"one":"other"},18:function(c){return 0===c?"zero":E(c,0,2)&&0!==c&&2!=c?"one":"other"},19:function(c){return E(c,2,10)?"few":E(c,0,1)?"one":"other"},20:function(c){return!E(c%10,3,4)&&c%10!=9||E(c%100,10,19)||E(c%100,70,79)||E(c%100,90,99)?c%1e6==0&&0!==c?"many":c%10!=2||w(c%100,[12,72,92])?c%10!=1||w(c%100,[11,71,91])?"other":"one":"two":"few"},21:function(c){return 0===c?"zero":1==c?"one":"other"},22:function(c){return E(c,0,1)||E(c,11,99)?"one":"other"},23:function(c){return E(c%10,1,2)||c%20==0?"one":"other"},24:function(c){return E(c,3,10)||E(c,13,19)?"few":w(c,[2,12])?"two":w(c,[1,11])?"one":"other"}},d={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[s.replace(/-.*$/,"")];return d in i?i[d]:(console.warn("plural form unknown for ["+s+"]"),function(){return"other"})}(f));var d="["+t._pluralRules(i)+"]";return 0===i&&w+"[zero]"in C?s=C[w+"[zero]"][E]:1==i&&w+"[one]"in C?s=C[w+"[one]"][E]:2==i&&w+"[two]"in C?s=C[w+"[two]"][E]:w+d in C?s=C[w+d][E]:w+"[other]"in C&&(s=C[w+"[other]"][E]),s},{get:function(s,v,w){var d,E=s.lastIndexOf("."),i=y;E>0&&(i=s.substring(E+1),s=s.substring(0,E)),w&&((d={})[i]=w);var c=V(s,v,d);return c&&i in c?c[i]:"{{"+s+"}}"},getData:function(){return C},getText:function(){return b},getLanguage:function(){return f},setLanguage:function(s,v){L(s,function(){v&&v()})},getDirection:function(){var v=f.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(v)>=0?"rtl":"ltr"},translate:function a(s){for(var v=function A(s){return s?s.querySelectorAll("*[data-l10n-id]"):[]}(s=s||o.documentElement),w=v.length,E=0;E<w;E++)q(v[E]);q(s)},getReadyState:function(){return e},ready:function(s){s&&("complete"==e||"interactive"==e?F.setTimeout(function(){s()}):o.addEventListener&&o.addEventListener("localized",function v(){o.removeEventListener("localized",v),s()}))}}}(window,document)},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFindController=o.FindState=void 0;var C=g(7),b=g(3),y=g(23);const f={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};o.FindState=f;const _={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},m=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),A=[...m.values()].map(he=>String.fromCharCode(he)).join(""),l=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]+/gu,p=/([.*+?^${}()|[\]\\])|([!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65\u{10100}-\u{10102}\u{1039F}\u{103D0}\u{1056F}\u{10857}\u{1091F}\u{1093F}\u{10A50}-\u{10A58}\u{10A7F}\u{10AF0}-\u{10AF6}\u{10B39}-\u{10B3F}\u{10B99}-\u{10B9C}\u{10EAD}\u{10F55}-\u{10F59}\u{10F86}-\u{10F89}\u{11047}-\u{1104D}\u{110BB}\u{110BC}\u{110BE}-\u{110C1}\u{11140}-\u{11143}\u{11174}\u{11175}\u{111C5}-\u{111C8}\u{111CD}\u{111DB}\u{111DD}-\u{111DF}\u{11238}-\u{1123D}\u{112A9}\u{1144B}-\u{1144F}\u{1145A}\u{1145B}\u{1145D}\u{114C6}\u{115C1}-\u{115D7}\u{11641}-\u{11643}\u{11660}-\u{1166C}\u{116B9}\u{1173C}-\u{1173E}\u{1183B}\u{11944}-\u{11946}\u{119E2}\u{11A3F}-\u{11A46}\u{11A9A}-\u{11A9C}\u{11A9E}-\u{11AA2}\u{11B00}-\u{11B09}\u{11C41}-\u{11C45}\u{11C70}\u{11C71}\u{11EF7}\u{11EF8}\u{11F43}-\u{11F4F}\u{11FFF}\u{12470}-\u{12474}\u{12FF1}\u{12FF2}\u{16A6E}\u{16A6F}\u{16AF5}\u{16B37}-\u{16B3B}\u{16B44}\u{16E97}-\u{16E9A}\u{16FE2}\u{1BC9F}\u{1DA87}-\u{1DA8B}\u{1E95E}\u{1E95F}])|(\s+)|([\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}])|([A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{1031F}\u{1032D}-\u{10340}\u{10342}-\u{10349}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{10400}-\u{1049D}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10570}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10860}-\u{10876}\u{10880}-\u{1089E}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{10900}-\u{10915}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BE}\u{109BF}\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A60}-\u{10A7C}\u{10A80}-\u{10A9C}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B60}-\u{10B72}\u{10B80}-\u{10B91}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10D00}-\u{10D23}\u{10E80}-\u{10EA9}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F1C}\u{10F27}\u{10F30}-\u{10F45}\u{10F70}-\u{10F81}\u{10FB0}-\u{10FC4}\u{10FE0}-\u{10FF6}\u{11003}-\u{11037}\u{11071}\u{11072}\u{11075}\u{11083}-\u{110AF}\u{110D0}-\u{110E8}\u{11103}-\u{11126}\u{11144}\u{11147}\u{11150}-\u{11172}\u{11176}\u{11183}-\u{111B2}\u{111C1}-\u{111C4}\u{111DA}\u{111DC}\u{11200}-\u{11211}\u{11213}-\u{1122B}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112DE}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}\u{11350}\u{1135D}-\u{11361}\u{11400}-\u{11434}\u{11447}-\u{1144A}\u{1145F}-\u{11461}\u{11480}-\u{114AF}\u{114C4}\u{114C5}\u{114C7}\u{11580}-\u{115AE}\u{115D8}-\u{115DB}\u{11600}-\u{1162F}\u{11644}\u{11680}-\u{116AA}\u{116B8}\u{11700}-\u{1171A}\u{11740}-\u{11746}\u{11800}-\u{1182B}\u{118A0}-\u{118DF}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{1192F}\u{1193F}\u{11941}\u{119A0}-\u{119A7}\u{119AA}-\u{119D0}\u{119E1}\u{119E3}\u{11A00}\u{11A0B}-\u{11A32}\u{11A3A}\u{11A50}\u{11A5C}-\u{11A89}\u{11A9D}\u{11AB0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2E}\u{11C40}\u{11C72}-\u{11C8F}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D89}\u{11D98}\u{11EE0}-\u{11EF2}\u{11F02}\u{11F04}-\u{11F10}\u{11F12}-\u{11F33}\u{11FB0}\u{12000}-\u{12399}\u{12480}-\u{12543}\u{12F90}-\u{12FF0}\u{13000}-\u{1342F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A70}-\u{16ABE}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E7F}\u{16F00}-\u{16F4A}\u{16F50}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E14E}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E4D0}-\u{1E4EB}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E800}-\u{1E8C4}\u{1E900}-\u{1E943}\u{1E94B}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}])/gu,R=/([^\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}])[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,L=/^[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*([^\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}])/u,H=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,G=new Map,V="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]";let U=null,$=null;function q(he){const ce=[];let ve,Ee;for(;null!==(ve=H.exec(he));){let{index:Ge}=ve;for(const Oe of ve[0]){let Ie=G.get(Oe);Ie||(Ie=Oe.normalize("NFD").length,G.set(Oe,Ie)),ce.push([Ie,Ge++])}}if(0===ce.length&&U)Ee=U;else if(ce.length>0&&$)Ee=$;else{const Oe=`([${Object.keys(_).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;Ee=0===ce.length?U=new RegExp(Oe+"|(\\u0000)","gum"):$=new RegExp(Oe+`|(${V})`,"gum")}const Se=[];for(;null!==(ve=l.exec(he));)Se.push([ve[0].length,ve.index]);let we=he.normalize("NFD");const ke=[[0,0]];let Te=0,Re=0,De=0,Be=0,Ne=0,We=!1;return we=we.replace(Ee,(Ge,Oe,Ie,ze,$e,Ke,Ue)=>{var qe;if(Ue-=Be,Oe){const je=_[Ge],Ve=je.length;for(let He=1;He<Ve;He++)ke.push([Ue-De+He,De-He]);return De-=Ve-1,je}if(Ie){var Ye;const je=Ie.endsWith("\n"),Ve=je?Ie.length-2:Ie.length;We=!0;let He=Ve;Ue+Ne===(null===(Ye=Se[Te])||void 0===Ye?void 0:Ye[1])&&(He-=Se[Te][0],++Te);for(let Xe=1;Xe<=He;Xe++)ke.push([Ue-1-De+Xe,De-Xe]);return De-=He,Be+=He,je?(ke.push([(Ue+=Ve-1)-De+1,1+De]),De+=1,Be+=1,Ne+=1,Ie.slice(0,Ve)):Ie}if(ze)return ke.push([Ue-De+1,1+De]),De+=1,Be+=1,Ne+=1,ze.charAt(0);if($e)return ke.push([Ue-De+1,De-1]),De-=1,Be+=1,Ne+=1," ";if(Ue+Ne===(null===(qe=ce[Re])||void 0===qe?void 0:qe[1])){const je=ce[Re][0]-1;++Re;for(let Ve=1;Ve<=je;Ve++)ke.push([Ue-(De-Ve),De-Ve]);De-=je,Be+=je}return Ke}),ke.push([we.length,De]),[we,ke,We]}function B(he,ce,ve){if(!he)return[ce,ve];const Ee=ce,Se=ce+ve;let we=(0,C.binarySearchFirstItem)(he,Te=>Te[0]>=Ee);he[we][0]>Ee&&--we;let ke=(0,C.binarySearchFirstItem)(he,Te=>Te[0]>=Se,we);return he[ke][0]>Se&&--ke,[Ee+he[we][1],ve+he[ke][1]-he[we][1]]}var a=new WeakSet,s=new WeakSet,v=new WeakMap,w=new WeakSet,E=new WeakSet,i=new WeakSet,d=new WeakSet,c=new WeakSet,S=new WeakSet,k=new WeakSet,z=new WeakSet,Z=new WeakSet,re=new WeakSet,ie=new WeakSet,pe=new WeakSet,le=new WeakSet,ue=new WeakSet,de=new WeakSet,_e=new WeakSet,me=new WeakSet;function oe(he){if(!he)return;const ce=this._pdfDocument,{type:ve}=he;(null===this._state||T(this,w,Me).call(this,he))&&(this._dirtyMatch=!0),this._state=he,"highlightallchange"!==ve&&T(this,me,be).call(this,f.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ce&&this._pdfDocument!==ce)return;T(this,S,ye).call(this);const Ee=!this._highlightMatches,Se=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),ve?this._dirtyMatch?T(this,Z,se).call(this):"again"===ve?(T(this,Z,se).call(this),Ee&&this._state.highlightAll&&T(this,z,te).call(this)):"highlightallchange"===ve?(Se?T(this,Z,se).call(this):this._highlightMatches=!0,T(this,z,te).call(this)):T(this,Z,se).call(this):this._findTimeout=setTimeout(()=>{T(this,Z,se).call(this),this._findTimeout=null},250)})}function Fe(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,b.createPromiseCapability)()}function Le(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=q(this._state.query)),this._normalizedQuery}function Me(he){if(he.query!==this._state.query)return!0;switch(he.type){case"again":const ce=this._selected.pageIdx+1,ve=this._linkService;return ce>=1&&ce<=ve.pagesCount&&ce!==ve.page&&!ve.isPageVisible(ce);case"highlightallchange":return!1}return!0}function fe(he,ce,ve){let Ee=he.slice(0,ce).match(R);if(Ee){const Se=he.charCodeAt(ce),we=Ee[1].charCodeAt(0);if((0,y.getCharacterType)(Se)===(0,y.getCharacterType)(we))return!1}if(Ee=he.slice(ce+ve).match(L),Ee){const Se=he.charCodeAt(ce+ve-1),we=Ee[1].charCodeAt(0);if((0,y.getCharacterType)(Se)===(0,y.getCharacterType)(we))return!1}return!0}function Ce(he,ce,ve,Ee){const Se=[],we=[],ke=this._pageDiffs[ve];let Te;for(;null!==(Te=he.exec(Ee));){if(ce&&!T(this,E,fe).call(this,Ee,Te.index,Te[0].length))continue;const[Re,De]=B(ke,Te.index,Te[0].length);De&&(Se.push(Re),we.push(De))}this._pageMatches[ve]=Se,this._pageMatchesLength[ve]=we}function xe(he,ce){const{matchDiacritics:ve}=this._state;let Ee=!1;return(he=he.replace(p,(we,ke,Te,Re,De,Be)=>ke?`[ ]*\\${ke}[ ]*`:Te?`[ ]*${Te}[ ]*`:Re?"[ ]+":ve?De||Be:De?m.has(De.charCodeAt(0))?De:"":ce?(Ee=!0,`${Be}\\p{M}*`):Be)).endsWith("[ ]*")&&(he=he.slice(0,he.length-4)),ve&&ce&&(Ee=!0,he=`${he}(?=[${A}]|[^\\p{M}]|$)`),[Ee,he]}function Pe(he){let ce=P(this,v);if(0===ce.length)return;const{caseSensitive:ve,entireWord:Ee,phraseSearch:Se}=this._state,we=this._pageContents[he],ke=this._hasDiacritics[he];let Te=!1;if(Se)[Te,ce]=T(this,d,xe).call(this,ce,ke);else{const Be=ce.match(/\S+/g);Be&&(ce=Be.sort().reverse().map(Ne=>{const[We,Ge]=T(this,d,xe).call(this,Ne,ke);return Te||(Te=We),`(${Ge})`}).join("|"))}ce=new RegExp(ce,`g${Te?"u":""}${ve?"":"i"}`),T(this,i,Ce).call(this,ce,Ee,he,we),this._state.highlightAll&&T(this,k,W).call(this,he),this._resumePageIdx===he&&(this._resumePageIdx=null,T(this,ie,ae).call(this));const De=this._pageMatches[he].length;De>0&&(this._matchesCountTotal+=De,T(this,_e,Ae).call(this))}function ye(){if(this._extractTextPromises.length>0)return;let he=Promise.resolve();for(let ce=0,ve=this._linkService.pagesCount;ce<ve;ce++){const Ee=(0,b.createPromiseCapability)();this._extractTextPromises[ce]=Ee.promise,he=he.then(()=>this._pdfDocument.getPage(ce+1).then(Se=>Se.getTextContent()).then(Se=>{const we=[];for(const ke of Se.items)we.push(ke.str),ke.hasEOL&&we.push("\n");[this._pageContents[ce],this._pageDiffs[ce],this._hasDiacritics[ce]]=q(we.join("")),Ee.resolve()},Se=>{console.error(`Unable to get text content for page ${ce+1}`,Se),this._pageContents[ce]="",this._pageDiffs[ce]=null,this._hasDiacritics[ce]=!1,Ee.resolve()}))}}function W(he){this._scrollMatches&&this._selected.pageIdx===he&&(this._linkService.page=he+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:he})}function te(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function se(){const he=this._state.findPrevious,ce=this._linkService.page-1,ve=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ce,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,T(this,z,te).call(this);for(let Se=0;Se<ve;Se++)this._pendingFindMatches.has(Se)||(this._pendingFindMatches.add(Se),this._extractTextPromises[Se].then(()=>{this._pendingFindMatches.delete(Se),T(this,c,Pe).call(this,Se)}))}if(""===P(this,v))return void T(this,me,be).call(this,f.FOUND);if(this._resumePageIdx)return;const Ee=this._offset;if(this._pagesToSearch=ve,null!==Ee.matchIdx){if(!he&&Ee.matchIdx+1<this._pageMatches[Ee.pageIdx].length||he&&Ee.matchIdx>0)return Ee.matchIdx=he?Ee.matchIdx-1:Ee.matchIdx+1,void T(this,le,ee).call(this,!0);T(this,pe,ge).call(this,he)}T(this,ie,ae).call(this)}function J(he){const ce=this._offset,ve=he.length,Ee=this._state.findPrevious;return ve?(ce.matchIdx=Ee?ve-1:0,T(this,le,ee).call(this,!0),!0):(T(this,pe,ge).call(this,Ee),!!(ce.wrapped&&(ce.matchIdx=null,this._pagesToSearch<0))&&(T(this,le,ee).call(this,!1),!0))}function ae(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let he=null;do{const ce=this._offset.pageIdx;if(he=this._pageMatches[ce],!he){this._resumePageIdx=ce;break}}while(!T(this,re,J).call(this,he))}function ge(he){const ce=this._offset,ve=this._linkService.pagesCount;ce.pageIdx=he?ce.pageIdx-1:ce.pageIdx+1,ce.matchIdx=null,this._pagesToSearch--,(ce.pageIdx>=ve||ce.pageIdx<0)&&(ce.pageIdx=he?ve-1:0,ce.wrapped=!0)}function ee(he=!1){let ce=f.NOT_FOUND;const ve=this._offset.wrapped;if(this._offset.wrapped=!1,he){const Ee=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ce=ve?f.WRAPPED:f.FOUND,-1!==Ee&&Ee!==this._selected.pageIdx&&T(this,k,W).call(this,Ee)}T(this,me,be).call(this,ce,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,T(this,k,W).call(this,this._selected.pageIdx))}function X(he){const ce=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ce&&this._pdfDocument!==ce||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),T(this,me,be).call(this,f.FOUND),this._highlightMatches=!1,T(this,z,te).call(this))})}function Q(){const{pageIdx:he,matchIdx:ce}=this._selected;let ve=0,Ee=this._matchesCountTotal;if(-1!==ce){for(let we=0;we<he;we++){var Se;ve+=(null===(Se=this._pageMatches[we])||void 0===Se?void 0:Se.length)||0}ve+=ce+1}return(ve<1||ve>Ee)&&(ve=Ee=0),{current:ve,total:Ee}}function Ae(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:T(this,de,Q).call(this)})}function be(he,ce=!1){var ve,Ee;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:he,previous:ce,matchesCount:T(this,de,Q).call(this),rawQuery:null!==(ve=null===(Ee=this._state)||void 0===Ee?void 0:Ee.query)&&void 0!==ve?ve:null})}o.PDFFindController=class ne{constructor({linkService:ce,eventBus:ve}){n(this,me),n(this,_e),n(this,de),n(this,ue),n(this,le),n(this,pe),n(this,ie),n(this,re),n(this,Z),n(this,z),n(this,k),n(this,S),n(this,c),n(this,d),n(this,i),n(this,E),n(this,w),K(this,v,{get:Le,set:void 0}),n(this,s),n(this,a),this._linkService=ce,this._eventBus=ve,T(this,s,Fe).call(this),ve._on("find",T(this,a,oe).bind(this)),ve._on("findbarclose",T(this,ue,X).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(ce){this._pdfDocument&&T(this,s,Fe).call(this),ce&&(this._pdfDocument=ce,this._firstPageCapability.resolve())}scrollMatchIntoView({element:ce=null,selectedLeft:ve=0,pageIndex:Ee=-1,matchIndex:Se=-1}){this._scrollMatches&&ce&&-1!==Se&&Se===this._selected.matchIdx&&-1!==Ee&&Ee===this._selected.pageIdx&&(this._scrollMatches=!1,(0,C.scrollIntoView)(ce,{top:-50,left:ve+-400},!0))}}},(F,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterType=void 0,o.getCharacterType=function l(p){return function C(p){return p<11904}(p)?function b(p){return 0==(65408&p)}(p)?function t(p){return 32===p||9===p||13===p||10===p}(p)?g.SPACE:function y(p){return p>=97&&p<=122||p>=65&&p<=90}(p)||function f(p){return p>=48&&p<=57}(p)||95===p?g.ALPHA_LETTER:g.PUNCT:function A(p){return 3584==(65408&p)}(p)?g.THAI_LETTER:160===p?g.SPACE:g.ALPHA_LETTER:function e(p){return p>=13312&&p<=40959||p>=63744&&p<=64255}(p)?g.HAN_LETTER:function u(p){return p>=12448&&p<=12543}(p)?g.KATAKANA_LETTER:function _(p){return p>=12352&&p<=12447}(p)?g.HIRAGANA_LETTER:function m(p){return p>=65376&&p<=65439}(p)?g.HALFWIDTH_KATAKANA_LETTER:g.ALPHA_LETTER};const g={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};o.CharacterType=g},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFHistory=void 0,o.isDestArraysEqual=m,o.isDestHashesEqual=_;var C=g(7),b=g(19);function e(){return document.location.hash}function _(A,l){return"string"==typeof A&&"string"==typeof l&&(A===l||(0,C.parseQueryString)(A).get("nameddest")===l)}function m(A,l){function p(R,L){if(typeof R!=typeof L||Array.isArray(R)||Array.isArray(L))return!1;if(null!==R&&"object"==typeof R&&null!==L){if(Object.keys(R).length!==Object.keys(L).length)return!1;for(const H in R)if(!p(R[H],L[H]))return!1;return!0}return R===L||Number.isNaN(R)&&Number.isNaN(L)}if(!Array.isArray(A)||!Array.isArray(l)||A.length!==l.length)return!1;for(let R=0,L=A.length;R<L;R++)if(!p(A[R],l[R]))return!1;return!0}o.PDFHistory=class u{constructor({linkService:l,eventBus:p}){this.linkService=l,this.eventBus=p,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",R=>{this._isPagesLoaded=!!R.pagesCount},{once:!0})})}initialize({fingerprint:l,resetHistory:p=!1,updateUrl:R=!1}){if(!l||"string"!=typeof l)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const L=""!==this._fingerprint&&this._fingerprint!==l;this._fingerprint=l,this._updateUrl=!0===R,this._initialized=!0,this._bindEvents();const H=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=e(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(H,!0)||p){const{hash:V,page:U,rotation:$}=this._parseCurrentHash(!0);return!V||L||p?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:V,page:U,rotation:$},!0)}const G=H.destination;this._updateInternalState(G,H.uid,!0),void 0!==G.rotation&&(this._initialRotation=G.rotation),G.dest?(this._initialBookmark=JSON.stringify(G.dest),this._destination.page=null):G.hash?this._initialBookmark=G.hash:G.page&&(this._initialBookmark=`page=${G.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:l=null,explicitDest:p,pageNumber:R}){if(!this._initialized)return;if(l&&"string"!=typeof l)return void console.error(`PDFHistory.push: "${l}" is not a valid namedDest parameter.`);if(!Array.isArray(p))return void console.error(`PDFHistory.push: "${p}" is not a valid explicitDest parameter.`);if(!this._isValidPage(R)&&(null!==R||this._destination))return void console.error(`PDFHistory.push: "${R}" is not a valid pageNumber parameter.`);const L=l||JSON.stringify(p);if(!L)return;let H=!1;if(this._destination&&(_(this._destination.hash,L)||m(this._destination.dest,p))){if(this._destination.page)return;H=!0}this._popStateInProgress&&!H||(this._pushOrReplaceState({dest:p,hash:L,page:R,rotation:this.linkService.rotation},H),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(l){var p;if(this._initialized){if(!this._isValidPage(l))return void console.error(`PDFHistory.pushPage: "${l}" is not a valid page number.`);(null===(p=this._destination)||void 0===p?void 0:p.page)!==l&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${l}`,page:l,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const l=window.history.state;this._isValidState(l)&&l.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const l=window.history.state;this._isValidState(l)&&l.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(l,p=!1){const R=p||!this._destination,L={fingerprint:this._fingerprint,uid:R?this._uid:this._uid+1,destination:l};let H;if(this._updateInternalState(l,L.uid),this._updateUrl&&null!=l&&l.hash){const G=document.location.href.split("#")[0];G.startsWith("file://")||(H=`${G}#${l.hash}`)}R?window.history.replaceState(L,"",H):window.history.pushState(L,"",H)}_tryPushCurrentPosition(l=!1){if(!this._position)return;let p=this._position;if(l&&(p=Object.assign(Object.create(null),this._position),p.temporary=!0),!this._destination)return void this._pushOrReplaceState(p);if(this._destination.temporary)return void this._pushOrReplaceState(p,!0);if(this._destination.hash===p.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let R=!1;if(this._destination.page>=p.first&&this._destination.page<=p.page){if(void 0!==this._destination.dest||!this._destination.first)return;R=!0}this._pushOrReplaceState(p,R)}_isValidPage(l){return Number.isInteger(l)&&l>0&&l<=this.linkService.pagesCount}_isValidState(l,p=!1){if(!l)return!1;if(l.fingerprint!==this._fingerprint){if(!p)return!1;{if("string"!=typeof l.fingerprint||l.fingerprint.length!==this._fingerprint.length)return!1;const[R]=performance.getEntriesByType("navigation");if("reload"!==(null==R?void 0:R.type))return!1}}return!(!Number.isInteger(l.uid)||l.uid<0||null===l.destination||"object"!=typeof l.destination)}_updateInternalState(l,p,R=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),R&&null!=l&&l.temporary&&delete l.temporary,this._destination=l,this._uid=p,this._maxUid=Math.max(this._maxUid,p),this._numPositionUpdates=0}_parseCurrentHash(l=!1){const p=unescape(e()).substring(1),R=(0,C.parseQueryString)(p),L=R.get("nameddest")||"";let H=0|R.get("page");return(!this._isValidPage(H)||l&&L.length>0)&&(H=null),{hash:p,page:H,rotation:this.linkService.rotation}}_updateViewarea({location:l}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:l.pdfOpenParams.substring(1),page:this.linkService.page,first:l.pageNumber,rotation:l.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:l}){const p=e(),R=this._currentHash!==p;if(this._currentHash=p,!l){this._uid++;const{hash:H,page:G,rotation:V}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:H,page:G,rotation:V},!0)}if(!this._isValidState(l))return;this._popStateInProgress=!0,R&&(this._blockHashChange++,(0,b.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const L=l.destination;this._updateInternalState(L,l.uid,!0),(0,C.isValidRotation)(L.rotation)&&(this.linkService.rotation=L.rotation),L.dest?this.linkService.goToDestination(L.dest):L.hash?this.linkService.setHash(L.hash):L.page&&(this.linkService.page=L.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFScriptingManager=void 0;var C=g(7),b=g(3);o.PDFScriptingManager=class y{constructor({eventBus:t,sandboxBundleSrc:e=null,scriptingFactory:u=null,docPropertiesLookup:_=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=t,this._sandboxBundleSrc=e,this._scriptingFactory=u,this._docPropertiesLookup=_,this._scriptingFactory||window.addEventListener("updatefromsandbox",m=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:m.detail})})}setViewer(t){this._pdfViewer=t}setDocument(t){var e=this;return N(function*(){var u;if(e._pdfDocument&&(yield e._destroyScripting()),e._pdfDocument=t,!t)return;const[_,m,A]=yield Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(_||A){if(t===e._pdfDocument){try{e._scripting=e._createScripting()}catch(l){return console.error(`PDFScriptingManager.setDocument: "${null==l?void 0:l.message}".`),void(yield e._destroyScripting())}e._internalEvents.set("updatefromsandbox",l=>{(null==l?void 0:l.source)===window&&e._updateFromSandbox(l.detail)}),e._internalEvents.set("dispatcheventinsandbox",l=>{var p;null===(p=e._scripting)||void 0===p||p.dispatchEventInSandbox(l.detail)}),e._internalEvents.set("pagechanging",({pageNumber:l,previous:p})=>{l!==p&&(e._dispatchPageClose(p),e._dispatchPageOpen(l))}),e._internalEvents.set("pagerendered",({pageNumber:l})=>{e._pageOpenPending.has(l)&&l===e._pdfViewer.currentPageNumber&&e._dispatchPageOpen(l)}),e._internalEvents.set("pagesdestroy",function(){var l=N(function*(p){var R,L;yield e._dispatchPageClose(e._pdfViewer.currentPageNumber),yield null===(R=e._scripting)||void 0===R?void 0:R.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null===(L=e._closeCapability)||void 0===L||L.resolve()});return function(p){return l.apply(this,arguments)}}()),e._domEvents.set("mousedown",l=>{e._mouseState.isDown=!0}),e._domEvents.set("mouseup",l=>{e._mouseState.isDown=!1});for(const[l,p]of e._internalEvents)e._eventBus._on(l,p);for(const[l,p]of e._domEvents)window.addEventListener(l,p,!0);try{const l=yield e._getDocProperties();if(t!==e._pdfDocument)return;yield e._scripting.createSandbox({objects:_,calculationOrder:m,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...l,actions:A}}),e._eventBus.dispatch("sandboxcreated",{source:e})}catch(l){return console.error(`PDFScriptingManager.setDocument: "${null==l?void 0:l.message}".`),void(yield e._destroyScripting())}yield null===(u=e._scripting)||void 0===u?void 0:u.dispatchEventInSandbox({id:"doc",name:"Open"}),yield e._dispatchPageOpen(e._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{t===e._pdfDocument&&(e._ready=!0)})}}else yield e._destroyScripting()})()}dispatchWillSave(t){var e=this;return N(function*(){var u;return null===(u=e._scripting)||void 0===u?void 0:u.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(t){var e=this;return N(function*(){var u;return null===(u=e._scripting)||void 0===u?void 0:u.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(t){var e=this;return N(function*(){var u;return null===(u=e._scripting)||void 0===u?void 0:u.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(t){var e=this;return N(function*(){var u;return null===(u=e._scripting)||void 0===u?void 0:u.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var t;return(null===(t=this._destroyCapability)||void 0===t?void 0:t.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,b.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,b.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,b.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,b.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(t){var e=this;return N(function*(){const u=e._pdfViewer.isInPresentationMode||e._pdfViewer.isChangingPresentationMode,{id:_,siblings:m,command:A,value:l}=t;if(!_){switch(A){case"clear":console.clear();break;case"error":console.error(l);break;case"layout":if(u)return;const L=(0,C.apiPageLayoutToViewerModes)(l);e._pdfViewer.spreadMode=L.spreadMode;break;case"page-num":e._pdfViewer.currentPageNumber=l+1;break;case"print":yield e._pdfViewer.pagesPromise,e._eventBus.dispatch("print",{source:e});break;case"println":console.log(l);break;case"zoom":if(u)return;e._pdfViewer.currentScaleValue=l;break;case"SaveAs":e._eventBus.dispatch("download",{source:e});break;case"FirstPage":e._pdfViewer.currentPageNumber=1;break;case"LastPage":e._pdfViewer.currentPageNumber=e._pdfViewer.pagesCount;break;case"NextPage":e._pdfViewer.nextPage();break;case"PrevPage":e._pdfViewer.previousPage();break;case"ZoomViewIn":if(u)return;e._pdfViewer.increaseScale();break;case"ZoomViewOut":if(u)return;e._pdfViewer.decreaseScale()}return}if(u&&t.focus)return;delete t.id,delete t.siblings;const p=m?[_,...m]:[_];for(const L of p){const H=document.querySelector(`[data-element-id="${L}"]`);var R;H?H.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):null===(R=e._pdfDocument)||void 0===R||R.annotationStorage.setValue(L,t)}})()}_dispatchPageOpen(t,e=!1){var u=this;return N(function*(){const _=u._pdfDocument,m=u._visitedPages;if(e&&(u._closeCapability=(0,b.createPromiseCapability)()),!u._closeCapability)return;const A=u._pdfViewer.getPageView(t-1);if((null==A?void 0:A.renderingState)!==C.RenderingStates.FINISHED)return void u._pageOpenPending.add(t);u._pageOpenPending.delete(t);const l=N(function*(){var p,R;const L=yield m.has(t)?null:null===(p=A.pdfPage)||void 0===p?void 0:p.getJSActions();_===u._pdfDocument&&(yield null===(R=u._scripting)||void 0===R?void 0:R.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:L}))})();m.set(t,l)})()}_dispatchPageClose(t){var e=this;return N(function*(){var u;const _=e._pdfDocument,m=e._visitedPages;if(!e._closeCapability||e._pageOpenPending.has(t))return;const A=m.get(t);A&&(m.set(t,null),yield A,_===e._pdfDocument&&(yield null===(u=e._scripting)||void 0===u?void 0:u.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))})()}_getDocProperties(){var t=this;return N(function*(){if(t._docPropertiesLookup)return t._docPropertiesLookup(t._pdfDocument);const{docPropertiesLookup:e}=g(26);return e(t._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,b.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:t}=g(26);return new t(this._sandboxBundleSrc)}_destroyScripting(){var t=this;return N(function*(){var e,u;if(!t._scripting)return t._pdfDocument=null,void(null===(u=t._destroyCapability)||void 0===u||u.resolve());t._closeCapability&&(yield Promise.race([t._closeCapability.promise,new Promise(_=>{setTimeout(_,1e3)})]).catch(_=>{}),t._closeCapability=null),t._pdfDocument=null;try{yield t._scripting.destroySandbox()}catch{}for(const[_,m]of t._internalEvents)t._eventBus._off(_,m);t._internalEvents.clear();for(const[_,m]of t._domEvents)window.removeEventListener(_,m,!0);t._domEvents.clear(),t._pageOpenPending.clear(),t._visitedPages.clear(),t._scripting=null,delete t._mouseState.isDown,t._ready=!1,null===(e=t._destroyCapability)||void 0===e||e.resolve()})()}}},(F,o,g)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GenericScripting=void 0,o.docPropertiesLookup=function b(t){return y.apply(this,arguments)};var C=g(3);function y(){return(y=N(function*(t){const u="".split("#")[0];let{info:_,metadata:m,contentDispositionFilename:A,contentLength:l}=yield t.getMetadata();if(!l){const{length:p}=yield t.getDownloadInfo();l=p}return{..._,baseURL:u,filesize:l,filename:A||(0,C.getPdfFilenameFromUrl)(""),metadata:null==m?void 0:m.getRaw(),authors:null==m?void 0:m.get("dc:creator"),numPages:t.numPages,URL:""}})).apply(this,arguments)}o.GenericScripting=class f{constructor(e){this._ready=(0,C.loadScript)(e,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(e){var u=this;return N(function*(){(yield u._ready).create(e)})()}dispatchEventInSandbox(e){var u=this;return N(function*(){const _=yield u._ready;setTimeout(()=>_.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return N(function*(){(yield e._ready).nukeSandbox()})()}}}],j={};function O(F){var o=j[F];if(void 0!==o)return o.exports;var g=j[F]={exports:{}};return I[F](g,g.exports,O),g.exports}var D={};return(()=>{var F=D;Object.defineProperty(F,"__esModule",{value:!0}),Object.defineProperty(F,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return y.AnnotationLayerBuilder}}),Object.defineProperty(F,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return o.DefaultAnnotationLayerFactory}}),Object.defineProperty(F,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return o.DefaultStructTreeLayerFactory}}),Object.defineProperty(F,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return o.DefaultTextLayerFactory}}),Object.defineProperty(F,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return o.DefaultXfaLayerFactory}}),Object.defineProperty(F,"DownloadManager",{enumerable:!0,get:function(){return f.DownloadManager}}),Object.defineProperty(F,"EventBus",{enumerable:!0,get:function(){return t.EventBus}}),Object.defineProperty(F,"GenericL10n",{enumerable:!0,get:function(){return e.GenericL10n}}),Object.defineProperty(F,"LinkTarget",{enumerable:!0,get:function(){return g.LinkTarget}}),Object.defineProperty(F,"NullL10n",{enumerable:!0,get:function(){return u.NullL10n}}),Object.defineProperty(F,"PDFFindController",{enumerable:!0,get:function(){return _.PDFFindController}}),Object.defineProperty(F,"PDFHistory",{enumerable:!0,get:function(){return m.PDFHistory}}),Object.defineProperty(F,"PDFLinkService",{enumerable:!0,get:function(){return g.PDFLinkService}}),Object.defineProperty(F,"PDFPageView",{enumerable:!0,get:function(){return A.PDFPageView}}),Object.defineProperty(F,"PDFScriptingManager",{enumerable:!0,get:function(){return l.PDFScriptingManager}}),Object.defineProperty(F,"PDFSinglePageViewer",{enumerable:!0,get:function(){return b.PDFSinglePageViewer}}),Object.defineProperty(F,"PDFViewer",{enumerable:!0,get:function(){return b.PDFViewer}}),Object.defineProperty(F,"ProgressBar",{enumerable:!0,get:function(){return C.ProgressBar}}),Object.defineProperty(F,"RenderingStates",{enumerable:!0,get:function(){return C.RenderingStates}}),Object.defineProperty(F,"ScrollMode",{enumerable:!0,get:function(){return C.ScrollMode}}),Object.defineProperty(F,"SimpleLinkService",{enumerable:!0,get:function(){return g.SimpleLinkService}}),Object.defineProperty(F,"SpreadMode",{enumerable:!0,get:function(){return C.SpreadMode}}),Object.defineProperty(F,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return p.StructTreeLayerBuilder}}),Object.defineProperty(F,"TextLayerBuilder",{enumerable:!0,get:function(){return R.TextLayerBuilder}}),Object.defineProperty(F,"XfaLayerBuilder",{enumerable:!0,get:function(){return L.XfaLayerBuilder}}),Object.defineProperty(F,"parseQueryString",{enumerable:!0,get:function(){return C.parseQueryString}});var o=O(1),g=O(6),C=O(7),b=O(11),y=O(5),f=O(18),t=O(19),e=O(20),u=O(4),_=O(22),m=O(24),A=O(13),l=O(25),p=O(8),R=O(9),L=O(10)})(),D})()},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{},7156:Y=>{function r(n,h,T,N,K,P,M){try{var I=n[P](M),j=I.value}catch(O){return void T(O)}I.done?h(j):Promise.resolve(j).then(N,K)}Y.exports=function x(n){return function(){var h=this,T=arguments;return new Promise(function(N,K){var P=n.apply(h,T);function M(j){r(P,N,K,M,I,"next",j)}function I(j){r(P,N,K,M,I,"throw",j)}M(void 0)})}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},6521:Y=>{Y.exports=function r(x,n){if(n.has(x))throw new TypeError("Cannot initialize the same private elements twice on an object")},Y.exports.__esModule=!0,Y.exports.default=Y.exports},8912:Y=>{Y.exports=function r(x,n){return n.get?n.get.call(x):n.value},Y.exports.__esModule=!0,Y.exports.default=Y.exports},3448:Y=>{Y.exports=function r(x,n,h){if(n.set)n.set.call(x,h);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=h}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},2625:Y=>{Y.exports=function r(x,n){if(x!==n)throw new TypeError("Private static access of wrong provenance")},Y.exports.__esModule=!0,Y.exports.default=Y.exports},2506:Y=>{Y.exports=function r(x,n){if(void 0===x)throw new TypeError("attempted to "+n+" private static field before its declaration")},Y.exports.__esModule=!0,Y.exports.default=Y.exports},4069:Y=>{Y.exports=function r(x,n,h){if(!n.has(x))throw new TypeError("attempted to "+h+" private field on non-instance");return n.get(x)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},468:(Y,r,x)=>{var n=x(8912),h=x(4069);Y.exports=function T(N,K){var P=h(N,K,"get");return n(N,P)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9159:(Y,r,x)=>{var n=x(6521);Y.exports=function h(T,N,K){n(T,N),N.set(T,K)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},5661:(Y,r,x)=>{var n=x(3448),h=x(4069);Y.exports=function T(N,K,P){var M=h(N,K,"set");return n(N,M,P),P},Y.exports.__esModule=!0,Y.exports.default=Y.exports},4467:Y=>{Y.exports=function r(x,n,h){if(!n.has(x))throw new TypeError("attempted to get private field on non-instance");return h},Y.exports.__esModule=!0,Y.exports.default=Y.exports},1860:(Y,r,x)=>{var n=x(6521);Y.exports=function h(T,N){n(T,N),N.add(T)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},1280:(Y,r,x)=>{var n=x(8912),h=x(2625),T=x(2506);Y.exports=function N(K,P,M){return h(K,P),T(M,"get"),n(K,M)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9382:(Y,r,x)=>{var n=x(3448),h=x(2625),T=x(2506);Y.exports=function N(K,P,M,I){return h(K,P),T(M,"set"),n(K,M,I),I},Y.exports.__esModule=!0,Y.exports.default=Y.exports},5764:(Y,r,x)=>{var n=x(2625);Y.exports=function h(T,N,K){return n(T,N),K},Y.exports.__esModule=!0,Y.exports.default=Y.exports},8416:(Y,r,x)=>{var n=x(4062);Y.exports=function h(T,N,K){return(N=n(N))in T?Object.defineProperty(T,N,{value:K,enumerable:!0,configurable:!0,writable:!0}):T[N]=K,T},Y.exports.__esModule=!0,Y.exports.default=Y.exports},5036:(Y,r,x)=>{var n=x(8698).default;Y.exports=function h(T,N){if("object"!==n(T)||null===T)return T;var K=T[Symbol.toPrimitive];if(void 0!==K){var P=K.call(T,N||"default");if("object"!==n(P))return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===N?String:Number)(T)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},4062:(Y,r,x)=>{var n=x(8698).default,h=x(5036);Y.exports=function T(N){var K=h(N,"string");return"symbol"===n(K)?K:String(K)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},8698:Y=>{function r(x){return Y.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Y.exports.__esModule=!0,Y.exports.default=Y.exports,r(x)}Y.exports=r,Y.exports.__esModule=!0,Y.exports.default=Y.exports},4684:(Y,r,x)=>{"use strict";x.d(r,{rQ:()=>V,xC:()=>U});var n=x(1180),h=x(6689),T=x(2438),N=x(8645),K=x(7715),P=x(9773),M=x(7394);class I extends M.w0{constructor(q,B){super()}schedule(q,B=0){return this}}const j={setInterval($,q,...B){const{delegate:a}=j;return null!=a&&a.setInterval?a.setInterval($,q,...B):setInterval($,q,...B)},clearInterval($){const{delegate:q}=j;return((null==q?void 0:q.clearInterval)||clearInterval)($)},delegate:void 0};var O=x(9039);const F={now:()=>(F.delegate||Date).now(),delegate:void 0};class o{constructor(q,B=o.now){this.schedulerActionCtor=q,this.now=B}schedule(q,B=0,a){return new this.schedulerActionCtor(this,q).schedule(a,B)}}o.now=F.now;const C=new class g extends o{constructor(q,B=o.now){super(q,B),this.actions=[],this._active=!1}flush(q){const{actions:B}=this;if(this._active)return void B.push(q);let a;this._active=!0;do{if(a=q.execute(q.state,q.delay))break}while(q=B.shift());if(this._active=!1,a){for(;q=B.shift();)q.unsubscribe();throw a}}}(class D extends I{constructor(q,B){super(q,B),this.scheduler=q,this.work=B,this.pending=!1}schedule(q,B=0){var a;if(this.closed)return this;this.state=q;const s=this.id,v=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(v,s,B)),this.pending=!0,this.delay=B,this.id=null!==(a=this.id)&&void 0!==a?a:this.requestAsyncId(v,this.id,B),this}requestAsyncId(q,B,a=0){return j.setInterval(q.flush.bind(q,this),a)}recycleAsyncId(q,B,a=0){if(null!=a&&this.delay===a&&!1===this.pending)return B;null!=B&&j.clearInterval(B)}execute(q,B){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const a=this._execute(q,B);if(a)return a;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(q,B){let s,a=!1;try{this.work(q)}catch(v){a=!0,s=v||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:q,scheduler:B}=this,{actions:a}=B;this.work=this.state=this.scheduler=null,this.pending=!1,(0,O.P)(a,this),null!=q&&(this.id=this.recycleAsyncId(B,q,null)),this.delay=null,super.unsubscribe()}}});var y=x(9360),f=x(8251),e=x(2181),u=x(9627),_=x.t(u,2),m=x(1016),A=x.t(m,2);const l=["pdfViewerContainer"];function L($,q,B){$[q]=B}function H(){return typeof window>"u"}H()||L(_,"verbosity",u.VerbosityLevel.INFOS);var G=function($){return $[$.DISABLED=0]="DISABLED",$[$.ENABLED=1]="ENABLED",$[$.ENHANCED=2]="ENHANCED",$}(G||{});let V=(()=>{var $;class q{set cMapsUrl(a){this._cMapsUrl=a}set page(a){const s=a=parseInt(a,10)||1;this._pdf&&(a=this.getValidPageNumber(a)),this._page=a,s!==a&&this.pageChange.emit(a)}set renderText(a){this._renderText=a}set renderTextMode(a){this._renderTextMode=a}set originalSize(a){this._originalSize=a}set showAll(a){this._showAll=a}set stickToPage(a){this._stickToPage=a}set zoom(a){a<=0||(this._zoom=a)}get zoom(){return this._zoom}set zoomScale(a){this._zoomScale=a}get zoomScale(){return this._zoomScale}set rotation(a){"number"==typeof a&&a%90==0?this._rotation=a:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(a){this._externalLinkTarget=a}set autoresize(a){this._canAutoResize=!!a}set fitToPage(a){this._fitToPage=!!a}set showBorders(a){this._showBorders=!!a}static getLinkTarget(a){switch(a){case"blank":return m.LinkTarget.BLANK;case"none":return m.LinkTarget.NONE;case"self":return m.LinkTarget.SELF;case"parent":return m.LinkTarget.PARENT;case"top":return m.LinkTarget.TOP}return null}constructor(a,s){if((0,n.Z)(this,"element",void 0),(0,n.Z)(this,"ngZone",void 0),(0,n.Z)(this,"pdfViewerContainer",void 0),(0,n.Z)(this,"eventBus",void 0),(0,n.Z)(this,"pdfLinkService",void 0),(0,n.Z)(this,"pdfFindController",void 0),(0,n.Z)(this,"pdfViewer",void 0),(0,n.Z)(this,"isVisible",!1),(0,n.Z)(this,"_cMapsUrl",typeof _<"u"?`https://unpkg.com/pdfjs-dist@${u.version}/cmaps/`:null),(0,n.Z)(this,"_imageResourcesPath",typeof _<"u"?`https://unpkg.com/pdfjs-dist@${u.version}/web/images/`:void 0),(0,n.Z)(this,"_renderText",!0),(0,n.Z)(this,"_renderTextMode",G.ENABLED),(0,n.Z)(this,"_stickToPage",!1),(0,n.Z)(this,"_originalSize",!0),(0,n.Z)(this,"_pdf",void 0),(0,n.Z)(this,"_page",1),(0,n.Z)(this,"_zoom",1),(0,n.Z)(this,"_zoomScale","page-width"),(0,n.Z)(this,"_rotation",0),(0,n.Z)(this,"_showAll",!0),(0,n.Z)(this,"_canAutoResize",!0),(0,n.Z)(this,"_fitToPage",!1),(0,n.Z)(this,"_externalLinkTarget","blank"),(0,n.Z)(this,"_showBorders",!1),(0,n.Z)(this,"lastLoaded",void 0),(0,n.Z)(this,"_latestScrolledPage",void 0),(0,n.Z)(this,"resizeTimeout",null),(0,n.Z)(this,"pageScrollTimeout",null),(0,n.Z)(this,"isInitialized",!1),(0,n.Z)(this,"loadingTask",void 0),(0,n.Z)(this,"destroy$",new N.x),(0,n.Z)(this,"afterLoadComplete",new h.vpe),(0,n.Z)(this,"pageRendered",new h.vpe),(0,n.Z)(this,"pageInitialized",new h.vpe),(0,n.Z)(this,"textLayerRendered",new h.vpe),(0,n.Z)(this,"onError",new h.vpe),(0,n.Z)(this,"onProgress",new h.vpe),(0,n.Z)(this,"pageChange",new h.vpe(!0)),(0,n.Z)(this,"src",void 0),this.element=a,this.ngZone=s,H())return;let v;const w=u.version;v=window[`pdfWorkerSrc${w}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${w}/legacy/build/pdf.worker.min.js`),L(u.GlobalWorkerOptions,"workerSrc",v)}ngAfterViewChecked(){if(this.isInitialized)return;const a=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=a?!1===this.isVisible&&null!=a&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(a){if(!H()&&this.isVisible)if("src"in a)this.loadPDF();else if(this._pdf){if("renderText"in a?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:G.DISABLED,this.resetPdfDocument()):"showAll"in a&&(this.setupViewer(),this.resetPdfDocument()),"page"in a){const{page:s}=a;if(s.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,K.D)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,P.R)(this.destroy$)).subscribe({next:a=>{const s=this._rotation+a.rotate,v=a.getViewport({scale:this._zoom,rotation:s}).width*q.CSS_UNITS;let w=this._zoom,E=!0;if(!this._originalSize||this._fitToPage&&v>this.pdfViewerContainer.nativeElement.clientWidth){const i=a.getViewport({scale:1,rotation:s});w=this.getScale(i.width,i.height),E=!this._stickToPage}this.pdfViewer._setScale(w,E)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const a=q.getLinkTarget(this._externalLinkTarget);return a?{externalLinkTarget:a}:{}}initEventBus(){this.eventBus=function p($,q){const B=new $.EventBus;return function R($,q){(0,T.R)($,"documentload").pipe((0,P.R)(q)).subscribe(()=>{const B=document.createEvent("CustomEvent");B.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(B)}),(0,T.R)($,"pagerendered").pipe((0,P.R)(q)).subscribe(({pageNumber:B,cssTransform:a,source:s})=>{const v=document.createEvent("CustomEvent");v.initCustomEvent("pagerendered",!0,!0,{pageNumber:B,cssTransform:a}),s.div.dispatchEvent(v)}),(0,T.R)($,"textlayerrendered").pipe((0,P.R)(q)).subscribe(({pageNumber:B,source:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:B}),a.textLayerDiv.dispatchEvent(s)}),(0,T.R)($,"pagechanging").pipe((0,P.R)(q)).subscribe(({pageNumber:B,source:a})=>{const s=document.createEvent("UIEvents");s.initEvent("pagechanging",!0,!0),s.pageNumber=B,a.container.dispatchEvent(s)}),(0,T.R)($,"pagesinit").pipe((0,P.R)(q)).subscribe(({source:B})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("pagesinit",!0,!0,null),B.container.dispatchEvent(a)}),(0,T.R)($,"pagesloaded").pipe((0,P.R)(q)).subscribe(({pagesCount:B,source:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("pagesloaded",!0,!0,{pagesCount:B}),a.container.dispatchEvent(s)}),(0,T.R)($,"scalechange").pipe((0,P.R)(q)).subscribe(({scale:B,presetValue:a,source:s})=>{const v=document.createEvent("UIEvents");v.initEvent("scalechange",!0,!0),v.scale=B,v.presetValue=a,s.container.dispatchEvent(v)}),(0,T.R)($,"updateviewarea").pipe((0,P.R)(q)).subscribe(({location:B,source:a})=>{const s=document.createEvent("UIEvents");s.initEvent("updateviewarea",!0,!0),s.location=B,a.container.dispatchEvent(s)}),(0,T.R)($,"find").pipe((0,P.R)(q)).subscribe(({source:B,type:a,query:s,phraseSearch:v,caseSensitive:w,highlightAll:E,findPrevious:i})=>{if(B===window)return;const d=document.createEvent("CustomEvent");d.initCustomEvent("find"+a,!0,!0,{query:s,phraseSearch:v,caseSensitive:w,highlightAll:E,findPrevious:i}),window.dispatchEvent(d)}),(0,T.R)($,"attachmentsloaded").pipe((0,P.R)(q)).subscribe(({attachmentsCount:B,source:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:B}),a.container.dispatchEvent(s)}),(0,T.R)($,"sidebarviewchanged").pipe((0,P.R)(q)).subscribe(({view:B,source:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("sidebarviewchanged",!0,!0,{view:B}),a.outerContainer.dispatchEvent(s)}),(0,T.R)($,"pagemode").pipe((0,P.R)(q)).subscribe(({mode:B,source:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("pagemode",!0,!0,{mode:B}),a.pdfViewer.container.dispatchEvent(s)}),(0,T.R)($,"namedaction").pipe((0,P.R)(q)).subscribe(({action:B,source:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("namedaction",!0,!0,{action:B}),a.pdfViewer.container.dispatchEvent(s)}),(0,T.R)($,"presentationmodechanged").pipe((0,P.R)(q)).subscribe(({active:B,switchInProgress:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("presentationmodechanged",!0,!0,{active:B,switchInProgress:a}),window.dispatchEvent(s)}),(0,T.R)($,"outlineloaded").pipe((0,P.R)(q)).subscribe(({outlineCount:B,source:a})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("outlineloaded",!0,!0,{outlineCount:B}),a.container.dispatchEvent(s)})}(B,q),B}(A,this.destroy$),(0,T.R)(this.eventBus,"pagerendered").pipe((0,P.R)(this.destroy$)).subscribe(a=>{this.pageRendered.emit(a)}),(0,T.R)(this.eventBus,"pagesinit").pipe((0,P.R)(this.destroy$)).subscribe(a=>{this.pageInitialized.emit(a)}),(0,T.R)(this.eventBus,"pagechanging").pipe((0,P.R)(this.destroy$)).subscribe(({pageNumber:a})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=a,this.pageChange.emit(a)},100)}),(0,T.R)(this.eventBus,"textlayerrendered").pipe((0,P.R)(this.destroy$)).subscribe(a=>{this.textLayerRendered.emit(a)})}initPDFServices(){this.pdfLinkService=new m.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new m.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:G.DISABLED,findController:this.pdfFindController,l10n:new m.GenericL10n("en"),imageResourcesPath:this._imageResourcesPath}}setupViewer(){L(_,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new m.PDFViewer(this.getPDFOptions()):new m.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(a){return a<1?1:a>this._pdf.numPages?this._pdf.numPages:a}getDocumentParams(){const a=typeof this.src;if(!this._cMapsUrl)return this.src;const s={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===a?s.url=this.src:"object"===a&&(void 0!==this.src.byteLength?s.data=this.src:Object.assign(s,this.src)),s}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=u.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=s=>{this.onProgress.emit(s)};const a=this.src;(0,K.D)(this.loadingTask.promise).pipe((0,P.R)(this.destroy$)).subscribe({next:s=>{this._pdf=s,this.lastLoaded=a,this.afterLoadComplete.emit(s),this.resetPdfDocument(),this.update()},error:s=>{this.lastLoaded=null,this.onError.emit(s)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(a,s){const v=this._showBorders?2*q.BORDER_WIDTH:0,w=this.pdfViewerContainer.nativeElement.clientWidth-v,E=this.pdfViewerContainer.nativeElement.clientHeight-v;if(0===E||0===s||0===w||0===a)return 1;let i=1;switch(this._zoomScale){case"page-fit":i=Math.min(E/s,w/a);break;case"page-height":i=E/s;break;default:i=w/a}return this._zoom*i/q.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){H()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){H()||this.ngZone.runOutsideAngular(()=>{(0,T.R)(window,"resize").pipe(function t($,q=C){return(0,y.e)((B,a)=>{let s=null,v=null,w=null;const E=()=>{if(s){s.unsubscribe(),s=null;const d=v;v=null,a.next(d)}};function i(){const d=w+$,c=q.now();if(c<d)return s=this.schedule(void 0,d-c),void a.add(s);E()}B.subscribe((0,f.x)(a,d=>{v=d,w=q.now(),s||(s=q.schedule(i,$),a.add(s))},()=>{E(),a.complete()},void 0,()=>{v=s=null}))})}(100),(0,e.h)(()=>this._canAutoResize&&!!this._pdf),(0,P.R)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return $=q,(0,n.Z)(q,"CSS_UNITS",96/72),(0,n.Z)(q,"BORDER_WIDTH",9),(0,n.Z)(q,"\u0275fac",function(a){return new(a||$)(h.Y36(h.SBq),h.Y36(h.R0b))}),(0,n.Z)(q,"\u0275cmp",h.Xpm({type:$,selectors:[["pdf-viewer"]],viewQuery:function(a,s){if(1&a&&h.Gf(l,5),2&a){let v;h.iGM(v=h.CRH())&&(s.pdfViewerContainer=v.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[h.TTD],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(a,s){1&a&&(h.TgZ(0,"div",0,1),h._UZ(2,"div",2),h.qZA())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})),q})(),U=(()=>{var $;class q{}return $=q,(0,n.Z)(q,"\u0275fac",function(a){return new(a||$)}),(0,n.Z)(q,"\u0275mod",h.oAB({type:$})),(0,n.Z)(q,"\u0275inj",h.cJS({})),q})()}}]);